(()=>{var __webpack_modules__={676:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},3614:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(676);function i(e){if(Array.isArray(e))return(0,r.Z)(e)}},3349:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>r})},2137:(e,t,n)=>{"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>i})},6610:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>r})},5991:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{Z:()=>i})},6156:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>r})},5533:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(6875);function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=(0,r.Z)(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}},7608:(e,t,n)=>{"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,{Z:()=>r})},379:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(4665);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r.Z)(e,t)}},6410:(e,t,n)=>{"use strict";function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,{Z:()=>r})},2303:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:()=>r})},6070:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(484),i=n(3349);function o(e,t){return!t||"object"!==(0,r.Z)(t)&&"function"!=typeof t?(0,i.Z)(e):t}},4665:(e,t,n)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{Z:()=>r})},6875:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7608);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}},8927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(3614),i=n(6410),o=n(2961),a=n(2303);function s(e){return(0,r.Z)(e)||(0,i.Z)(e)||(0,o.Z)(e)||(0,a.Z)()}},484:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:()=>r})},2961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(676);function i(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},7757:(e,t,n)=>{e.exports=n(5666)},1318:(e,t,n)=>{"use strict";n.d(t,{Vw:()=>f,tV:()=>h});var r=n(484),i=n(8927),o=n(2137),a=n(6610),s=n(5991),l=n(7757),u=n.n(l),c=n(4286);function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,null,[{key:"stdev",value:function(e){return Math.sqrt(this.var(e))}},{key:"normalizedToHexByte",value:function(e){h.assert("Input is normalized",e>=0&&e<=255);var t=(255*e).toString(16).toUpperCase();return h.assert("Correct Length",1==t.length||2==t.length),2==t.length?t:"0"+t}},{key:"majority",value:function(e){h.assert("array valid",null!=e&&null!=e.length);var t,n={},r=_(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;null==n[i]&&(n[i]=0),n[i]++}}catch(e){r.e(e)}finally{r.f()}for(var o=[],a=0,s=Object.keys(n);a<s.length;a++){var l=s[a],u=n[l];o.push([l,u])}return h.assert("a sensible",o.length>0),(0,c.max_func_obj)(o,(function(e){return e[1]}),(function(e){return e[0]}))}},{key:"corr",value:function(e,t){return this.cov(e,t)/(this.stdev(e)*this.stdev(t))}},{key:"sample_corr",value:function(e,t){var n=this.mean(e),r=this.mean(t);return this.sum(this.zip(e,t).map((function(e){return(e[0]-n)*(e[1]-r)})))/Math.sqrt(this.sum(e.map((function(e){return(e-n)*(e-n)})))*this.sum(t.map((function(e){return(e-r)*(e-r)}))))}},{key:"cov",value:function(e,t){for(var n=e.length,r=0;r<n;++r)for(var i=r+1;i<n;++i)e[r],e[i],t[r],t[i];return tmp/(n*n)}},{key:"var",value:function(e){var t=this.mean(e);return e.reduce((function(e,n){return e+Math.pow(n-t,2)}),0)/e.length}},{key:"mean",value:function(e){return 0!=e.length?this.sum(e)/e.length:0}},{key:"median",value:function(e){if(0!=e.length){var t=e.map((function(e){return new Number(e)}));t.sort((function(e,t){return e-t}));var n=t.length/2,r=t[n=Math.floor(n)];return r=new Number(r),h.assert("is_number",r instanceof Number),r}return 0}},{key:"sum",value:function(e){return h.assert("Input valid",null!=e&&null!=e),e.reduce((function(e,t){return Number(e)+Number(t)}),0)}},{key:"sumArray",value:function(e){var t,n=null,r=_(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(null==n)n=i;else for(var o=0;o<n.length;++o)n[o]=n[o]+i[o]}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"zip2d",value:function(e){if(e==[])return[];for(var t=[],n=e.length,r=e[0].length,i=0;i<r;++i){for(var o=[],a=0;a<n;++a)o.push(e[a][i]);t.push(o)}return t}},{key:"zip",value:function(e,t){for(var n=[],r=0;r<e.length;++r)n.push([e[r],t[r]]);return n}},{key:"unique",value:function(e){return e.filter((function(e,t,n){return n.indexOf(e)==t}))}}]),e}(),h=function(){function e(){(0,a.Z)(this,e)}var t,n,l;return(0,s.Z)(e,null,[{key:"createChunks",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e.assert("chunksize valid",!isNaN(n)&&0!=n&&null!=n);var i=[];void 0===r&&(r=function(e){return e});for(var o=0;o<t.length;o+=n){var a=t.slice(o,o+n);i.push(r(a))}return i}},{key:"toUnicodeSuperscript",value:function(e){var t=["â°","Â¹","Â²","Â³","â´","âµ","â¶","â·","â¸","â¹"],n="";0==(e=new Number(e))&&(n=t[0]);for(var r=parseInt(e.toFixed(0));r>0;r=~~(r/10))n=t[Math.round(r)%10]+n;return n}},{key:"toUnicodeSubscript",value:function(e){var t=["â‚€","â‚","â‚‚","â‚ƒ","â‚„","â‚…","â‚†","â‚‡","â‚ˆ","â‚‰"],n="";0==(e=new Number(e))&&(n=t[0]);for(var r=parseInt(e.toFixed(0));r>0;r=~~(r/10))n=t[Math.round(r)%10]+n;return n}},{key:"valueToSensibleString",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"scientific",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;t=new Number(t);var o=0,a={0:"",1:"Ki",2:"Mi",3:"Gi",4:"Ti",5:"Pi"},s="";if("programmer"==n){for(;t>=1024;)t/=1024,++o;s=t.toFixed(i-1),s+=" "+a[o]+r}else if("scientific"==n){for(;t>=10;)t/=10,++o;s=t.toFixed(i-1),o.toString(),s+=" â‹… 10"+e.toUnicodeSuperscript(o)}else if("fraction"==n){for(var l=1e-5,u=new Number(t),c=1;Math.abs(Math.round(u)-u)>l;)u*=10,c*=10;var _=function(e,t){if(e=Math.abs(Math.round(e)),(t=Math.abs(Math.round(t)))>e){var n=e;e=t,t=n}for(;e>=0&&t>=0;){if(0==t)return e;if(0==(e%=t))return t;t%=e}return 1},d=_(u,c);u/=d,c/=d;var f=e.toUnicodeSuperscript(u.toString()),h=e.toUnicodeSubscript(c.toString());s=f+"/"+h}else e.assert("unknown mode",!1);return s}},{key:"modifyingMapRecursive",value:function(t,n,r){if(!(null==t||null==t||t instanceof String||"string"==typeof t))if(t instanceof Array){var i,o=_(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;e.modifyingMapRecursive(a,n,r)}}catch(e){o.e(e)}finally{o.f()}}else{var s=e.listKeys(t);if(null!=s){var l,u=_(s);try{for(u.s();!(l=u.n()).done;){var c=l.value;c==n?t[c]=r(t[c]):e.modifyingMapRecursive(t[c],n,r)}}catch(e){u.e(e)}finally{u.f()}}}}},{key:"valueFromPromise",value:(l=(0,o.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.then){e.next=7;break}return e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"valueFromPromiseFull",value:(n=(0,o.Z)(u().mark((function t(n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n.then){t.next=9;break}return t.next=3,n;case 3:return r=t.sent,t.next=6,e.valueFromPromiseFull(r);case 6:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)}))),function(e){return n.apply(this,arguments)})},{key:"waitArray",value:(t=(0,o.Z)(u().mark((function t(n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<n.length)){t.next=8;break}return t.next=4,e.valueFromPromise(n[r]);case 4:n[r]=t.sent;case 5:++r,t.next=1;break;case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})},{key:"arraysEqual",value:function(e,t){if(this.assert("1 is array",e instanceof Array),this.assert("2 is array",t instanceof Array),e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}},{key:"listKeys",value:function(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.push(i)}return t}},{key:"merge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0==e.length)return[];var n,r=this.listKeys(e[0]),o={},a=_(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;o[s]=void 0}}catch(e){a.e(e)}finally{a.f()}var l,u=_(e);try{for(u.s();!(l=u.n()).done;){var c,d=l.value,f=_(r);try{for(f.s();!(c=f.n()).done;){var h=c.value,p=d[h];if(p instanceof Array){var v;null==o[h]&&(o[h]=[]),(v=o[h]).push.apply(v,(0,i.Z)(p))}else{if(null==o[h]&&(o[h]=p),o[h]!=p&&(console.log("Different elements for key "+h+": "+o[h]+" vs "+p),null!=t[h])){o[h]=t[h](o[h],p);continue}this.assert("Same primitive values",o[h]==p)}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){u.e(e)}finally{u.f()}return o}},{key:"mergeRecursive",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t||null==t)return n;if(null==n||null==n)return t;if("string"==typeof t)return t;if(("array"==typeof t||t instanceof Array)&&("array"==typeof n||n instanceof Array))return n.every((function(e){return t.includes(e)}))?t:[].concat((0,i.Z)(t),(0,i.Z)(n));var o,a=t,s=e.listKeys(n),l=_(s);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=n[u];if(null==r[u]){var d=a[u];a[u]=null==d?c:e.mergeRecursive(a[u],c)}else{var f=r[u];a[u]=f(a[u],c,r)}}}catch(e){l.e(e)}finally{l.f()}return a}},{key:"flatten",value:function(e){return[].concat.apply([],e)}},{key:"logObject",value:function(e,t){return null==t&&(t=e,e="(anon)"),console.log(e+": "+JSON.stringify(t))}},{key:"groupBy",value:function(t,n){var r,i={},o=_(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;e.assert("key not undefined",void 0!==n(a)),e.listKeys(i).includes(n(a))?i[n(a)].push(a):i[n(a)]=[a]}}catch(e){o.e(e)}finally{o.f()}return Object.values(i)}},{key:"assert",value:function(e,t){if(!t)throw console.log('Assertion "'+e+'" failed'),console.trace(),window.alert("Assertion failed. Check console"),new Error}},{key:"stringify_circular",value:function(e){var t;return JSON.stringify(e,(t=new WeakSet,function(e,n){if("object"===(0,r.Z)(n)&&null!==n){if(t.has(n))return;t.add(n)}return n}))}}]),e}()},4286:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CanvasDrawManager:()=>CanvasDrawManager,Bracket:()=>Bracket,Button:()=>Button,Layout:()=>Layout,Pos:()=>Pos,min_func:()=>min_func,max_func:()=>max_func,max_func_obj:()=>max_func_obj,RU_DataView:()=>RU_DataView,RU_DataViewBarGraph:()=>RU_DataViewBarGraph,RU_DataViewFormLayout:()=>RU_DataViewFormLayout,RU_DataViewNumberBlock:()=>RU_DataViewNumberBlock,RU_DataViewSuggestedActionBlock:()=>RU_DataViewSuggestedActionBlock,RU_DataViewText:()=>RU_DataViewText,createImageDownload:()=>createImageDownload,DataBlock:()=>DataBlock});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8927),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3349),_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5533),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(379),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6070),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7608),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6610),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5991),_datahelper_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1318),_windowing_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2238);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=(0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(e);if(t){var i=(0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__.Z)(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function render_button_to_graphic(button){var mode=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"canvas_element",button_class=button.constructor.name,c=document.createElement("canvas"),ctx=c.getContext("2d");c.width=button.button_subwindow.targetwidth,c.height=button.button_subwindow.targetheight;var new_obj=eval("new "+button_class+"(ctx, ...(button.dataparams));");new_obj.button_subwindow_state="open",new_obj.is_locked_open=!0,new_obj.setFullyOpen();var b=new Bracket(ctx);b.setupEventListeners(),b.addButton(new_obj),b.drawEx(new Pos(-20,0),new Pos(0,0),0,0,!0);var imgdat=c.toDataURL("image/jpeg");return"canvas_element"===mode?c:imgdat}function createImageDownload(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("canvas"),r=n.getContext("2d"),i=700,o=500,a=0,s=0;n.height=Object.entries(e).length*o;var l=Object.entries(e)[0][1];n.width=(1+l.buttons.length)*i,r.save(),r.fillStyle="white",r.fillRect(0,0,n.width,n.height),r.restore();for(var u=0,c=Object.entries(e);u<c.length;u++){var _=c[u],d=_[0],f=_[1];r.save(),r.textBaseline="middle",r.textAlign="center",r.font="60px Arial";var h=new Number(d),p=h>>16&65535,v=65535&h;r.fillText("Affected node "+p.toString()+"|"+v.toString(),i/2,a+o/2),r.restore();var m,y=i,g=_createForOfIteratorHelper(f.buttons);try{for(g.s();!(m=g.n()).done;){var b=m.value,w=render_button_to_graphic(b);r.drawImage(w,y,a),y+=i}}catch(e){g.e(e)}finally{g.f()}s=Math.max(s,y),a+=o,y=0}var E=n.toDataURL("image/jpeg"),k=document.createElement("a");k.setAttribute("href",E),k.setAttribute("download",t+"buttons.jpg"),k.style.display="none",document.body.appendChild(k),k.click(),document.body.removeChild(k)}function max_func(e,t){null==e&&console.trace("undefined parameter"),_datahelper_js__WEBPACK_IMPORTED_MODULE_2__.tV.assert("Array is non-empty",e.length>0);var n,r=t(e[0]),i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t(o);a>r&&(r=a)}}catch(e){i.e(e)}finally{i.f()}return r}function max_func_obj(e,t,n){if(0==e.length)return null;var r,i=n(e[0]),o=t(e[0]),a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var s=r.value,l=t(s);l>o&&(o=l,i=n(s))}}catch(e){a.e(e)}finally{a.f()}return i}function min_func(e,t){var n,r=t(e[0]),i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t(o);a<r&&(r=a)}}catch(e){i.e(e)}finally{i.f()}return r}var Pos=function(){function e(t,n){(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,e),this.x=t,this.y=n}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(e,[{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"minus",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"times",value:function(t){return new e(this.x*t.x,this.y*t.y)}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"dist",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"inRect",value:function(e,t){return!(this.x<e.x||this.y<e.y||this.x>t.x||this.y>t.y)}}]),e}(),Clickable=function(){function e(){(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,e),this.children=Array(),this.onEnterHover=function(){return!1},this.onLeaveHover=function(){return!1},this.onClick=function(){return!1},this.onDoubleClick=function(){return!1},this.onMouseMove=function(){return!1},this.clickable_state="not_hovered",this.enable_func=function(){return!0}}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(e,[{key:"destroy",value:function(){this.children=[]}},{key:"addChild",value:function(e){this.children.push(e)}},{key:"addVIPChild",value:function(e){this.children.unshift(e)}},{key:"setEnableFunc",value:function(e){this.enable_func=e}},{key:"onUpdateDoubleClick",value:function(e,t){if(!this.enable_func())return!1;if(this.is_inside(e)&&this.onDoubleClick())return!0;var n,r=_createForOfIteratorHelper(this.children);try{for(r.s();!(n=r.n()).done;)if(n.value.onUpdateDoubleClick(e,t))return!0}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"onUpdateClick",value:function(e,t){if(!this.enable_func())return!1;if(this.is_inside(e)&&this.onClick())return!0;var n,r=_createForOfIteratorHelper(this.children);try{for(r.s();!(n=r.n()).done;)if(n.value.onUpdateClick(e,t))return!0}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"onUpdateMove",value:function(e){if(!this.enable_func())return!1;if(this.is_inside(e)){if(this.onMouseMove(e),"not_hovered"==this.clickable_state&&(this.clickable_state="hovered",this.onEnterHover(e)))return!0}else if("hovered"==this.clickable_state&&(this.clickable_state="not_hovered",this.onLeaveHover()))return!0;var t,n=_createForOfIteratorHelper(this.children);try{for(n.s();!(t=n.n()).done;)if(t.value.onUpdateMove(e))return!0}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"is_inside",value:function(e){return console.log("Abstract function called (is_inside)"),!1}},{key:"setOnEnterHover",value:function(e){this.onEnterHover=e}},{key:"setOnLeaveHover",value:function(e){this.onLeaveHover=e}},{key:"setOnClick",value:function(e){this.onClick=e}},{key:"setOnDoubleClick",value:function(e){this.onDoubleClick=e}},{key:"setOnMouseMove",value:function(e){this.onMouseMove=e}}]),e}(),SubWindow=function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(e,r,i,o,a){var s;return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),(s=t.call(this)).ctx=e,s.topleft=new Pos(r,i),s.targetwidth=o,s.targetheight=a,s._sizetrans=0,s.subwindow_trans_change=10,s.subwindow_popped_out=!1,s.layout=null,s.background_color="white",s}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"setLayout",value:function(e){return this.layout=e,this}},{key:"width",value:function(){return this.targetwidth*this._sizetrans/100}},{key:"height",value:function(){return this.targetheight*this._sizetrans/100}},{key:"draw",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!=e&&(this.topleft=e);var r=this.ctx;n&&(r=n),r.save(),r.beginPath(),r.strokeStyle="black",r.lineWidth=2;var i=r.fillStyle;r.fillStyle=this.background_color,r.rect(this.topleft.x,this.topleft.y,this.width(),this.height()),r.fill(),r.stroke(),r.fillStyle=i,"open"==t?(this._sizetrans+=this.subwindow_trans_change,this._sizetrans>100&&(this._sizetrans=100)):"collapsed"==t&&(this._sizetrans-=this.subwindow_trans_change,this._sizetrans<0&&(this._sizetrans=0)),null!=this.layout&&0!=this._sizetrans&&this.layout.draw(r),r.restore()}},{key:"is_inside",value:function(e){var t=e.minus(this.topleft);return!(t.x<0||t.y<0||t.x>this.width()||this.height())}}]),n}(Clickable),Button=function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(e){var r;return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),(r=t.call(this)).ctx=e,r.state=0,r.update=0,r.color="orange",r.button_subwindow_state="collapsed",r.button_subwindow=new SubWindow(e,0,0,600,400),r.addChild(r.button_subwindow),r.is_locked_open=!1,r.topleft=new Pos(0,0),r.size=new Pos(0,0),r.button_image=null,r}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"setDefaultDblClick",value:function(){var e=this;this.setOnDoubleClick((function(t){var n=new _windowing_js__WEBPACK_IMPORTED_MODULE_3__.a(window);return n.setSenderData({className:e.constructor.name,dataParams:e.dataparams}),n.open("renderer_dir/subwindow.html","_blank")||(console.log("Failed to open subwindow"),alert("failed to open subwindow")),!0}))}},{key:"setFullyOpen",value:function(){this.button_subwindow_state="open",this.button_subwindow._sizetrans=100,this.is_locked_open=!0}},{key:"setButtonImage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(null==e)return this;this.button_image=new Image,this.button_image.src=e,this.button_image.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");e.width=n,e.height=n,r.drawImage(t.button_image,0,0,n,n),t.button_image.src=e.toDataURL()}}},{key:"is_inside",value:function(e){var t=e.minus(this.topleft);return!(t.x<0||t.y<0||t.x>this.size.x||t.y>this.size.y)}},{key:"draw",value:function(e,t){this.update++;var n=new Date,r=this.ctx;if(this.topleft=e,this.size=t,this.button_subwindow.draw(e,this.button_subwindow_state),r.save(),r.beginPath(),null==this.button_image){if(0==this.state){var i=2*Math.PI/1e3,o=t.x/2,a=n.getMilliseconds(),s=Math.cos(i*a)*o,l=Math.sin(i*a)*o,u=r.createLinearGradient(e.x+o+s,e.y+o+l,e.x+o-s,e.y+o-l);u.addColorStop(0,this.color),u.addColorStop(1,"white"),r.fillStyle=u}r.strokeStyle="#000000",r.lineWidth=2,r.rect(e.x,e.y,t.x,t.y),r.stroke(),0==this.state&&r.fill()}else r.drawImage(this.button_image,e.x,e.y,t.x,t.y),r.strokeStyle="#000000",r.lineWidth=2,r.rect(e.x,e.y,t.x,t.y),r.stroke();r.restore(),e=null,t=null,n=null}}]),n}(Clickable),Layout=function(){function e(t){var n=this;(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,e),this.parent=t,this._layout={},this.databinding=null;var r=this;this._layout_clickable=new(function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(){return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),t.apply(this,arguments)}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"is_inside",value:function(e){for(var t=0,n=Object.keys(r._layout);t<n.length;t++){var i=n[t],o=r._layout[i],a=new Pos(r.parent.width()*o.size.x/100,r.parent.height()*o.size.y/100),s=r.parent.topleft.plus(o.topleft.times(new Pos(r.parent.width()/100,r.parent.height()/100)));if(s.x<e.x&&e.x<s.x+a.x&&s.y<e.y&&e.y<s.y+a.y)return this._tmp_hovered=i,this._mouse_pos=e,!0}return delete this._tmp_hovered,!1}}]),n}(Clickable)),this._layout_clickable.setOnClick((function(){var e=n._layout_clickable._tmp_hovered,t=n._layout[e],r=new Pos(n.parent.width()*t.size.x/100,n.parent.height()*t.size.y/100),i=n.parent.topleft.plus(t.topleft.times(new Pos(n.parent.width()/100,n.parent.height()/100))),o=n._layout_clickable._mouse_pos,a=n.getCurrentDataView(e);if(null!=a.information_button_pos&&a.information_button_pos.x<o.x&&a.information_button_pos.y<o.y&&a.information_button_pos.x+a.information_button_size.x>o.x&&a.information_button_pos.y+a.information_button_size.y>o.y)return console.log("Information Button clicked!"),a.showOptimizationHints(),!0;var s=i.x+r.x-20,l=i.x+r.x,u=i.y,c=i.y+20;return!!(t.is_multiview&&s<o.x&&o.x<l&&u<o.y&&o.y<c)&&(t.multiview_selector=(t.multiview_selector+1)%t.dataviews.length,!0)})),this._layout_clickable.setOnMouseMove((function(e){var t=n._layout_clickable._tmp_hovered;if(t)return n.getCurrentDataView(t).mouseInside(e),!0})),this._layout_clickable.setOnDoubleClick((function(){var e=n._layout_clickable._tmp_hovered,t=n._layout[e],r=new Pos(n.parent.width()*t.size.x/100,n.parent.height()*t.size.y/100),i=n.parent.topleft.plus(t.topleft.times(new Pos(n.parent.width()/100,n.parent.height()/100))),o=n._layout_clickable._mouse_pos,a=i.x+r.x-20,s=i.x+r.x,l=i.y,u=i.y+20;return t.is_multiview?!(a<o.x&&o.x<s&&l<o.y&&o.y<u||(t.dataviews[t.multiview_selector].openSettingsWindow(),0)):(t.dataview.openSettingsWindow(),!0)})),t.addVIPChild(this._layout_clickable)}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(e,[{key:"setEventHandlers",value:function(e,t,n){this._layout_clickable.setOnClick(e),this._layout_clickable.setOnEnterHover(t),this._layout_clickable.setOnLeaveHover(n)}},{key:"getCurrentDataView",value:function(e){var t=this._layout[e];return t.is_multiview?t.dataviews[t.multiview_selector]:t.dataview}},{key:"getLayoutObject",value:function(){for(var e={},t=0,n=Object.keys(this._layout);t<n.length;t++){var r=n[t];"dataview"!=r&&"dataviews"!=r&&(e[r]=this._layout[r])}return this._layout}},{key:"setRect",value:function(e,t,n,r){this._layout[e]={},this._layout[e].topleft=t,this._layout[e].size=n,this._layout[e].dataview=r}},{key:"setMultiviewRect",value:function(e,t,n,r){var i=this;if(r.length<1)alert("You cannot set a multiview with no contents!");else{this._layout[e]={},this._layout[e].topleft=t,this._layout[e].size=n,this._layout[e].dataviews=r,this._layout[e].is_multiview=!0,this._layout[e].multiview_selector=r.length-1;for(var o=function(t){var n=r[t];n instanceof RU_DataViewBarGraph&&n.dvbg_clickable.setEnableFunc((function(){return i._layout[e].multiview_selector==t}))},a=0;a<r.length;++a)o(a)}}},{key:"setDataBinding",value:function(e){this.databinding=e}},{key:"draw",value:function(e){for(var t=this.databinding,n=0,r=Object.keys(this._layout);n<r.length;n++){var i=r[n],o=this._layout[i],a=new Pos(this.parent.width()*o.size.x/100,this.parent.height()*o.size.y/100),s=this.parent.topleft.plus(o.topleft.times(new Pos(this.parent.width()/100,this.parent.height()/100))),l=null;null==(l=o.is_multiview?o.dataviews[o.multiview_selector]:o.dataview)&&console.log("Undefined dv for key "+i),l.setRect(s,a),o.is_multiview?(l.draw(e,t[i][o.multiview_selector],this.parent._sizetrans/100),e.save(),e.beginPath(),e.fillStyle="lime",e.rect(s.x+a.x-20,s.y,20,20),e.fill(),e.restore()):l.draw(e,t[i],this.parent._sizetrans/100)}}}]),e}(),DataBlock=function(){function e(t,n){(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,e),this.setData(t,n)}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(e,[{key:"setData",value:function(e,t){return this.data=e,this.datatype=t,this}}]),e}(),RU_DataView=function(){function RU_DataView(){(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,RU_DataView),this.topleft=null,this.size=null,this.analyze=function(e){return e},this.color_scaling_func=function(e){return e},this.update_data=!0,this.information_html_string="",this.information_overlay_age=0,this.information_overlay_alpha=0,this.information_overlay_timer=null,this.information_button_pos=null,this.information_button_size=null,this.optimization_hint_path="error"}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(RU_DataView,[{key:"setInformationFilePath",value:function(e){return this.optimization_hint_path=e,this}},{key:"showOptimizationHints",value:function(){console.log("Opening "+this.optimization_hint_path);var e=window.open(this.optimization_hint_path,"","width=800,height=600");return _datahelper_js__WEBPACK_IMPORTED_MODULE_2__.tV.assert("win valid",null!=e),this}},{key:"mouseInside",value:function(e){var t=this;_datahelper_js__WEBPACK_IMPORTED_MODULE_2__.tV.assert("pos valid",e),_datahelper_js__WEBPACK_IMPORTED_MODULE_2__.tV.assert("topleft valid",this.topleft),_datahelper_js__WEBPACK_IMPORTED_MODULE_2__.tV.assert("size valid",this.size);var n=e.minus(this.topleft.plus(new Pos(this.size.x/2,0))).dist();if(n<=30?(this.information_overlay_age=-1,window.clearTimeout(this.information_overlay_timer),this.information_overlay_timer=window.setTimeout((function(){return t.information_overlay_age=0}),3e3)):this.information_overlay_age=0,n<=10)this.information_overlay_alpha=1;else{var r=n/10;this.information_overlay_alpha=1/r}}},{key:"drawOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.information_overlay_age>=0&&(++this.information_overlay_age,this.information_overlay_age>1&&(this.information_overlay_alpha-=.05,this.information_overlay_alpha<0&&(this.information_overlay_alpha=0),this.information_overlay_age=0));var n=.9;n*=this.information_overlay_alpha;var r=1;r*=this.information_overlay_alpha;var i="ðŸ›ˆ",o=18;e.save(),e.beginPath(),e.textAlign="center",e.textBaseline="top",e.font=Math.round(o*t)+"px sans-serif";var a=e.measureText(i).width,s=a;e.fillStyle="rgba(128, 128, 128, "+n+")",e.strokeStyle="rgba(128, 128, 128, "+r+")",this.information_button_pos=new Pos(this.topleft.x+(this.size.x-a)*t/2-a,this.topleft.y),this.information_button_size=new Pos(3*a,1.1*s),e.rect(this.information_button_pos.x,this.information_button_pos.y,this.information_button_size.x,this.information_button_size.y),e.fill(),e.stroke(),e.beginPath(),n=3*this.information_overlay_alpha,e.fillStyle="rgba(0, 0, 255, "+n+")";var l=this.topleft.x+this.size.x*t/2;e.fillText(i,l,this.topleft.y),e.restore()}},{key:"getSettingsDict",value:function(){return{analysis_func:{type:"code",value:this.analyze.toString(),description:"#TODO"}}}},{key:"setSettingsDict",value:function setSettingsDict(dict){var func=eval(dict.analysis_func.value.toString());_datahelper_js__WEBPACK_IMPORTED_MODULE_2__.tV.assert("Object type function",func instanceof Function),this.setDataAnalysisFunction(func),this.update_data=!0}},{key:"setInformationHTMLString",value:function(e){return this.information_html_string=e,this}},{key:"getInformationHTMLString",value:function(){return this.information_html_string}},{key:"openSettingsWindow",value:function(){var e=this,t=new _windowing_js__WEBPACK_IMPORTED_MODULE_3__.a(window);t.setCallback((function(n){"ClientOpened"==n.type?t.reply(n.source,n.origin,{type:"settings-data",data:e.getSettingsDict()}):"save-settings"==n.type?(e.setSettingsDict(n.data),console.log("Applied new settings")):console.log("Undefined operation reached! "+JSON.stringify(n))})),t.open("DataViewSettings.html","_blank")||alert("Failed to open child window...")}},{key:"setTitle",value:function(e){return this}},{key:"draw",value:function(e,t,n){console.log("Abstract function called")}},{key:"getSendableObject",value:function(){return this}},{key:"fromSendableObject",value:function(e){return console.log("Abstract function fromSendableObject() called"),this}},{key:"setDataAnalysisFunction",value:function(e){return this.analyze=e,this}},{key:"setRect",value:function(e,t){return this.topleft=e,this.size=t,this}},{key:"drawRect",value:function(e){e.beginPath(),e.rect(this.topleft.x,this.topleft.y,this.size.x,this.size.y),e.stroke()}}]),RU_DataView}(),RU_DataViewText=function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(){return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),t.call(this)}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"fromSendableObject",value:function(e){return this}},{key:"draw",value:function(e,t,n){if(0!=n){e.save(),e.beginPath(),e.font=Math.round(n*t.data.fontsize).toString()+"px sans-serif",e.fillStyle=t.data.color,e.textAlign=t.data.align;var r=e.measureText("M").width;e.fillText(t.data.text,this.topleft.x+this.size.x/2,this.topleft.y+r),e.restore()}}}]),n}(RU_DataView),RU_DataViewBarGraph=function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n);var i="bar",o=void 0,a=void 0;(e=t.call(this)).dvbg_chart_data=null,null!=r&&(null!=r.type&&(i=r.type),null!=r.xAxes&&(o=r.xAxes),null!=r.yAxes&&(a=r.yAxes)),e.dvbg_canvas_scaler=document.createElement("div"),e.dvbg_canvas=document.createElement("canvas"),e.dvbg_ctx=e.dvbg_canvas.getContext("2d"),e.dvbg_canvas_scaler.appendChild(e.dvbg_canvas),document.body.appendChild(e.dvbg_canvas_scaler);var s={type:i,data:e.analyze(null),options:{responsive:!0,title:{display:!0,text:"Chart test..."},tooltips:{mode:"index",intersect:!0},scales:{}}};null!=o&&(s.options.scales.xAxes=o),null!=a&&(s.options.scales.yAxes=a),e.dvbg_chart=new Chart(e.dvbg_ctx,s),e.dvbg_canvas_scaler.style.visibility="hidden",e.dvbg_canvas_scaler.style.position="fixed";var l=(0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.Z)(e);return e.dvbg_clickable=new(function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(){return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),t.call(this)}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"is_inside",value:function(e){return null!=l.topleft&&l.topleft.x<e.x&&e.x<l.topleft.x+l.size.x&&l.topleft.y<e.y&&e.y<l.topleft.y+l.size.y}},{key:"onUpdateMove",value:function(e){if(!this.enable_func())return!1;if(!this.is_inside(e))return!1;var t=l.dvbg_canvas.getBoundingClientRect(),n=new MouseEvent("mousemove",{offsetX:e.x,offsetY:e.y,clientX:t.left+e.x-l.topleft.x,clientY:t.top+e.y-l.topleft.y});l.dvbg_canvas.dispatchEvent(n)}},{key:"onUpdateClick",value:function(e){if(!this.enable_func())return!1;if(!this.is_inside(e))return!1;var t=l.dvbg_canvas.getBoundingClientRect(),n=new MouseEvent("click",{offsetX:e.x,offsetY:e.y,clientX:t.left+e.x-l.topleft.x,clientY:t.top+e.y-l.topleft.y});l.dvbg_canvas.dispatchEvent(n)}}]),n}(Clickable)),e}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"getSettingsDict",value:function(){var e=(0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_8__.Z)((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(n.prototype),"getSettingsDict",this).call(this),t=this.dvbg_chart.options.scales.xAxes,r=this.dvbg_chart.options.scales.yAxes,i=t.some((function(e){return null==e||e.display})),o=r.some((function(e){return null==e||e.display})),a=this.dvbg_chart.options.legend.display;return e.graph_general_options={type:"group",value:{display_horizonal_axis:{type:"bool",value:i,description:"Display the horizontal axes"},display_vertical_axis:{type:"bool",value:o,description:"Display the vertical axes"},display_legend:{type:"bool",value:a,description:"Display the legend"}},description:"General graph display options"},e}},{key:"setSettingsDict",value:function(e){(0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_8__.Z)((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(n.prototype),"setSettingsDict",this).call(this,e);var t=e.graph_general_options.value,r=t.display_horizonal_axis.value,i=t.display_vertical_axis.value,o=t.display_legend.value;this.dvbg_chart.options.scales.xAxes.forEach((function(e){return e.display=r})),this.dvbg_chart.options.scales.yAxes.forEach((function(e){return e.display=i})),this.dvbg_chart.options.legend.display=o,this.dvbg_chart.update()}},{key:"getSendableObject",value:function(){var e={};return e.chartsettings=this.dvbg_chart.options,e.analyze=this.analyze.toString(),e}},{key:"fromSendableObject",value:function(e){return this.setDataAnalysisFunction(new Function(e.analyze)),this}},{key:"linkMouse",value:function(e){return e.addChild(this.dvbg_clickable),this}},{key:"changeGraphOptions",value:function(e){return e(this.dvbg_chart),this}},{key:"draw",value:function(e,t,n){if(0!=n){var r=this.prev_scale!=n;if(this.prev_scale=n,this.dvbg_canvas_scaler.style.height=Math.max(this.size.y*n,1)+"px",this.dvbg_canvas_scaler.style.width=Math.max(this.size.x*n,1)+"px",this.update_data){this.dvbg_chart_data=this.analyze(t);var i=JSON.parse(JSON.stringify(this.dvbg_chart_data));this.dvbg_chart.data=i,this.update_data=!1,this.dvbg_chart.update()}t==this.dvbg_cached_data||(this.dvbg_cached_data=t,this.dvbg_chart.update()),r&&this.dvbg_chart.resize(),e.save(),e.beginPath(),e.drawImage(this.dvbg_canvas,this.topleft.x,this.topleft.y,this.size.x,this.size.y),e.restore()}}}],[{key:"colorList",value:function(){var e=new Array;return e.push("rgba(255, 0, 0, 0.7)"),e.push("rgba(0, 128, 0, 0.7)"),e.push("rgba(0, 0, 255, 0.7)"),e.push("rgba(232, 173, 170, 0.7)"),e.push("rgba(0, 255, 255, 0.7)"),e.push("rgba(0, 0, 0, 0.7)"),e.push("rgba(16, 255, 255, 0.7)"),e.push("rgba(0, 255, 0, 0.7)"),e.push("rgba(255, 0, 255, 0.7)"),e.push("rgba(0, 0, 128, 0.7)"),e.push("rgba(128, 0, 128, 0.7)"),e.push("rgba(128, 128, 128, 0.7)"),e}}]),n}(RU_DataView),RU_DataViewNumberBlock=function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(){var e;return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),(e=t.call(this)).opt={display_title:!0,text_align:"center",draw_bar:void 0,padding:void 0},e.dvnb_cached_data=void 0,e}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"setTitle",value:function(e){return this.title=e,this}},{key:"setOptions",value:function(e){return this.opt=e,this}},{key:"setStringFormatter",value:function(e){this.stringformatter=e}},{key:"setColorScaling",value:function(e){return this.color_scaling_func=e,this}},{key:"draw",value:function(e,t,r){if(this.update_data&&(this.dvnb_cached_data=this.analyze(t),this.update_data=!1),0!=r){e.save(),e.beginPath(),e.textAlign="center",e.font=Math.round(16*r).toString()+"px sans-serif";var i=e.measureText("M").width,o=this.topleft.x+this.size.x/2,a=this.topleft.y+i;this.opt.display_title&&e.fillText(this.title,o,a);var s=this.dvnb_cached_data;e.beginPath(),e.textAlign=this.opt.text_align,e.font="bold "+(50*r).toString()+"px sans-serif",e.fillStyle=n.percent2color(this.color_scaling_func(s)),i=e.measureText("M").width,e.textBaseline="middle";var l=0;if(this.opt.padding&&this.opt.padding.left&&(l=this.opt.padding.left),"center"==this.opt.text_align?e.fillText(String(s)+"%",o+l,this.topleft.y+this.size.y/2):"left"==this.opt.text_align&&e.fillText(String(s)+"%",this.topleft.x+l,this.topleft.y+this.size.y/2),this.opt.draw_bar){var u,c=_createForOfIteratorHelper(this.opt.draw_bar);try{for(c.s();!(u=c.n()).done;)"left"==(o=u.value)?(e.beginPath(),e.strokeStyle="black",e.lineWidth=3,e.moveTo(this.topleft.x,this.topleft.y),e.lineTo(this.topleft.x,this.topleft.y+this.size.y*r),e.stroke()):console.log("#TODO: Implement this other DataViewNumberBlock bar: "+o)}catch(e){c.e(e)}finally{c.f()}}this.drawOverlay(e,r),e.restore()}}}],[{key:"percent2color",value:function(e){var t=2*Math.floor(2.55*e);return"#"+(e<=50?65280+65536*t:16711680+256*Math.round(255-t)).toString(16).padStart(6,"0")}}]),n}(RU_DataView),RU_DataViewSuggestedActionBlock=function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(){var e;(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),(e=t.call(this)).opt={};var r=(0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.Z)(e);return e.dvsa_clickable=new(function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(){return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),t.call(this)}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"is_inside",value:function(e){return null!=r.topleft&&r.topleft.x<e.x&&e.x<r.topleft.x+r.size.x&&r.topleft.y<e.y&&e.y<r.topleft.y+r.size.y}},{key:"getButtonIndex",value:function(e){var t=r.topleft.x,n=r.topleft.y,i=r.size.x,o=r.size.y,a=(r.heightpadding,e.x-t),s=e.y-n;if(a<0||a>i)return-1;if(s<0||s>o)return-1;var l=r.textheight+r.heightpadding;return Math.floor(s/l)}},{key:"onUpdateMove",value:function(e){if(!this.enable_func())return!1;if(!this.is_inside(e))return r.dvsa_button_hovered=-1,!1;var t=this.getButtonIndex(e);return r.buttonHovered(t),!0}},{key:"onUpdateClick",value:function(e){return!!this.enable_func()&&!!this.is_inside(e)}}]),n}(Clickable)),e.hints={},e.dvsab_cached_data=[],e.heightpadding=20,e}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"buttonHovered",value:function(e){this.dvsa_button_hovered=e}},{key:"setTitle",value:function(e){return this.title=e,this}},{key:"setHint",value:function(e,t){return this.hints[e]=t,this}},{key:"setOptions",value:function(e){return this.opt=e,this}},{key:"setStringFormatter",value:function(e){this.stringformatter=e}},{key:"linkMouse",value:function(e){return e.addChild(this.dvsa_clickable),this}},{key:"draw",value:function(e,t,n){if(this.update_data&&(this.dvsab_cached_data=this.analyze(t),_datahelper_js__WEBPACK_IMPORTED_MODULE_2__.tV.assert("Data evaluated to undefined",null!=this.dvsab_cached_data),this.update_data=!1),0!=n){e.save(),e.textAlign="center",e.textBaseline="middle",e.strokeStyle="black",e.lineWidth=3,e.font=Math.round(12*n).toString()+"px sans-serif";var r=e.measureText("M").width;this.textheight=r;var i,o=this.topleft.x+this.size.x/2,a=this.topleft.y+r,s=0,l=_createForOfIteratorHelper(this.dvsab_cached_data);try{for(l.s();!(i=l.n()).done;){var u=i.value,c=this.hints[u];e.beginPath(),s==this.dvsa_button_hovered?e.strokeStyle="red":e.strokeStyle="black",e.fillText(c,o,a),e.ellipse(o,a,this.size.x/2,(r+this.heightpadding/2)/2,0,0,2*Math.PI),e.stroke(),a+=(r+this.heightpadding)*n,++s}}catch(e){l.e(e)}finally{l.f()}this.drawOverlay(e,n),e.restore()}}}]),n}(RU_DataView),RU_DataViewFormLayout=function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(){return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),t.call(this)}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"draw",value:function(e,t,n){if(0!=n){e.save(),e.beginPath();var r=this.analyze(t),i=r.fontsize,o=r.rows,a=r.padding,s=Math.round(i*n);e.font=s+"px sans-serif",max_func(o.map((function(e){return e.title})),(function(t){return e.measureText(t+": ").width}));var l,u=e.measureText("M").width,c=(max_func(o.map((function(e){return e.val})),(function(t){return e.measureText(t).width})),0),_=_createForOfIteratorHelper(o);try{for(_.s();!(l=_.n()).done;){var d=l.value,f=d.title,h=d.value;e.beginPath(),e.textAlign="left",e.fillText(f,this.topleft.x+a.left*n,this.topleft.y+a.top+(c+1)*(u+10)),e.beginPath(),e.textAlign="right",e.fillText(h,this.topleft.x+(this.size.x-a.right)*n,this.topleft.y+a.top+(c+1)*(u+10)),c++}}catch(e){_.e(e)}finally{_.f()}e.restore()}}}]),n}(RU_DataView),Bracket=function(e){(0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=_createSuper(n);function n(e){var r;return(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,n),(r=t.call(this)).ctx=e,r.buttons=[],r.start=new Pos(0,0),r.end=new Pos(0,0),r.offset=0,r.startoffset=0,r.listeners=[],r.button_alpha=1,r.bracket_alpha=1,r}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(n,[{key:"hide",value:function(){this.button_alpha=0,this.bracket_alpha=0}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.button_alpha=e,this.bracket_alpha=e}},{key:"setupEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=(this.ctx.canvas,function(e){return e}),r=function(e){return e};null!=window.get_zoom&&(n=function(e){return e/window.get_zoom()},r=function(e){return e/window.get_zoom()}),null!=t&&(n=function(e){return t.mapPixelToCoordsX(e)},r=function(e){return t.mapPixelToCoordsY(e)});var i=function(t){e.onUpdateMove(new Pos(n(t.offsetX),r(t.offsetY)))},o=function(t){e.onUpdateClick(new Pos(n(t.offsetX),r(t.offsetY)),t.button)},a=function(t){e.onUpdateDoubleClick(new Pos(n(t.offsetX),r(t.offsetY)),t.button)};this.listeners.push(["mousemove",i]),this.listeners.push(["click",o]),this.listeners.push(["dblclick",a]);var s,l=this.ctx,u=_createForOfIteratorHelper(this.listeners);try{for(u.s();!(s=u.n()).done;){var c,_=s.value;(c=l.canvas).addEventListener.apply(c,(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__.Z)(_))}}catch(e){u.e(e)}finally{u.f()}}},{key:"destroy",value:function(){(0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_8__.Z)((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(n.prototype),"destroy",this).call(this);var e,t=_createForOfIteratorHelper(this.listeners);try{for(t.s();!(e=t.n()).done;){var r,i=e.value;(r=this.ctx.canvas).removeEventListener.apply(r,(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__.Z)(i))}}catch(e){t.e(e)}finally{t.f()}this.buttons=null,this.start=null,this.end=null,this.ctx=null}},{key:"drawEx",value:function(e,t,n,r,i,o){this.start=e,this.end=t,this.offset=n,this.startoffset=r,this.animate=i,this.updatefunc=o,this.draw()}},{key:"is_inside_buttons",value:function(e){if(0==this.button_alpha)return!1;var t,n=0,r=0,i=_createForOfIteratorHelper(this.buttons);try{for(i.s();!(t=i.n()).done;){var o=t.value;null==o?console.log("Undefined button!"):null==o.topleft&&console.log("Undefined topleft"),n=Math.max(o.topleft.x+o.size.x,n),r=Math.max(o.topleft.y+o.size.y,r)}}catch(e){i.e(e)}finally{i.f()}return!!e.inRect(this.start,new Pos(n,r))}},{key:"bracket_clicked",value:function(){0==this.button_alpha?this.button_alpha=1:this.button_alpha=0}},{key:"is_inside_bracket",value:function(e){return!(e.x<this.start.x+this.startoffset-5||e.x>this.start.x+this.offset+5||(e.y<this.start.y-5||e.y>this.end.y+5)&&(console.log("outside y"),1))}},{key:"is_inside",value:function(e){return this.is_inside_buttons(e)}},{key:"onUpdateClick",value:function(e,t){return this.is_inside_bracket(e,t)?(this.bracket_clicked(),!0):0!=this.button_alpha&&(0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_8__.Z)((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(n.prototype),"onUpdateClick",this).call(this,e,t)}},{key:"onUpdateDoubleClick",value:function(e,t){return this.is_inside_bracket(e,t)?(this.bracket_clicked(),!0):0!=this.button_alpha&&(0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_8__.Z)((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(n.prototype),"onUpdateDoubleClick",this).call(this,e,t)}},{key:"draw",value:function(){var e=this,t=this.start,n=this.end,r=this.offset,i=this.startoffset,o=this.ctx;this.animate&&null==this.updatefunc&&o.clearRect(0,0,o.canvas.width,o.canvas.height),o.save(),o.beginPath(),o.lineWidth=5,o.strokeStyle="rgba(0,0,255,"+this.bracket_alpha.toString()+")",o.moveTo(t.x+i,t.y),o.lineTo(t.x+r,t.y),o.stroke(),o.lineTo(t.x+r,n.y),o.stroke(),o.lineTo(n.x+i,n.y),o.stroke(),o.restore();var a=o.globalAlpha;if(o.globalAlpha=this.button_alpha,this.button_alpha>0&&this.drawButtons(new Pos(t.x+r+20,t.y)),o.globalAlpha=a,this.animate){var s=this;window.requestAnimationFrame((function(){null==e.updatefunc?s.draw():e.updatefunc()}))}}},{key:"drawButtons",value:function(e){var t=e.x,n=e.y;e=null;var r,i,o=0,a=_createForOfIteratorHelper(this.buttons);try{for(a.s();!(i=a.n()).done;){r=i.value;new Pos(t,n);var s,l=new Pos(t,n+o);"open"==r.button_subwindow_state&&(o-=35),s=l,r.draw(s,new Pos(30,30),this.ctx),t+=40}}catch(e){a.e(e)}finally{a.f()}}},{key:"addButton",value:function(e){this.buttons.push(e),this.addChild(e)}}]),n}(Clickable),_canvas_manager_counter=0,CanvasDrawManager=function(){function e(t,n){(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__.Z)(this,e),this.ctx=t,this.anim_id=null,this.drawables=[],this.ref_global_state=n,this.indices=[],this.request_scale=!1,this.scale_factor={x:1,y:1},this.last_scale_factor={x:1,y:1},this._destroying=!1,this.scale_origin={x:0,y:0},this.contention=0,this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.user_transform=this._svg.createSVGMatrix(),this.addCtxTransformTracking()}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(e,[{key:"svgPoint",value:function(e,t){var n=this._svg.createSVGPoint();return n.x=e,n.y=t,n}},{key:"applyUserTransform",value:function(){var e=this.user_transform;this.ctx.setTransform(e.a,e.b,e.c,e.d,e.e,e.f)}},{key:"translation",get:function(){return{x:this.user_transform.e,y:this.user_transform.f}}},{key:"addCtxTransformTracking",value:function(){var e=this,t=document.createElementNS("http://www.w3.org/2000/svg","svg");this.ctx._custom_transform_matrix=t.createSVGMatrix();var n=function(){console.assert(!isNaN(e.ctx._custom_transform_matrix.f))},r=this.ctx,i=r.scale;r.scale=function(e,t){return r._custom_transform_matrix=r._custom_transform_matrix.scaleNonUniform(e,t),n(),i.call(r,e,t)};var o=r.translate;r.translate=function(e,t){return r._custom_transform_matrix=r._custom_transform_matrix.translate(e,t),n(),o.call(r,e,t)};var a=r.rotate;r.rotate=function(e){return r._custom_transform_matrix=r._custom_transform_matrix.rotate(180*e/Math.PI),n(),a.call(r,e)};var s=r.scale;r.transform=function(e,i,o,a,l,u){var c=t.createSVGMatrix();return c.a=e,c.b=i,c.c=o,c.d=a,c.e=l,c.f=u,r._custom_transform_matrix=r._custom_transform_matrix.multiply(c),n(),s.call(r,e,i,o,a,l,u)};var l=r.setTransform;r.setTransform=function(e,t,i,o,a,s){return r._custom_transform_matrix.a=e,r._custom_transform_matrix.b=t,r._custom_transform_matrix.c=i,r._custom_transform_matrix.d=o,r._custom_transform_matrix.e=a,r._custom_transform_matrix.f=s,n(),l.call(r,e,t,i,o,a,s)},r.custom_inverseTransformMultiply=function(e,i){var o=t.createSVGPoint();return o.x=e,o.y=i,n(),o.matrixTransform(r._custom_transform_matrix.inverse())}}},{key:"destroy",value:function(){this._destroying=!0,this.clearDrawables()}},{key:"addDrawable",value:function(t){this.drawables.push(t),this.indices.push({c:e.counter(),d:t})}},{key:"removeDrawable",value:function(e){this.drawables=this.drawables.filter((function(t){return t!=e}))}},{key:"clearDrawables",value:function(){var e,t=_createForOfIteratorHelper(this.drawables);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(e){t.e(e)}finally{t.f()}this.drawables=[],this.indices=[]}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.request_scale||Math.abs(e)<1e-4||this.contention>0)console.log("Blocking potential race");else{this.contention++,this.request_scale=!0,this.scale_origin.x=t,this.scale_origin.y=n,this.scale_factor.x+=e,this.scale_factor.y+=e,this.scale_factor.x=Math.max(.001,this.scale_factor.x),this.scale_factor.y=Math.max(.001,this.scale_factor.y);var r=e<0?.9:1.1,i=this.svgPoint(this.scale_origin.x,this.scale_origin.y).matrixTransform(this.user_transform.inverse());this.user_transform=this.user_transform.translate(i.x,i.y),this.user_transform=this.user_transform.scale(r,r,1,0,0,0),this.user_transform=this.user_transform.translate(-i.x,-i.y),this.contention--}}},{key:"translate",value:function(e,t){this.user_transform=this.user_transform.translate(e/this.user_transform.a,t/this.user_transform.d)}},{key:"mapPixelToCoordsX",value:function(e){return this.svgPoint(e,0).matrixTransform(this.user_transform.inverse()).x}},{key:"mapPixelToCoordsY",value:function(e){return this.svgPoint(0,e).matrixTransform(this.user_transform.inverse()).y}},{key:"getScale",value:function(){return _datahelper_js__WEBPACK_IMPORTED_MODULE_2__.tV.assert("Uniform scale",this.scale_factor.x==this.scale_factor.y),this.noJitter(this.scale_factor.x)}},{key:"getLastScale",value:function(){return this.noJitter(this.last_scale_factor.x)}},{key:"noJitter",value:function(e){return e=parseFloat(e.toFixed(3)),Math.round(100*e)/100}},{key:"draw",value:function(){if(!(this._destroying||this.contention>0)){this.contention+=1;var e=this.ctx;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore(),this.request_scale&&1==this.contention?(this.mapPixelToCoordsX(this.scale_origin.x),this.mapPixelToCoordsY(this.scale_origin.y),this.applyUserTransform(),this.request_scale=!1):(this.mapPixelToCoordsX(this.scale_origin.x),this.mapPixelToCoordsY(this.scale_origin.y)),this.applyUserTransform(),this.ref_global_state.drawSDFG();var t,n=_createForOfIteratorHelper(this.drawables);try{for(n.s();!(t=n.n()).done;)t.value.draw()}catch(e){n.e(e)}finally{n.f()}this.contention-=1}}},{key:"draw_async",value:function(){var e=this;this.anim_id=window.requestAnimationFrame((function(){return e.draw()}))}}],[{key:"counter",value:function(){return _canvas_manager_counter++}}]),e}()},2238:(e,t,n)=>{"use strict";n.d(t,{a:()=>l});var r=n(6610),i=n(5991),o=n(1318);function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(){function e(t){var n=this;(0,r.Z)(this,e),this.parent=t,this.window=null,this.message_userdef=null,this._msg_func=function(e){return n.message(e)},this.parent.addEventListener("message",this._msg_func)}return(0,i.Z)(e,[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.window=parent.open(e,t,n+"width=800,height=600",r),this.window,this.window}},{key:"setCallback",value:function(e){this.message_userdef=e}},{key:"passMessage",value:function(e){return this.window.postMessage(e,"*")}},{key:"reply",value:function(e,t,n){return e!=this.window&&null!=this.window&&console.log("We do not talk to strangers"),this.passMessage(n)}},{key:"setSenderData",value:function(e){this.window_data=e}},{key:"destroy",value:function(){this.parent.removeEventListener("message",this._msg_func)}},{key:"serialize_dataview",value:function(e){return e.getSendableObject()}},{key:"serialize_array",value:function(e){var t,n=[],r=a(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(this.serialize(i))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"serialize_function",value:function(e){return e.toString()}},{key:"serialize_default",value:function(e){if(null==e)return"";var t,n={},r=a(o.tV.listKeys(e));try{for(r.s();!(t=r.n()).done;){var i=t.value,s=e[i];n[i]=this.serialize(s)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"serialize",value:function(e){return e instanceof RU_DataView?this.serialize_dataview(e):e instanceof Array?this.serialize_array(e):e instanceof Object?this.serialize_default(e):"function"==typeof e?this.serialize_function(e):e}},{key:"message",value:function(e){var t=e.data;if(e.source==this.window)if("ClientOpened"==t.type)if(null==this.message_userdef){var n={type:"DisplayData",data:this.window_data};this.reply(e.source,e.origin,n)}else this.message_userdef(t);else"close"==t.type?(console.log("Parent received close message"),this.window.close(),this.destroy()):null!=this.message_userdef?this.message_userdef(t):console.log("Unknown type "+JSON.stringify(t))}}]),e}()},1154:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>DIODE});var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(484),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8927),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6156),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6610),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5991),_main__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8821),_diode_appearance__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(816),_utils_sdfg_sdfg_parser__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(728),_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9018),_table__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(982),_diode_settings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5490),_diode_project__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2992);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=globalThis.$,DIODE=function(){function DIODE(){(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.Z)(this,DIODE),this._settings=new _diode_settings__WEBPACK_IMPORTED_MODULE_3__.y,this._debouncing={},this._background_projects=[],this._current_project=null,this._stale_data_button=null,this._shortcut_functions={},this._creation_counter=0,this._client_id=localStorage.getItem("diode_client_id"),null==this._client_id&&(this._client_id=this.getPseudorandom(),localStorage.setItem("diode_client_id",this._client_id)),this._appearance=new _diode_appearance__WEBPACK_IMPORTED_MODULE_4__.u(localStorage.getItem("DIODE/Appearance")),this._appearance.setOnChange((function(e){localStorage.setItem("DIODE/Appearance",JSON.stringify(e.toStorable()))}))}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__.Z)(DIODE,[{key:"setupEvents",value:function(){var e=this;this.goldenlayout.eventHub.on(this.project().eventString("-req-show_stale_data_button"),(function(t){e.__impl_showStaleDataButton()})),this.goldenlayout.eventHub.on(this.project().eventString("-req-remove_stale_data_button"),(function(t){e.__impl_removeStaleDataButton()})),this.goldenlayout.eventHub.on(this.project().eventString("-req-show_loading"),(function(t){e.__impl_showIndeterminateLoading()})),this.goldenlayout.eventHub.on(this.project().eventString("-req-hide_loading"),(function(t){e.__impl_hideIndeterminateLoading()})),window.addEventListener("contextmenu",(function(t){console.log("contextmenu requested on",t.target),e.hint(t)}))}},{key:"getRunConfigs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=localStorage.getItem("diode_run_configs");if(t=null!=t?JSON.parse(t):[{"Configuration name":"default",Host:"localhost","Use SSH":!0,"SSH Key":this.pubSSH(),"SSH Key override":"",Instrumentation:"off","Number of threads":"[0]"}],null!=e){var n=t.filter((function(t){return t["Configuration name"]==e}));if(0!=n.length)return n[0];console.error("Could not find a configuration with that name",e)}return t}},{key:"addToRunConfigs",value:function(e){delete e["SSH Key"];var t,n=this.getRunConfigs(),r=0,i=_createForOfIteratorHelper(n);try{for(i.s();!(t=i.n()).done;){if(t.value["Configuration name"]==e["Configuration name"]){n[r]=e;break}++r}}catch(e){i.e(e)}finally{i.f()}r>=n.length&&n.push(e),n.sort((function(e,t){return e["Configuration name"].localeCompare(t["Configuration name"])})),localStorage.setItem("diode_run_configs",JSON.stringify(n))}},{key:"setCurrentRunConfig",value:function(e){sessionStorage.setItem("diode_current_run_config",e)}},{key:"getCurrentRunConfigName",value:function(){var e=sessionStorage.getItem("diode_current_run_config");return null==e?"default":e}},{key:"getCurrentRunConfig",value:function(){return this.getRunConfigs(this.getCurrentRunConfigName())}},{key:"applyCurrentRunConfig",value:function(){var e=this,t=this.getCurrentRunConfig(),n={};if(n=_objectSpread(_objectSpread({},n),{"execution/general/host":t.Host}),t["Use SSH"]){var r=/\S/.test(t["SSH Key override"])?" -i "+t["SSH Key override"]+" ":" ";n=_objectSpread(_objectSpread({},n),{"execution/general/execcmd":"ssh -oBatchMode=yes"+r+"${host} ${command}","execution/general/copycmd_r2l":"scp -B"+r+" ${host}:${srcfile} ${dstfile}","execution/general/copycmd_l2r":"scp -B"+r+" ${srcfile} ${host}:${dstfile}"})}else n=_objectSpread(_objectSpread({},n),{"execution/general/execcmd":"${command}","execution/general/copycmd_r2l":"cp ${srcfile} ${dstfile}","execution/general/copycmd_l2r":"cp ${srcfile} ${dstfile}"});return new Promise((function(r,i){var o=_objectSpread({client_id:e.getClientID()},n);(0,_main__WEBPACK_IMPORTED_MODULE_1__.LS)("/dace/api/v1.0/preferences/set",o,(function(e){4===e.readyState&&200===e.status?r(t):0===e.status||(e.status+"_").startsWith("2")||i()}))}))}},{key:"pubSSH",value:function(){var e=localStorage.getItem("diode_pubSSH");if(null!=e)return e;(0,_main__WEBPACK_IMPORTED_MODULE_1__.LS)("/dace/api/v1.0/getPubSSH/",void 0,(function(e){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.response);if(null==t.error){var n=t.pubkey;localStorage.setItem("diode_pubSSH",n)}else alert(t.error)}}),"GET")}},{key:"hint",value:function(e){var t=function(e,t){var n=JSON.parse(e);$(t).w2overlay("<div><h2>Help for category "+n.type+"</h2>"+n.name+"</div>")},n=e.target,r=n.getAttribute("data-hint");if(null!=r)t(r,n),e.stopPropagation(),e.preventDefault(),console.log("Got hint data",r);else{if(!e.composed)return;var i,o=_createForOfIteratorHelper(e.composedPath());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(null!=(r=null!=a.getAttribute?a.getAttribute("data-hint"):null)){t(r,a),e.stopPropagation(),e.preventDefault();break}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"openUploader",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";w2popup.open({title:"Upload a code file",body:'\n<div class="w2ui-centered upload_flexbox">\n    <label for="file-select" style="flex-grow: 1">\n        <div class="diode_uploader" id=\'upload_box\'>\n            <div class="uploader_text">\n                Drop file here or click to select a file\n            </div>\n        </div>\n    </label>\n    <input id="file-select" type="file"  accept=".py,.m,.sdfg" style="position:absolute;"/>\n</div>\n',buttons:"",showMax:!0});var n=$("#upload_box");if(0==n.length)throw"Error: Element not available";n=n[0];var r=function(n){"code-python"==t&&e.newFile(n)};(0,_main__WEBPACK_IMPORTED_MODULE_1__.Wj)(n,(function(e,t){console.log("upload mime",e),r(t),w2popup.close()}),null,{readMode:"text"});var i=$("#file-select");if(0==i.length)throw"Error: Element not available";(i=i[0]).style.opacity=0,i.addEventListener("change",(function(e){var t=i.files[0],n=new FileReader;n.onload=function(e){r(e.target.result),w2popup.close()},n.readAsText(t)}))}},{key:"getClientID",value:function(){return this._client_id}},{key:"initEnums",value:function(){this.getEnum("ScheduleType"),this.getEnum("StorageType"),this.getEnum("AccessType"),this.getEnum("Language")}},{key:"closeAll",value:function(){this.goldenlayout.root&&(this.goldenlayout.root.getItemsByFilter((function(e){return"component"==e.config.type})).forEach((function(e){return e.close()})),this.project().clearClosedWindowsList())}},{key:"addContentItem",value:function(e){if(e.componentName){var t=this.project()._closed_windows;this.project().setClosedWindowsList(t.filter((function(t){return t[0]!=e.componentName})))}var n=this.goldenlayout.root;if(n)if(0===n.contentItems.length)n.addChild({type:"row",content:[]}),this.addContentItem(e);else if(this.goldenlayout.isSubWindow)this.goldenlayout.eventHub.emit("create-window-in-main",JSON.stringify(e));else{var r,i=_createForOfIteratorHelper(n.contentItems);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("stack"!=o.config.type)return void o.addChild(e)}}catch(e){i.e(e)}finally{i.f()}var a=n.contentItems[0].contentItems.map((function(e){return e.config}));n.contentItems[0].remove();var s,l=_createForOfIteratorHelper(a);try{for(l.s();!(s=l.n()).done;){var u=s.value;this.addContentItem(u)}}catch(e){l.e(e)}finally{l.f()}this.addContentItem(e)}}},{key:"newFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.closeAll(),this.createNewProject();var t=this.getPseudorandom();"{"==e[0]&&1==e.split("\n").length&&(e=JSON.stringify(JSON.parse(e),null,2));var n={title:"Source Code",type:"component",componentName:"CodeInComponent",componentState:{created:t,code_content:e}};this.addContentItem(n),this.gatherProjectElementsAndCompile(this,{},{sdfg_over_code:!0})}},{key:"open_diode_settings",value:function(){var e={title:"Settings",type:"component",componentName:"SettingsComponent",componentState:{created:this.getPseudorandom()}};this.addContentItem(e)}},{key:"open_runqueue",value:function(){var e={title:"Run Queue",type:"component",componentName:"RunqueueComponent",componentState:{created:this.getPseudorandom()}};this.addContentItem(e)}},{key:"getEnum",value:function(e){var t=localStorage.getItem("Enumeration:"+e);return null==t||null==t?((0,_main__WEBPACK_IMPORTED_MODULE_1__.LS)("/dace/api/v1.0/getEnum/"+e,void 0,(function(t){if(4===t.readyState&&200===t.status){console.log(e,t.response);var n=JSON.parse(t.response);"Language"==e&&n.enum.push("NoCode"),localStorage.setItem("Enumeration:"+e,JSON.stringify(n))}}),"GET"),null):JSON.parse(t).enum}},{key:"renderProperties",value:function(e,t,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;if(null!=n){if(!Array.isArray(n)){var a=n,s=Object.keys(n).filter((function(e){return!e.startsWith("_meta_")})),l=(s=s.filter((function(e){return Object.keys(n).includes("_meta_"+e)}))).map((function(e){var r=JSON.parse(JSON.stringify(n["_meta_"+e]));return r.name=e,r.value=n[e],{property:r,category:r.category,element:a,data:t.data}}));n=l}if("string"==typeof e){var u=e;e={propertyChanged:function(e,t,n){i.project().request(["property-changed-"+u],(function(e){}),{timeout:200,params:{element:e,name:t,value:n,type:o?o.type:o}}),o&&"transformation"===o.type||i.refreshSDFG()},applyTransformation:function(){i.project().request(["apply-adv-transformation-"+u],(function(e){}),{timeout:200,params:null==o?void 0:o.apply_params})},locateTransformation:function(e,t,n){i.project().request(["locate-transformation-"+o.sdfg_name],(function(e){}),{timeout:200,params:JSON.stringify([e,t,n])})},project:function(){return i.project()}}}var c,_=new _table__WEBPACK_IMPORTED_MODULE_6__.i,d=_,f=null,h={},p=_createForOfIteratorHelper(n);try{for(p.s();!(c=p.n()).done;){var v=c.value,m=v.category;null==h[m]&&(h[m]=[]),h[m].push(v)}}catch(e){p.e(e)}finally{p.f()}DIODE.debugDevMode()||delete h["(Debug)"];for(var y=0,g=Object.entries(h);y<g.length;y++){var b=g[y],w=b[0],E=b[1].sort((function(e,t){return e.property.name.localeCompare(t.property.name)}));d=_;var k=document.createElement("span");k.innerText=w;var S=d.addRow(k);S.childNodes[0].colSpan="2",f=new _table__WEBPACK_IMPORTED_MODULE_6__.F(d,S);var C,x=_createForOfIteratorHelper(E);try{for(x.s();!(C=x.n()).done;){var O=C.value,D=document.createElement("span"),P=O.property;D.innerText=P.name,D.title=P.desc;var T=diode.getMatchingInput(e,P,O),I=d.addRow(D,T);null!=f&&f.addContentRow(I)}}catch(e){x.e(e)}finally{x.f()}}if(_.setCSSClass("diode_property_table"),o&&"transformation"==o.type){var A=document.createElement("span");A.classList="",A.innerText=o.opt_name,r.appendChild(A);var M=document.createElement("span");M.innerText="location_on",M.classList="material-icons",M.style="cursor: pointer;",M.addEventListener("click",(function(){e.locateTransformation(o.opt_name,o.pos,o.apply_params[0].affects)})),r.appendChild(M)}if(_.createIn(r),o&&"transformation"==o.type){var j=document.createElement("button");j.innerText="Apply advanced transformation",j.addEventListener("click",(function(e){j.disabled=!0,i.project().request(["apply-adv-transformation-"+o.sdfg_name],(function(e){}),{params:JSON.stringify(o.apply_params)})})),r.appendChild(j)}}else console.warn("renderProperties as nothing to render")}},{key:"create_visual_access_representation",value:function create_visual_access_representation(elems,data){var __access_indices=elems[0],__ranges=elems[1],__user_input=elems[2],__additional_defines={Min:"(...x) => Math.min(...x)",int_ceil:"(a,b) => Math.ceil(a/b)"},_iterator7=_createForOfIteratorHelper(__user_input),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var x=_step7.value,_r=window.prompt("Enter a value for symbol "+x);if(null==_r)break;__additional_defines[x]=_r}}catch(e){_iterator7.e(e)}finally{_iterator7.f()}console.log("data",data),"Array"!=data.type&&console.warn("Non-Array accessed",data);var __mem_dims=data.attributes.shape;console.assert(null!=__mem_dims);var __eval_func=function __eval_func(){var __defs=Object.keys(__additional_defines).map((function(e){return"let "+e+" = "+__additional_defines[e]})).join(";")+";";__mem_dims=__mem_dims.map((function(x){return eval(__defs+x)}))};__eval_func();var __tbl_container=document.createElement("div"),__tbl_hor=document.createElement("div");__tbl_hor.classList="flex_row",__tbl_hor.style="flex-wrap: nowrap; justify-content: flex-start;";var __axis_x_info=document.createElement("div");__axis_x_info.classList="flex_row",__axis_x_info.style="justify-content: space-between;";for(var __i=0;__i<2;++__i){var __tmp=document.createElement("div");try{__tmp.innerText=0==__i?"0":__mem_dims[1]}catch(e){__tmp.innerText=0==__i?"Start":"End"}__axis_x_info.appendChild(__tmp)}var __axis_y_info=document.createElement("div");__axis_y_info.classList="flex_column",__axis_y_info.style="justify-content: space-between;";for(var _i2=0;_i2<2;++_i2){var _tmp=document.createElement("div");try{_tmp.innerText=0==_i2?"0":__mem_dims[0]}catch(e){_tmp.innerText=0==_i2?"Start":"End"}__axis_y_info.appendChild(_tmp)}var __tbl_vert=document.createElement("div");__tbl_vert.classList="flex_col",null!=data&&(__tbl_vert.appendChild(__axis_x_info),__tbl_hor.appendChild(__axis_y_info));var __size=10;__mem_dims.some((function(e){return e>128}))&&(__size=5),__mem_dims.length<2&&__mem_dims.push(1),console.log("access indices",__access_indices),console.log("ranges",__ranges);var __fixed_rngs=__ranges.map((function(e){return e})).sort((function(e,t){return e.depth-t.depth})).slice(1).reverse(),__var_rng=__ranges[0],__rng_inputs=[],__create_func=function(){return null},__main=function(e){return null!=e.main?e.main:e};return function(){var input_cont=document.createElement("div"),__defs=Object.keys(__additional_defines).map((function(e){return"let "+e+" = "+__additional_defines[e]})).join(";")+";",__global_slider=document.createElement("input");__global_slider.type="range",__global_slider.min="0",__global_slider.value="0",__global_slider.step="1",input_cont.appendChild(__global_slider);var __total_rng_count=1,__locked_range=!1;input_cont.classList="flex_column";var _iterator8=_createForOfIteratorHelper(__fixed_rngs),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var __r=_step8.value,_lbl2=document.createElement("label"),_in2=document.createElement("input");_in2.type="number",_in2.min="0",_in2.step="1",_in2.addEventListener("change",(function(e){var t,n=0,r=1,i=_createForOfIteratorHelper(__rng_inputs.map((function(e){return e})).reverse());try{for(i.s();!(t=i.n()).done;){var o=t.value,a=parseInt(o.max)-parseInt(o.min)+1,s=o.value;n+=parseInt(s)*r,r*=parseInt(a)}}catch(e){i.e(e)}finally{i.f()}__global_slider.value=n,__create_func()}));try{_in2.min=eval(__defs+__main(__r.val.start))}catch(e){console.warn("Got error when resolving expression")}try{_in2.max=eval(__defs+__main(__r.val.end))}catch(e){console.warn("Got error when resolving expression")}try{_in2.value=eval(__defs+__main(__r.val.start))}catch(e){console.warn("Got error when resolving expression")}__defs+="let "+__r.var+" = "+__main(__r.val.start)+";",_lbl2.innerText="Range iterator "+__r.var+" over ["+__main(__r.val.start)+", "+__main(__r.val.end)+"] in steps of "+__main(__r.val.step),_in2.setAttribute("data-rname",__r.var),_lbl2.appendChild(_in2),__rng_inputs.push(_in2),input_cont.appendChild(_lbl2),0==__total_rng_count&&(__total_rng_count=1);var __e_size=function(__x){return eval(__defs+"("+__main(__x.val.end)+" - "+__main(__x.val.start)+"+1) / "+__main(__x.val.step))}(__r);0==__e_size||__locked_range?__locked_range=!0:__total_rng_count*=__e_size}}catch(e){_iterator8.e(e)}finally{_iterator8.f()}console.log("__total_rng_count",__total_rng_count),__global_slider.max=__total_rng_count-1,__global_slider.addEventListener("input",(function(e){var t,n=parseInt(__global_slider.value),r=_createForOfIteratorHelper(__rng_inputs.map((function(e){return e})).reverse());try{for(r.s();!(t=r.n()).done;){var i=t.value,o=parseInt(i.max)-parseInt(i.min)+1,a=n%o;i.value=a,n=Math.floor(n/o)}}catch(e){r.e(e)}finally{r.f()}}));var r=__var_rng,_lbl=document.createElement("label"),_in=document.createElement("span");__global_slider.addEventListener("input",(function(e){__create_func()})),_in.innerText="(whole range)",_lbl.innerText="Range iterator "+r.var+" over ["+__main(r.val.start)+", "+__main(r.val.end)+"] in steps of "+__main(r.val.step),_lbl.appendChild(_in),input_cont.appendChild(_lbl),__tbl_container.appendChild(input_cont)}(),__create_func=function __create_func(){__tbl_vert.innerHTML="",__tbl_vert.appendChild(__axis_x_info);var __all_fixed={};Object.assign(__all_fixed,__additional_defines);var _iterator11=_createForOfIteratorHelper(__rng_inputs),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var i=_step11.value,rname=i.getAttribute("data-rname"),val=i.value;__all_fixed[rname]=val}}catch(e){_iterator11.e(e)}finally{_iterator11.f()}var __defstring=Object.keys(__all_fixed).map((function(e){return"let "+e+" = "+__all_fixed[e]+";"})).join(""),__ellision_thresh_y=64,__ellision_thresh_x=128,__mark_cells={};(function(){for(var feval=function feval(x){return eval(__defstring+x)},__it=__var_rng.var,__r_s=__main(__var_rng.val.start),__r_e=__main(__var_rng.val.end),__r_step=__main(__var_rng.val.step),_loop=function(e){var t=__access_indices.map((function(e,t){return[e,t]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}));t=t.map((function(t){return feval("let "+__it+" = "+e+";"+t.var)})),null==__mark_cells[t[1]]&&(__mark_cells[t[1]]=[]),__mark_cells[t[1]].push(t[0])},__x=feval(__r_s);__x<=feval(__r_e);__x+=feval(__r_step))_loop(__x)})();for(var __dim_2=0;__dim_2<__mem_dims[0];++__dim_2)if(__mem_dims[0]>__ellision_thresh_y&&__dim_2>__ellision_thresh_y/2&&__dim_2<__mem_dims[0]-__ellision_thresh_y/2){if(__dim_2-1==__ellision_thresh_y/2){var _row=document.createElement("div");_row.classList="flex_row",_row.style="justify-content: flex-start;flex-wrap: nowrap;",_row.innerText="...",__tbl_vert.appendChild(_row)}}else{var __row=document.createElement("div");__row.classList="flex_row",__row.style="justify-content: flex-start;flex-wrap: nowrap;";for(var _i3=0;_i3<__mem_dims[1];++_i3)if(__mem_dims[1]>__ellision_thresh_x&&_i3>__ellision_thresh_x/2&&_i3<__mem_dims[1]-__ellision_thresh_x/2){if(_i3-1==__ellision_thresh_x/2){var _cell=document.createElement("div");_cell.style="line-height: 1px;",_cell.innerText="...",__row.appendChild(_cell)}}else{var __set_marking=!1,_tmp2=__mark_cells[__dim_2];null!=_tmp2&&_tmp2.includes(_i3)&&(__set_marking=!0);var __cell=document.createElement("div"),__colorstr="background: white;";__set_marking&&(__colorstr="background: red;"),__cell.style="min-width: "+__size+"px; min-height: "+__size+"px;border: 1px solid darkgray;"+__colorstr,__row.appendChild(__cell)}__tbl_vert.appendChild(__row)}__tbl_hor.appendChild(__tbl_vert)},__tbl_container.appendChild(__tbl_hor),__create_func(),__tbl_container}},{key:"create_visual_range_representation",value:function create_visual_range_representation(__starts,__ends,__steps,__tiles){var __mayfail=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],__data=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,__obj_to_arr=function(e){return e instanceof Array?e:[e]};__starts=__obj_to_arr(__starts),__ends=__obj_to_arr(__ends),__steps=__obj_to_arr(__steps),__tiles=__obj_to_arr(__tiles);for(var __symbols={},__e_starts=[],__e_ends=[],__e_steps=[],__e_tiles=[],__e_sizes=[],__r_it=0;__r_it<__starts.length;++__r_it){for(var __start=__starts[__r_it],__end=__ends[__r_it],__step=__steps[__r_it],__tile=__tiles[__r_it],__e_start=null,__e_end=null,_e_step=null,_e_tile=null,_mem_dims=[];;){var __failed=!1,__symbol_setter=Object.entries(__symbols).map((function(e){return"let "+e[0]+"="+e[1]+";"})).join("");try{var Min=function(){return Math.min.apply(Math,arguments)},int_ceil=function(e,t){return Math.ceil(e/t)};if(__e_start=eval(__symbol_setter+__start),__e_end=eval(__symbol_setter+__end)+1,_e_step=eval(__symbol_setter+__step),_e_tile=eval(__symbol_setter+__tile),null!=__data){var __shapedims=__data.attributes.shape.length;_mem_dims=[];for(var __s=0;__s<__shapedims;++__s)_mem_dims.push(eval(__symbol_setter+__data.attributes.shape[__s]))}}catch(e){if(!(e instanceof ReferenceError))throw e;if(__mayfail){__failed=!0;break}var __sym_name=e.message.split(" ")[0],__ret=window.prompt("Enter a value for Symbol `"+__sym_name+"`");if(null==__ret)throw e;__symbols[__sym_name]=parseInt(__ret),__failed=!0}if(!__failed)break}var _e_size=__e_end-__e_start;__e_starts.push(__e_start),__e_ends.push(__e_end),__e_steps.push(_e_step),__e_tiles.push(_e_tile),__e_sizes.push(_e_size)}var __tbl_container=document.createElement("div"),__tbl_hor=document.createElement("div");__tbl_hor.classList="flex_row",__tbl_hor.style="flex-wrap: nowrap;";var __axis_x_info=document.createElement("div");__axis_x_info.classList="flex_row",__axis_x_info.style="justify-content: space-between;";for(var __i=0;__i<2;++__i){var __tmp=document.createElement("div");try{__tmp.innerText=0==__i?"0":__mem_dims[1]}catch(e){__tmp.innerText=0==__i?"Start":"End"}__axis_x_info.appendChild(__tmp)}var __axis_y_info=document.createElement("div");__axis_y_info.classList="flex_column",__axis_y_info.style="justify-content: space-between;";for(var _i4=0;_i4<2;++_i4){var _tmp3=document.createElement("div");try{_tmp3.innerText=0==_i4?"0":__mem_dims[0]}catch(e){_tmp3.innerText=0==_i4?"Start":"End"}__axis_y_info.appendChild(_tmp3)}null!=__data&&(__tbl_container.appendChild(__axis_x_info),__tbl_hor.appendChild(__axis_y_info));var __row=document.createElement("div");__row.classList="flex_row",__row.style="justify-content: flex-start;flex-wrap: nowrap;";var __size=10,__e_size=__e_sizes[0],__e_step=__e_steps[0],__e_tile=__e_tiles[0];__e_size>512&&(__size=5);for(var _i5=0;_i5<__e_size;++_i5){var __cell=document.createElement("div"),__colorstr="background: white;";Math.floor(_i5/__e_step)%2==0?_i5%__e_step<__e_tile&&(__colorstr="background: SpringGreen;"):_i5%__e_step<__e_tile&&(__colorstr="background: Darkorange;"),__cell.style="min-width: "+__size+"px; min-height: "+__size+"px;border: 1px solid black;"+__colorstr,__row.appendChild(__cell)}return __tbl_hor.appendChild(__row),__tbl_container.appendChild(__tbl_hor),__tbl_container}},{key:"getMatchingInput",value:function getMatchingInput(transthis,x,node){var _this5=this,create_language_input=function(e,t){null==e&&(e=x.value),null==t&&(t=function(e){transthis.propertyChanged(node,x.name,e.value)});var n=_this5.getEnum("Language"),r=e;return n.includes(r)||(r="Language."+r),_main__WEBPACK_IMPORTED_MODULE_1__.qu.createSelectInput("prop_"+x.name,t,n,r)},__resolve_initials=function __resolve_initials(__initials,__syms){delete window.i,__initials=__initials.filter((function(e){return isNaN(e.var)}));for(var __merger=function(e,t){var n,r=e.map((function(e){return e})),i=_createForOfIteratorHelper(t);try{var o=function(){var e=n.value;if(r.filter((function(t){return t==e||null!=t.var&&JSON.stringify(t.var)==JSON.stringify(e.var)})).length>0)return"continue";r.push(e)};for(i.s();!(n=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}return r},__needed_defs=[],__placeholder_defines=[],__user_input_needed=[];;){var __retry=!1,__placeholder_def_str=__placeholder_defines.map((function(e){return"let "+e+" = 1"})).join(";");__placeholder_def_str+=";let Min = (...e) => Math.min(...e); let int_ceil = (a, b) => Math.ceil(a/b);";var _iterator13=_createForOfIteratorHelper(__initials),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var __i=_step13.value;try{var __test=eval(__placeholder_def_str+__i.var)}catch(e){if(!(e instanceof ReferenceError))throw e;var _ret2=function(){var t=e.message.split(" ")[0],n=__syms.filter((function(e){return e.var==t&&null!=e.val}));if(n.length>0){__placeholder_defines.push(t),__needed_defs=__merger(__needed_defs,[n[0]]);for(var r=0;r<__syms.length&&JSON.stringify(__syms[r])!=JSON.stringify(n[0]);++r);var i=function(e){return null!=e.main?e.main:e};if(null!=n[0].val&&null!=n[0].val.start){var o=__resolve_initials([{var:i(n[0].val.start),val:null}],__syms.slice(r));__needed_defs=__merger(__needed_defs,o[1]),__user_input_needed=__merger(__user_input_needed,o[2]),o=__resolve_initials([{var:i(n[0].val.end),val:null}],__syms.slice(r)),__needed_defs=__merger(__needed_defs,o[1]),__user_input_needed=__merger(__user_input_needed,o[2]),o=__resolve_initials([{var:i(n[0].val.step),val:null}],__syms.slice(r)),__needed_defs=__merger(__needed_defs,o[1]),__user_input_needed=__merger(__user_input_needed,o[2]),o=__resolve_initials([{var:i(n[0].val.tile),val:null}],__syms.slice(r)),__needed_defs=__merger(__needed_defs,o[1]),__user_input_needed=__merger(__user_input_needed,o[2])}else{var a=__resolve_initials([{var:i(n[0].val),val:null}],__syms.slice(r));console.log("rec",a),__needed_defs=__merger(__needed_defs,a[1]),__user_input_needed=__merger(__user_input_needed,a[2])}}else __user_input_needed.push(t),__placeholder_defines.push(t);return __retry=!0,"break"}();if("break"===_ret2)break}if(__retry)break}}catch(e){_iterator13.e(e)}finally{_iterator13.f()}if(!__retry)break}return[__initials,__needed_defs,__user_input_needed]},create_index_subset_input=function(e,t,n){var r=document.createElement("div");if(void 0===n.data)return $(r);var i,o="[",a=_createForOfIteratorHelper(t.value.indices);try{for(a.s();!(i=a.n()).done;)o+=i.value+", "}catch(e){a.e(e)}finally{a.f()}o=o.slice(0,-2)+"]",r.innerText=o+"  ";var s=document.createElement("button");return s.style.float="right",s.innerText="Edit",r.appendChild(s),s.addEventListener("click",(function(r){_this5.project().request(["sdfg_object"],(function(r){for(var i=r.sdfg_object,o=[],a=0,s=Object.values(i);a<s.length;a++){var l=s[a],u=_utils_sdfg_sdfg_parser__WEBPACK_IMPORTED_MODULE_7__.E8.lookup_symbols(l,n.state_id,n.node_id,null);o=[].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__.Z)(o),(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__.Z)(u)),console.log("syms",o)}var c,_=[],d=_createForOfIteratorHelper(o);try{for(d.s();!(c=d.n()).done;){var f=c.value;if(null!=f.val)break;_.push(f)}}catch(e){d.e(e)}finally{d.f()}var h=__resolve_initials(_,o);console.log("newelems",h);for(var p=n.data().props.filter((function(e){return"data"==e.name}))[0],v=[],m=0,y=Object.values(i);m<y.length;m++){var g=y[m];v.push(g.attributes._arrays[p.value])}(v=v.filter((function(e){return null!=e}))).length>0&&(p=v[0]);var b=document.createElement("div"),w=document.createElement("div"),E=document.createElement("input");E.type="text",E.value=JSON.stringify(t.value);var k=_this5.create_visual_access_representation(h,p),S=document.createElement("button");S.innerText="Apply changes",S.addEventListener("click",(function(r){e.propertyChanged(n,t.name,JSON.parse(E.value)),w2popup.close()})),w.appendChild(E),w.appendChild(k),b.appendChild(w),w2popup.open({title:"Data access / Indices property",body:b,buttons:S,width:1280,height:800})}),{})})),$(r)},create_range_input=function(e,t,n){var r=null;if(null!=n.data){var i=n.data().props.filter((function(e){return"data"==e.name}));i.length>0&&(r=i[0])}var o,a=document.createElement("div"),s=t.value.ranges,l=document.createElement("div"),u="[",c=_createForOfIteratorHelper(s);try{for(c.s();!(o=c.n()).done;){var _=o.value;u+=_.start+".."+_.end,1!=_.step?(u+=":"+_.step,1!=_.tile&&(u+=":"+_.tile)):1!=_.tile&&(u+="::"+_.tile),u+=", "}}catch(e){c.e(e)}finally{c.f()}u=u.slice(0,-2)+"]",a.innerText=u+"  ";var d=document.createElement("button");d.style.float="right",d.innerText="Edit",a.appendChild(d);var f,h=document.createElement("div"),p=[],v=_createForOfIteratorHelper(s);try{for(v.s();!(f=v.n()).done;){var m=f.value,y=document.createElement("div");y.classList="flex_row",y.style="flex-wrap: nowrap;","string"!=typeof m.start&&(m.start=m.start.main),"string"!=typeof m.end&&(m.end=m.end.main),"string"!=typeof m.step&&(m.step=m.step.main),"string"!=typeof m.tile&&(m.tile=m.tile.main),function(){for(var e=[],t=0;t<4;++t){var n=document.createElement("label"),i=document.createElement("input");switch(i.style="width:100px;",i.type="text",t){case 0:i.value=m.start,n.textContent="Start";break;case 1:i.value=m.end,n.textContent="End";break;case 2:i.value=m.step,n.textContent="Step";break;case 3:i.value=m.tile,n.textContent="Tile"}e.push(i),n.appendChild(i),y.appendChild(n)}p.push(e);var o=document.createElement("div");o.style="min-width: 200px; min-height: 1rem;flex-grow: 1;display: flex;",o.addEventListener("click",(function(){if(null!=r)_this5.project().request(["sdfg_object"],(function(t){t="object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_9__.Z)(t.sdfg_object)?t.sdfg_object:JSON.parse(t.sdfg_object),console.log("got sdfg object",t);for(var n=[],i=0,a=Object.values(t);i<a.length;i++){var s=a[i];n.push(s.attributes._arrays[r.value])}(n=n.filter((function(e){return null!=e}))).length>0&&(r=n[0]);var l=_this5.create_visual_range_representation.apply(_this5,(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__.Z)(e.map((function(e){return e.value}))).concat([!1,r]));o.innerHTML="",o.appendChild(l)}),{});else{var t=_this5.create_visual_range_representation.apply(_this5,(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__.Z)(e.map((function(e){return e.value}))).concat([!1,r]));o.innerHTML="",o.appendChild(t)}})),o.innerText="Click here for visual representation",y.appendChild(o)}(),h.appendChild(y)}}catch(e){v.e(e)}finally{v.f()}l.appendChild(h);var g=document.createElement("button");return g.innerText="Apply",g.addEventListener("click",(function(){var r,i={ranges:[],type:t.value.type},o=_createForOfIteratorHelper(p);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.ranges.push({start:a[0].value,end:a[1].value,step:a[2].value,tile:a[3].value})}}catch(e){o.e(e)}finally{o.f()}e.propertyChanged(n,t.name,i),w2popup.close()})),d.onclick=function(){w2popup.open({title:"Range property",body:l,buttons:g,width:1280,height:800})},$(a)},elem=document.createElement("div");if("bool"==x.metatype){var val=x.value;"string"==typeof val&&(val="True"==val),elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createToggleSwitch("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.checked)}),val)}else if("str"==x.metatype||"float"==x.metatype||"LambdaProperty"==x.metatype||"Property"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createTextInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),x.value);else if("tuple"==x.metatype||"dict"==x.metatype||"list"==x.metatype||"set"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createTextInput("prop_"+x.name,(function(e){var t=e.value;try{t=JSON.parse(e.value)}catch(n){t=e.value}transthis.propertyChanged(node,x.name,t)}),JSON.stringify(x.value));else if("Range"==x.metatype)elem=create_range_input(transthis,x,node);else if("DataProperty"==x.metatype){elem=document.createElement("span"),elem.innerText=x.value,elem=$(elem);var cb=function(e){var t=node.sdfg.attributes._arrays,n=Object.keys(t),r=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createComboboxInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),n,x.value);elem[0].parentNode.replaceChild(r[0],elem[0])};this.project().request(["sdfg_object"],cb,{on_timeout:cb,timeout:300})}else if("LibraryImplementationProperty"==x.metatype)elem=document.createElement("span"),elem.innerText=x.value,elem=$(elem),$.getJSON("/dace/api/v1.0/getLibImpl/"+node.element.classpath,(function(e){var t=function(t){var n=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createComboboxInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),e,x.value),r=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createButton("prop_"+x.name+"_expand",(function(e){(0,_main__WEBPACK_IMPORTED_MODULE_1__.LS)("/dace/api/v1.0/expand/",{sdfg:node.sdfg,nodeid:[node.sdfg.sdfg_list_id,node.element.parent_id,node.element.id]},(function(e){if(4===e.readyState&&200===e.status){var t=(0,_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__.a)(e.response);void 0!==t.error&&_this5.handleErrors(_this5,t),_this5.project().request(["append-history"],(function(e){}),{params:{new_sdfg:t.sdfg,item_name:"Expand "+node.element.label}})}}))}),"Expand");elem[0].parentNode.replaceChild(n[0],elem[0]),n[0].parentNode.appendChild(r[0])};_this5.project().request(["sdfg_object"],t,{on_timeout:t,timeout:300})}));else{if("CodeProperty"==x.metatype||"CodeBlock"==x.metatype){var codeelem=null,langelem=null,onchange=function(e){transthis.propertyChanged(node,x.name,{string_data:codeelem[0].value,language:langelem[0].value})};return null==x.value&&(x.value={},x.value.language="NoCode",x.value.string_data=""),codeelem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createLongTextInput("prop_"+x.name,onchange,x.value.string_data),elem.appendChild(codeelem[0]),langelem=create_language_input(x.value.language,onchange),elem.appendChild(langelem[0]),elem.classList.add("flex_column"),elem}if("int"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createIntInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,parseInt(e.value))}),x.value);else if("ScheduleType"==x.metatype){var schedule_types=this.getEnum("ScheduleType"),qualified=x.value;schedule_types.includes(qualified)||(qualified="ScheduleType."+qualified),elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createSelectInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),schedule_types,qualified)}else if("AllocationLifetime"==x.metatype){var types=this.getEnum("AllocationLifetime"),_qualified=x.value;types.includes(_qualified)||(_qualified="AllocationLifetime."+_qualified),elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createSelectInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),types,_qualified)}else if("AccessType"==x.metatype){var access_types=this.getEnum("AccessType"),_qualified2=x.value;access_types.includes(_qualified2)||(_qualified2="AccessType."+_qualified2),elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createSelectInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),access_types,_qualified2)}else if("Language"==x.metatype)elem=create_language_input();else{if("None"==x.metatype)return console.log("Property with type 'None' ignored",x),elem;if("object"==x.metatype&&"identity"==x.name)return elem;if("OrderedDiGraph"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createTextInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),x.value);else if("DebugInfo"==x.metatype){var info_obj=x.value;"string"==typeof info_obj&&(info_obj=JSON.parse(info_obj)),elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createCodeReference("prop_"+x.name,(function(e){transthis.project().request(["highlight-code"],(function(e){}),{params:info_obj})}),info_obj)}else if("ListProperty"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createTextInput("prop_"+x.name,(function(e){var t=e.value;try{t=JSON.parse(e.value)}catch(n){t=e.value}transthis.propertyChanged(node,x.name,t)}),JSON.stringify(x.value));else if("StorageType"==x.metatype){var storage_types=this.getEnum("StorageType"),_qualified3=x.value;storage_types.includes(_qualified3)||(_qualified3="StorageType."+_qualified3),elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createSelectInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),storage_types,_qualified3)}else if("InstrumentationType"==x.metatype){var _storage_types=this.getEnum("InstrumentationType"),_qualified4=x.value;_storage_types.includes(_qualified4)||(_qualified4="InstrumentationType."+_qualified4),elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createSelectInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),_storage_types,_qualified4)}else if("typeclass"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createTextInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),x.value);else if("hosttype"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createHostInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),DIODE.getHostList(),x.value);else if("selectinput"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createSelectInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),x.options,x.value);else if("combobox"==x.metatype)elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createComboboxInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,e.value)}),x.options,x.value);else{if("font"==x.metatype)return console.warn("Ignoring property type ",x.metatype),elem;if("SDFGReferenceProperty"==x.metatype)return elem;if("SubsetProperty"==x.metatype)elem=null==x.value?_main__WEBPACK_IMPORTED_MODULE_1__.qu.createTextInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,JSON.parse(e.value))}),JSON.stringify(x.value)):"subsets.Indices"==x.value.type||"Indices"==x.value.type?create_index_subset_input(transthis,x,node):create_range_input(transthis,x,node);else{if("SymbolicProperty"!=x.metatype)return console.log("Unimplemented property type: ",x),alert("Unimplemented property type: "+x.metatype),elem;elem=_main__WEBPACK_IMPORTED_MODULE_1__.qu.createTextInput("prop_"+x.name,(function(e){transthis.propertyChanged(node,x.name,JSON.parse(e.value))}),JSON.stringify(x.value))}}}}return elem[0]}},{key:"renderPropertiesInWindow",value:function(e,t,n,r){var i=this,o={transthis:"string"==typeof e?e:e.created,node:t,params:n,options:r};this.replaceOrCreate(["display-properties"],"PropWinComponent",o,(function(){var e={type:"component",componentName:"PropWinComponent",componentState:{created:i.getPseudorandom(),params:o}};i.addContentItem(e)}))}},{key:"showStaleDataButton",value:function(){this.project().request(["show_stale_data_button"],(function(e){}),{})}},{key:"removeStaleDataButton",value:function(){this.project().request(["remove_stale_data_button"],(function(e){}),{})}},{key:"refreshSDFG",value:function(){this.gatherProjectElementsAndCompile(diode,{},{sdfg_over_code:!0})}},{key:"__impl_showStaleDataButton",value:function(){var e=this;if(DIODE.recompileOnPropertyChange())this.gatherProjectElementsAndCompile(this,{},{sdfg_over_code:!0});else if(null==this._stale_data_button){var t=document.createElement("div");t.classList="stale_data_button",t.innerHTML="Stale project data. Click here or press <span class='key_combo'>Alt-R</span> to synchronize",t.addEventListener("click",(function(t){e.gatherProjectElementsAndCompile(diode,{},{sdfg_over_code:!0})})),document.body.appendChild(t),this._stale_data_button=t}}},{key:"__impl_removeStaleDataButton",value:function(){null!=this._stale_data_button&&(this._stale_data_button.parentNode.removeChild(this._stale_data_button),this._stale_data_button=null)}},{key:"showIndeterminateLoading",value:function(){this.project().request(["show_loading"],(function(e){}),{})}},{key:"hideIndeterminateLoading",value:function(){this.project().request(["hide_loading"],(function(e){}),{})}},{key:"__impl_showIndeterminateLoading",value:function(){$("#loading_indicator").show()}},{key:"__impl_hideIndeterminateLoading",value:function(){$("#loading_indicator").hide()}},{key:"groupSDFGs",value:function(){this.generic_group((function(e){return"component"==e.config.type&&"SDFGComponent"==e.componentName}))}},{key:"groupCodeOuts",value:function(){this.generic_group((function(e){return"component"==e.config.type&&"CodeOutComponent"==e.componentName}))}},{key:"groupOptGraph",value:function(){this.generic_group((function(e){return"component"==e.config.type&&"OptGraphComponent"==e.componentName}))}},{key:"groupSDFGsAndCodeOutsTogether",value:function(){var e,t=this,n=this.goldenlayout.root.getItemsByFilter((function(e){return"component"==e.config.type&&"SDFGComponent"==e.componentName})),r=[],i=_createForOfIteratorHelper(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;r.push(o.config.componentState.sdfg_name)}}catch(e){i.e(e)}finally{i.f()}for(var a=function(){var e=l[s];t.generic_group((function(t){return"component"==t.config.type&&("SDFGComponent"==t.componentName||"CodeOutComponent"==t.componentName)&&t.config.componentState.sdfg_name==e}))},s=0,l=r;s<l.length;s++)a();(n=this.goldenlayout.root.getItemsByFilter((function(e){return"component"==e.config.type&&"SDFGComponent"==e.componentName}))).forEach((function(e){return e.parent.setActiveContentItem(e)}))}},{key:"groupLikeDIODE1",value:function(){this.goldenlayout.eventHub.emit("enter-programmatic-destroy","");var e=DIODE.filterComponentTreeByCname(this.goldenlayout.root,"CodeInComponent"),t=DIODE.filterComponentTreeByCname(this.goldenlayout.root,"AvailableTransformationsComponent"),n=DIODE.filterComponentTreeByCname(this.goldenlayout.root,"TransformationHistoryComponent"),r=DIODE.filterComponentTreeByCname(this.goldenlayout.root,"SDFGComponent"),i=DIODE.filterComponentTreeByCname(this.goldenlayout.root,"CodeOutComponent"),o=DIODE.filterComponentTreeByCname(this.goldenlayout.root,"PropWinComponent");if(0==o.length){var a=this.getPseudorandom();o.push({config:{type:"component",componentName:"PropWinComponent",componentState:{created:a}}})}for(var s=0,l=[e,i,t,n,r,o];s<l.length;s++){var u,c=_createForOfIteratorHelper(l[s]);try{for(c.s();!(u=c.n()).done;){var _=u.value;null!=_.componentName&&_.remove()}}catch(e){c.e(e)}finally{c.f()}}var d,f=_createForOfIteratorHelper((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__.Z)(this.goldenlayout.root.contentItems));try{for(f.s();!(d=f.n()).done;){var h=d.value;this.goldenlayout.root.removeChild(h)}}catch(e){f.e(e)}finally{f.f()}var p=this.goldenlayout.createContentItem({type:"stack",content:[]}),v=this.goldenlayout.createContentItem({type:"stack",content:[]}),m=this.goldenlayout.createContentItem({type:"stack",content:[]}),y=this.goldenlayout.createContentItem({type:"stack",content:[]}),g=this.goldenlayout.createContentItem({type:"stack",content:[]}),b=this.goldenlayout.createContentItem({type:"row",content:[]}),w=this.goldenlayout.createContentItem({type:"row",content:[]}),E=this.goldenlayout.createContentItem({type:"column",content:[]});this.goldenlayout.root.addChild(E),E.addChild(b),E.addChild(w),b.addChild(p),b.addChild(v),b.addChild(m),w.addChild(y),w.addChild(g),r.forEach((function(e){return m.addChild(e.config)})),o.forEach((function(e){return g.addChild(e.config)})),i.forEach((function(e){return y.addChild(e.config)})),t.forEach((function(e){return v.addChild(e.config)})),n.forEach((function(e){return v.addChild(e.config)})),e.forEach((function(e){return p.addChild(e.config)}));for(var k=0,S=[v,p,m,g];k<S.length;k++){var C=S[k];0==C.contentItems.length&&C.remove()}this.goldenlayout.eventHub.emit("leave-programmatic-destroy","")}},{key:"generic_group",value:function(e){this.goldenlayout.eventHub.emit("enter-programmatic-destroy","");var t=this.goldenlayout.root.getItemsByFilter(e);0==t.length&&console.warn("Cannot group, no elements found");var n,r=this.goldenlayout.createContentItem({type:"stack",contents:[]}),i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.config;o.parent.removeChild(o),r.addChild(a)}}catch(e){i.e(e)}finally{i.f()}this.addContentItem(r),this.goldenlayout.eventHub.emit("leave-programmatic-destroy","")}},{key:"addKeyShortcut",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__.Z)(e),o={alt:n,ctrl:r,func:t,state:0,expect:i.slice(1)};void 0===this._shortcut_functions[i[0]]?this._shortcut_functions[i[0]]=[o]:this._shortcut_functions[i[0]].push(o)}},{key:"onKeyUp",value:function(e){if(0==e.altKey&&"Alt"==e.key)for(var t=0,n=Object.values(this._shortcut_functions);t<n.length;t++){var r,i=_createForOfIteratorHelper(n[t]);try{for(i.s();!(r=i.n()).done;)r.value.state=0}catch(e){i.e(e)}finally{i.f()}}}},{key:"onKeyDown",value:function(e){for(var t=0,n=Object.values(this._shortcut_functions);t<n.length;t++){var r,i=_createForOfIteratorHelper(n[t]);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(0!=e.altKey){if(o.state>0&&o.expect[o.state-1]==e.key&&(o.state+=1,o.state>o.expect.length))return o.func(),e.stopPropagation(),e.preventDefault(),void this.onKeyUp({altKey:!1,key:"Alt"})}else o.state=0}}catch(e){i.e(e)}finally{i.f()}}var a=this._shortcut_functions[e.key];if(void 0!==a){var s,l=0,u=_createForOfIteratorHelper(a);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(c.alt==e.altKey&&c.ctrl==e.ctrlKey){if(c.expect.length>0){c.state+=1,console.log("dict value: ",this._shortcut_functions[e.key][l]),++l;continue}c.func(),e.stopPropagation(),e.preventDefault(),this.onKeyUp({altKey:!1,key:"Alt"})}++l}}catch(e){u.e(e)}finally{u.f()}}}},{key:"createNewProject",value:function(){this._current_project=new _diode_project__WEBPACK_IMPORTED_MODULE_11__.T(this),this._current_project.clearTransformationHistory(),sessionStorage.clear(),window.sessionStorage.setItem("diode_project",this._current_project._project_id),this.setupEvents()}},{key:"getProject",value:function(){var e=window.sessionStorage.getItem("diode_project");this._current_project=new _diode_project__WEBPACK_IMPORTED_MODULE_11__.T(this,e),null!=e&&null!=e||(window.sessionStorage.setItem("diode_project",this.getCurrentProject()._project_id),this.setupEvents())}},{key:"project",value:function(){return this.getCurrentProject()}},{key:"getCurrentProject",value:function(){return this._current_project}},{key:"setLayout",value:function(e){this.goldenlayout=e}},{key:"settings",value:function(){return this._settings}},{key:"getPseudorandom",value:function(){var e=(new Date).getTime().toString()+Math.random().toFixed(10).toString()+this._creation_counter.toString();return++this._creation_counter,console.assert(void 0!==e,"Millis well-defined"),e}},{key:"multiple_SDFGs_available",value:function(e){for(var t="string"==typeof e?(0,_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__.a)(e):e,n=0,r=Object.keys(t.compounds);n<r.length;n++){var i=r[n],o=t.compounds[i];this.SDFG_available(o,i)}}},{key:"SDFG_available",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sdfg",r=function(){return t.getPseudorandom()};e.sdfg_name=n;var i=function(){var i={title:n,type:"component",componentName:"SDFGComponent",componentState:{created:r(),sdfg_data:e,sdfg_name:n}};t.addContentItem(i)};this.replaceOrCreate(["new-sdfg"],"SDFGComponent",JSON.stringify(e),i);var o=function(){var i={title:"Generated Code",type:"component",componentName:"CodeOutComponent",componentState:{created:r(),code:e,sdfg_name:n}};t.addContentItem(i)};null!=e.generated_code&&(console.log("requesting using ID",this.project()),this.replaceOrCreate(["new-codeout"],"CodeOutComponent",e,o))}},{key:"Error_available",value:function(e){var t=this;this.replaceOrCreate(["new-error"],"ErrorComponent",e,(function(){var n={title:"Error",type:"component",componentName:"ErrorComponent",componentState:{error:e}};t.addContentItem(n)}))}},{key:"OptGraph_available",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"string"!=typeof e&&(e=JSON.stringify(e));var r=this.getPseudorandom(),i=function(){var i={type:"column",content:[{title:""==n?"Transformations":"Transformations for `"+n+"`",type:"component",componentName:"AvailableTransformationsComponent",componentState:{created:r,for_sdfg:n,optgraph_data:e}}]};t.addContentItem(i)};this.replaceOrCreate(["new-optgraph-"+n],"AvailableTransformationsComponent",e,i);var o=function(){var e={type:"column",content:[{title:"History",type:"component",componentName:"TransformationHistoryComponent",componentState:{created:r,for_sdfg:n}}]};t.addContentItem(e)};this.replaceOrCreate(["new-history-"+n],"TransformationHistoryComponent",e,o)}},{key:"OptGraphs_available",value:function(e){var t=e;"string"==typeof t&&(t=JSON.parse(e));for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n],o=t[i];this.OptGraph_available(o,i)}}},{key:"gatherProjectElementsAndCompile",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=n.code,s=n.sdfg_props,l=n.optpath,u=[];void 0===a&&(r.sdfg_over_code&&u.push("sdfg_object"),u.push("input_code")),void 0===l&&u.push("optpath");var c=function(n){if(null!=a&&(n.input_code=a),null!=s&&(n.sdfg_props=s),null!=l&&(n.optpath=l),null!=r.collect_cb&&r.collect_cb(n),!0!==r.dry_run){var u=null!=n.sdfg_object,c=n.input_code;if(!u&&"{"==c[0]){var _=(0,_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__.a)(c);n.sdfg_object={},n.sdfg_object[_.attributes.name]=c,u=!0}if(u&&"string"==typeof(c=n.sdfg_object)&&(c=(0,_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__.a)(c)),e.project().request(["clear-errors"],(function(){})),!0===r.run){var d={};r.perfmodes&&(d.perfmodes=r.perfmodes),d.repetitions=5,d.code_is_sdfg=u,d.runnercode=n.input_code,t.compile_and_run(e,r.term_id,c,n.optpath,n.sdfg_props,d,i,o)}else{var f=function(e){t.replaceOrCreate(["extend-optgraph"],"AvailableTransformationsComponent",e,(function(n){t.OptGraphs_available(e)}))};!0===r.no_optgraph&&(f=void 0),t.compile(e,c,n.optpath,n.sdfg_props,{optpath_cb:f,code_is_sdfg:u},i,o)}}};e.project().request(u,c,{timeout:500,on_timeout:c})}},{key:"compile",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,l={};!0===o.code_is_sdfg?(l={sdfg:(0,_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__.n)(t)}).code=o.runnercode:l={code:t},null!=r&&(l.optpath=r),null!=i&&(l.sdfg_props=i),l.client_id=this.getClientID();var u="1.0";(0,_main__WEBPACK_IMPORTED_MODULE_1__.LS)("/dace/api/v"+u+"/compile/dace",l,(function(t){if(4===t.readyState&&200===t.status){var r=(0,_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__.a)(t.response);if(null!=r.error)n.handleErrors(e,r),void 0!==s&&s();else{n.removeStaleDataButton();var i=(0,_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__.a)(t.response);n.multiple_SDFGs_available(t.response),void 0===o.optpath_cb?n.OptGraphs_available(i.compounds):o.optpath_cb(i.compounds),void 0!==a&&a()}}}))}},{key:"handleErrors",value:function(e,t){var n=t.error;if("traceback"in t&&(n+="\n\n"+t.traceback),this.Error_available(n),"string"!=typeof n){var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;"SyntaxError"===o.type?e.project().request(["new_error"],(function(e){}),{params:o,timeout:100}):console.warn("Error: ",o)}}catch(e){i.e(e)}finally{i.f()}}else console.warn("Error: ",n)}},{key:"ui_compile_and_run",value:function(e){var t=this.getPseudorandom(),n="terminal_"+t,r={title:"Terminal",type:"component",componentName:"TerminalComponent",componentState:{created:t}};this.addContentItem(r),this.gatherProjectElementsAndCompile(this,{},{run:!0,term_id:n,sdfg_over_code:!0})}},{key:"load_perfdata",value:function(){var e=this;this.showIndeterminateLoading();var t={client_id:this.getClientID()};(0,_main__WEBPACK_IMPORTED_MODULE_1__.LS)("/dace/api/v1.0/perfdata/get/",t,(function(t){if(4===t.readyState&&200===t.status){var n=JSON.parse(t.response);console.log("Got result",n);var r=function(){e.hideIndeterminateLoading()};e.project().request(["draw-perfinfo"],(function(e){r()}),{params:n,on_timeout:r})}}))}},{key:"show_exec_times",value:function(){this.addContentItem({type:"component",componentName:"PerfTimesComponent",componentState:{},title:"Execution times"})}},{key:"show_run_options",value:function(e){this.addContentItem({type:"component",componentName:"RunConfigComponent",title:"Run Configuration"})}},{key:"show_inst_options",value:function(e){this.addContentItem({type:"component",componentName:"InstControlComponent",title:"Instrumentation control"})}},{key:"show_roofline",value:function(e){this.addContentItem({type:"component",componentName:"RooflineComponent",title:"Roofline"})}},{key:"compile_and_run",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,u={};!0===a.code_is_sdfg?(u={sdfg:(0,_utils_sdfg_json_serializer__WEBPACK_IMPORTED_MODULE_10__.n)(n)}).code=a.runnercode:u={code:n},null!=i&&(u.optpath=i),null!=o&&(u.sdfg_props=o),this.applyCurrentRunConfig().then((function(n){var i=r.getClientID();if(u.client_id=i,"off"==n.Instrumentation)u.perfmodes=void 0;else if("minimal"==n.Instrumentation)u.perfmodes=["default"];else{if("full"!=n.Instrumentation)return alert("Error! Check console"),console.error("Unknown instrumentation mode",n.Instrumentation),void(void 0!==l&&l());u.perfmodes=["default","vectorize","memop","cacheop"]}var o=n["Number of threads"];"string"==typeof o&&(o=JSON.parse(o)),u.corecounts=o.map((function(e){return parseInt(e)})),u.repetitions=5,(0,_main__WEBPACK_IMPORTED_MODULE_1__.LS)("/dace/api/v1.0/run/",u,(function(n){if(4===n.readyState&&200===n.status){var o=n.response;"string"==typeof o&&(o=JSON.parse(o)),o.error?(r.display_current_execution_status(e,t,i),void 0!==l&&l()):void 0!==s&&s()}}))}))}},{key:"display_current_execution_status",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o={};o.client_id=n,o.perf_mode=i;var a="1.0";(0,_main__WEBPACK_IMPORTED_MODULE_1__.LS)("/dace/api/v"+a+"/run/status/",o,(function(e){if(4===e.readyState&&200===e.status){e.response.endsWith(" 0")?r.toast("Execution ended","Run ended successfully","info"):r.toast("Execution ended","Run failed","error");var n=e.response.substr(e.seenBytes);r.goldenlayout.eventHub.emit(t,n),e.seenBytes=e.responseText.length}if(3===e.readyState){var i=e.response.substr(e.seenBytes);r.goldenlayout.eventHub.emit(t,i),e.seenBytes=e.responseText.length}}))}},{key:"toast",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=VanillaToasts.create({title:e,text:t,type:n,icon:i,timeout:r,callback:o});VanillaToasts.setTimeout(a.id,1.1*r)}},{key:"optimize",value:function(e,t){void 0===t&&(t=[]);var n=this;e.project().request(["input_code","sdfg_object"],(function(r){var i=!0;null!=r.sdfg_object?(i=!1,r=r.sdfg_object,r=JSON.parse(r)):r=r.input_code,function(r,i,o){var a;a=r;n.compile(e,a,t,undefined,{optpath_cb:function(e){n.replaceOrCreate(["extend-optgraph"],"AvailableTransformationsComponent",e,(function(t){n.OptGraphs_available(e)}))},code_is_sdfg:!o})}(r,0,i)}))}},{key:"replaceOrCreate",value:function(e,t,n,r){var i=null;this.goldenlayout.root&&(i=this.goldenlayout.root.getItemsByFilter((function(e){return"component"==e.config.type&&e.componentName==t}))),i&&i.length>0?this.getCurrentProject().request(e,(function(e,t){}),{timeout:null,params:n,timeout_id:null}):r(n)}},{key:"debounce",value:function(e,t,n){if(void 0===this._debouncing)return t;var r=this;return function(){void 0!==r._debouncing[e]&&clearTimeout(r._debouncing[e]),r._debouncing[e]=setTimeout(t,n)}}}],[{key:"getHostList",value:function(){var e=localStorage.getItem("diode_host_list");return null==e?["localhost"]:JSON.parse(e)}},{key:"setHostList",value:function(e){localStorage.setItem("diode_host_list",JSON.stringify(e))}},{key:"hash",value:function(e){return btoa(crypto.subtle.digest("SHA-256",Uint8Array.from(e)))}},{key:"filterComponentTree",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=[],i=_createForOfIteratorHelper(e.contentItems);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__.Z)(this.filterComponentTree(o,n)))}}catch(e){i.e(e)}finally{i.f()}return r.filter(n)}},{key:"filterComponentTreeByCname",value:function(e,t){return e.getItemsByFilter((function(e){return"component"==e.config.type&&e.componentName==t}))}},{key:"editorTheme",value:function(){var e=localStorage.getItem("diode_ace_editor_theme");return null===e?"github":e}},{key:"themeString",value:function(){return"ace/theme/"+DIODE.editorTheme()}},{key:"loadTheme",value:function(){return $.getScript("external_lib/ace/theme-"+DIODE.editorTheme()+".js")}},{key:"setTheme",value:function(e){localStorage.setItem("diode_ace_editor_theme",e)}},{key:"recompileOnPropertyChange",value:function(){return"true"==localStorage.getItem("diode_recompile_on_prop_change")}},{key:"setRecompileOnPropertyChange",value:function(e){e?localStorage.setItem("diode_recompile_on_prop_change","true"):localStorage.setItem("diode_recompile_on_prop_change","false")}},{key:"setDebugDevMode",value:function(e){e?localStorage.setItem("diode_DebugDevMode","true"):localStorage.setItem("diode_DebugDevMode","false")}},{key:"debugDevMode",value:function(){return"true"===localStorage.getItem("diode_DebugDevMode")}}]),DIODE}()},816:(e,t,n)=>{"use strict";n.d(t,{u:()=>o});var r=n(6610),i=n(5991),o=function(){function e(t){(0,r.Z)(this,e),null===t&&((t={}).style=e.default()),"string"==typeof t&&(t=JSON.parse(t)),this._change_callback=null,this._config=t,this.insertStylesheet(t.style),this._constructor_values={},null!=t.vals&&(this._constructor_values=t.vals)}return(0,i.Z)(e,[{key:"setOnChange",value:function(e){this._change_callback=e}},{key:"setChanged",value:function(){null!=this._change_callback&&this._change_callback(this)}},{key:"apply",value:function(){this.insertStylesheet(this.getCSS())}},{key:"insertStylesheet",value:function(e){var t=document.getElementById("appearance-stylesheet"),n=!0;null!=t&&null!=t||(n=!1,(t=document.createElement("style")).id="appearance-stylesheet",t.type="text/css"),t.innerText=e,n||document.head.appendChild(t),this.setChanged()}},{key:"setValue",value:function(e,t){return this._constructor_values[e]=t,this}},{key:"setFont",value:function(t){var n=e.font(t);return this._constructor_values["font-family"]=n,this}},{key:"toString",value:function(){return JSON.stringify(this._config)}},{key:"getCSS",value:function(){for(var e="",t=0,n=Object.entries(this._constructor_values);t<n.length;t++){var r=n[t];e+=r[0]+": "+r[1]+";"}var i=".diode_appearance { ";return i+=e,i+="}",i+=".lm_content { ",(i+=e)+"}"}},{key:"toStorable",value:function(){return{style:this.getCSS(),vals:this._constructor_values}}},{key:"setFromAceEditorTheme",value:function(t){var n=e.getClassProperties("ace-"+t),r=n["background-color"],i=n.background;r&&this.setValue("background-color",r),i&&this.setValue("background",i+" !important"),this.setValue("color",n.color),this.insertStylesheet(this.getCSS())}}],[{key:"getClassProperties",value:function(e){var t=document.createElement("div");t.classList=e,t.style="width: 0; height: 0;",document.body.appendChild(t);var n=JSON.parse(JSON.stringify(window.getComputedStyle(t)));return document.body.removeChild(t),n}},{key:"fonts",value:function(){return["Georgia","Palatino","Times","Arial","ArialBlack","ComicSans","Impact","Lucida","Tahoma","Trebuchet","Verdana","Courier","LucidaConsole"]}},{key:"font",value:function(e){switch(e){case"Georgia":return"Georgia, serif";case"Palatino":return'"Palatino Linotype", "Book Antiqua", Palatino, serif';case"Times":return'"Times New Roman", Times, serif';case"Arial":return"Arial, Helvetica, sans-serif";case"ArialBlack":return'"Arial Black", Gadget, sans-serif';case"ComicSans":return'"Comic Sans MS", cursive, sans-serif';case"Impact":return"Impact, Charcoal, sans-serif";case"Lucida":return'"Lucida Sans Unicode", "Lucida Grande", sans-serif';case"Tahoma":return"Tahoma, Geneva, sans-serif";case"Trebuchet":return'"Trebuchet MS", Helvetica, sans-serif';case"Verdana":return"Verdana, Geneva, sans-serif";case"Courier":return'"Courier New", Courier, monospace';case"LucidaConsole":return'"Lucida Console", Monaco, monospace';default:throw"Unknown font (not websafe?)"}}},{key:"default",value:function(){return"\n        .diode_appearance {\n            font-family: "+e.font("Arial")+"\n        }\n        "}}]),e}()},2992:(e,t,n)=>{"use strict";n.d(t,{T:()=>l});var r=n(8927),i=n(6610),o=n(5991);function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(0,i.Z)(this,e),this._diode=t,this._project_id=null==n?t.getPseudorandom():n,this.setup(),this._callback=null,this._rcvbuf={},this._waiter={},this._listeners={},this._closed_windows=[],this._blob=null}return(0,o.Z)(e,[{key:"clearTransformationHistory",value:function(){sessionStorage.removeItem("transformation_snapshots")}},{key:"getTransformationSnapshots",value:function(){var e=sessionStorage.getItem("transformation_snapshots");return null==e?[]:JSON.parse(e)}},{key:"getTransformationHistory",value:function(){return this.getTransformationSnapshots().map((function(e){return e[0]}))}},{key:"discardTransformationsAfter",value:function(e){var t=this.getTransformationSnapshots();sessionStorage.setItem("transformation_snapshots",JSON.stringify(t.slice(0,e))),this.request(["update-tfh"],(function(e){return e}),{})}},{key:"saveSnapshot",value:function(e,t){var n=this.getTransformationSnapshots();n.push([t,e]),sessionStorage.setItem("transformation_snapshots",JSON.stringify(n))}},{key:"reopenClosedWindow",value:function(e){var t=this.getConfigForClosedWindow(e,!0);this._diode.addContentItem(t),this._diode.goldenlayout.eventHub.emit("window-reopened-"+e)}},{key:"getConfigForClosedWindow",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getClosedWindowsList(),i=[],o=[],s=a(r);try{for(s.s();!(t=s.n()).done;){var l=t.value,u=l[0],c=l[1];c.created===e?(o.push([u,c]),n||i.push([u,c])):i.push([u,c])}}catch(e){s.e(e)}finally{s.f()}this.setClosedWindowsList(i),console.assert(1===o.length,"Expected only 1 match!");var _=o[0],d={type:"component",componentName:_[0],componentState:_[1]};return d}},{key:"setClosedWindowsList",value:function(e){this._closed_windows=e,sessionStorage.setItem(this._project_id+"-closed-window-list",JSON.stringify(this._closed_windows))}},{key:"clearClosedWindowsList",value:function(){this._closed_windows=[],sessionStorage.setItem(this._project_id+"-closed-window-list",JSON.stringify(this._closed_windows))}},{key:"addToClosedWindowsList",value:function(e,t){this._closed_windows=this.getClosedWindowsList(),this._closed_windows.push([e,t]);try{sessionStorage.setItem(this._project_id+"-closed-window-list",JSON.stringify(this._closed_windows))}catch(e){sessionStorage.clear()}}},{key:"getClosedWindowsList",value:function(){var e=sessionStorage.getItem(this._project_id+"-closed-window-list");return"string"==typeof e&&(e=JSON.parse(e)),null===e?[]:e}},{key:"eventString",value:function(e){return console.assert(null!=this._project_id,"project id valid"),this._project_id+e}},{key:"startListening",value:function(e,t){var n=this._diode.goldenlayout.eventHub,r=this,i=[this.eventString(e),function(n){var i=r._rcvbuf[t][e];i instanceof Array?r._rcvbuf[t][e].push(n):i instanceof Object?Object.assign(r._rcvbuf[t][e],n):r._rcvbuf[t][e]=n},this];n.on.apply(n,i),this._listeners[t].push(i)}},{key:"stopListening",value:function(e){var t,n=this._diode.goldenlayout.eventHub,i=a(this._listeners[e]);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.unbind.apply(n,(0,r.Z)(o))}}catch(e){i.e(e)}finally{i.f()}delete this._listeners[e]}},{key:"setup",value:function(){}},{key:"createblob",value:function(e){var t=new Blob([e],{type:"text/plain"});return null!==this._blob&&window.URL.revokeObjectURL(this._blob),this._blob=window.URL.createObjectURL(t),this._blob}},{key:"save",value:function(){var e=this;this.request(["sdfg_object"],(function(t){var n=t.sdfg_object,r=null;"string"!=typeof n?(r=Object.keys(t.sdfg_object)[0],n=stringify_sdfg(Object.values(t.sdfg_object)[0])):r=parse_sdfg(n).attributes.name,r+=".sdfg";var i=document.createElement("a");i.setAttribute("download",r),i.href=e.createblob(n),document.body.appendChild(i),window.requestAnimationFrame((function(){var e=new MouseEvent("click");i.dispatchEvent(e),document.body.removeChild(i)}))}))}},{key:"request",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new e(this._diode,this._project_id);return i.__impl_request(t,n,r)}},{key:"__impl_request",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._callback=t;var r=n.params,i="id"+this._diode.getPseudorandom();this._rcvbuf[i]={},this._listeners[i]=[];var o,s=a(e);try{for(s.s();!(o=s.n()).done;){var l=o.value;this.startListening(l,i),this._diode.goldenlayout.eventHub.emit(this.eventString("-req-"+l),r,this)}}catch(e){s.e(e)}finally{s.f()}var u=this,c=100,_=n.timeout;this._waiter[i]=setInterval((function(){var t,r=!1,o=a(e);try{for(o.s();!(t=o.n()).done;)if(!(t.value in u._rcvbuf[i])){r=!0;break}}catch(e){o.e(e)}finally{o.f()}if(!r){clearInterval(u._waiter[i]),u.stopListening(i),u._waiter[i]=null;var s=u._rcvbuf[i];return delete u._rcvbuf[i],u._callback(s,n.timeout_id)}null!==_&&(_-=c)<=0&&(clearInterval(u._waiter[i]),u.stopListening(i),null!=n.on_timeout&&n.on_timeout(u._rcvbuf[i]),u._waiter[i]=null,delete u._rcvbuf[i])}),c)}}],[{key:"load",value:function(t,n){var r=e.getProjectData(n),i=new e(t,r.project_id);return t.goldenlayout.destroy(),sessionStorage.setItem("savedState",JSON.stringify(r.data)),sessionStorage.setItem("diode_project",i._project_id),sessionStorage.setItem("transformation_snapshots",JSON.stringify(r.snapshots)),window.location.reload(),i}},{key:"getProjectData",value:function(e){var t=localStorage.getItem("project_"+e);if(null==t)throw"Project must exist";return JSON.parse(t)}},{key:"getSavedProjects",value:function(){var e=localStorage.getItem("saved_projects");return null==e?[]:JSON.parse(e)}}]),e}()},5490:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(6610),i=n(5991),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e),this.settings_values=t,this.changed={}}return(0,i.Z)(e,[{key:"load",value:function(){this.settings_values=window.localStorage.getItem("DIODE/Settings/confirmed"),this.changed=window.localStorage.getItem("DIODE/Settings/changed")}},{key:"store",value:function(){window.localStorage.setItem("DIODE/Settings/confirmed",this.settings_values),window.localStorage.setItem("DIODE/Settings/changed",this.changed)}},{key:"change",value:function(e,t){this.changed[e.join("/")]=t}},{key:"hasChanged",value:function(){return this.changed!={}}},{key:"changedValues",value:function(){return this.changed}},{key:"clearChanged",value:function(){this.changed={}}},{key:"values",value:function(){return this.settings_values}}]),e}()},982:(e,t,n)=>{"use strict";n.d(t,{F:()=>s,i:()=>l});var r=n(6610),i=n(5991);function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(){function e(t,n){var i=this;(0,r.Z)(this,e),this._table=t,this._title_row=n,this._cat_rows=[],this._title_row.classList.add("diode_property_header"),this._title_row.addEventListener("click",(function(e){var t,n=o(i._cat_rows);try{for(n.s();!(t=n.n()).done;){var r=t.value;"none"==r.style.display?(r.style.display=null,i._title_row.classList.remove("collapsed")):(r.style.display="none",i._title_row.classList.add("collapsed"))}}catch(e){n.e(e)}finally{n.f()}}))}return(0,i.Z)(e,[{key:"addContentRow",value:function(e){this._cat_rows.push(e)}}]),e}(),l=function(){function e(){(0,r.Z)(this,e),this.init()}return(0,i.Z)(e,[{key:"init",value:function(){this._table=document.createElement("table"),this._thead=document.createElement("thead"),this._tbody=document.createElement("tbody"),this._table.appendChild(this._thead),this._table.appendChild(this._tbody),this._is_collapsed=!1}},{key:"createIn",value:function(e){e.appendChild(this._table)}},{key:"setHeaders",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._columns=t,this._thead.innerHTML="";var r,i=document.createElement("tr"),a=o(this._columns);try{for(a.s();!(r=a.n()).done;){var s=r.value,l=document.createElement("th");"string"==typeof s?l.innerText=s:l.appendChild(s),i.appendChild(l)}}catch(e){a.e(e)}finally{a.f()}return this._thead.appendChild(i),i}},{key:"addRow",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t,i=document.createElement("tr"),o=0,a=r;o<a.length;o++){var s=a[o],l=document.createElement("td");"string"==typeof s?l.innerText=s:l.appendChild(s),i.appendChild(l)}return this._tbody.appendChild(i),i}},{key:"collapseVertically",value:function(){this._table.style.display="none",this._is_collapsed=!0}},{key:"expandVertically",value:function(){this._table.style.display=null,this._is_collapsed=!1}},{key:"toggleVertically",value:function(){this._is_collapsed?this.expandVertically():this.collapseVertically()}},{key:"setCSSClass",value:function(e){this._table.classList=e}}]),e}()},8821:(e,t,n)=>{"use strict";n.d(t,{qu:()=>qe,LS:()=>We,Wj:()=>Ne});var r=n(6610),i=n(5991),o=n(1154),a=n(6156),s=n(8927),l=n(2961);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||(0,l.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n(379),_=n(6070),d=n(7608),f=n(982),h=n(5490);function p(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,r.Z)(this,e),this._label=t,this._prev=null,this._data=n,this._children=[],this._on_activate=null,this._representative=null}return(0,i.Z)(e,[{key:"label",value:function(){return this._label}},{key:"setPathLabel",value:function(e){this._path_label=e}},{key:"pathLabel",value:function(){return void 0===this._path_label?this.label():this._path_label}},{key:"data",value:function(){return this._data}},{key:"children",value:function(){return this._children}},{key:"parent",value:function(){return this._prev}},{key:"getChild",value:function(e){var t,n=p(this.children());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r;var i=r.getChild(e);if(null!=i)return i}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"clearChildren",value:function(){this._children=[]}},{key:"head",value:function(){for(var e=this;null!=e._prev;)e=e._prev;return e}},{key:"allLabelsInTree",value:function(){return this.head().asPreOrderArray((function(e){return e.pathLabel()}))}},{key:"asPreOrderArray",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=[t(this)],r=p(this.children());try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push.apply(n,(0,s.Z)(i.asPreOrderArray(t)))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=[];void 0===e&&(e=function(e){return{name:e.pathLabel(),params:e.data()}});for(var n=this;null!=n._prev;){var r=e(n);" <virtual>"!=r.name&&(t=[r].concat((0,s.Z)(t))),n=n._prev}return t}},{key:"addNode",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new e(t,n);return i._prev=this,null!=r.LabelConflictSameLevel&&(i=r.LabelConflictSameLevel(i,this.children().map((function(e){return e.label()})))),null!=r.LabelConflictGlobal&&(i=r.LabelConflictGlobal(i,this.allLabelsInTree())),i._prev=this,this._children.push(i),i}},{key:"setHandler",value:function(e,t){"activate"==e?this._on_activate=t:console.assert(!1,"type "+e+" is unknown")}},{key:"setRepresentative",value:function(e){this._representative=e}},{key:"representative",value:function(){return this._representative}},{key:"activate",value:function(e){null!=this._on_activate&&this._on_activate(this,e)}}]),e}(),y=function(){function e(t){(0,r.Z)(this,e),this._tree=t,this._debouncing=null}return(0,i.Z)(e,[{key:"setDebouncing",value:function(e){this._debouncing=e}},{key:"create_html_in",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=void 0===n?this._tree:n,i=document.createElement("li"),o=document.createElement("span");o.innerText=r.label(),i.append(o);var a=document.createElement("ul");a.classList.add("tree_view"),a.classList.add("collapsed_sublist");var s=function(){a.classList.toggle("collapsed_sublist"),r.activate(1)},l=function(){r.activate(2)},u=s,c=s;null!=this._debouncing&&(u=this._debouncing.debounce("treeview-click",s,100),c=this._debouncing.debounce("treeview-click",l,10)),i.addEventListener("click",u),i.addEventListener("mouseenter",(function(){r.activate(0)})),i.addEventListener("mouseleave",(function(){r.activate(-1)})),i.addEventListener("dblclick",c),r.setRepresentative(i),a.append(i);var _=r.children();if(0==_.length);else{var d,f=p(_);try{for(f.s();!(d=f.n()).done;){var h=d.value;this.create_html_in(a,t+1,h)}}catch(e){f.e(e)}finally{f.f()}}e.append(a)}}]),e}(),g=n(2992);function b(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(){function e(t,n,i){(0,r.Z)(this,e),this.diode=t,this.container=n,this.initial_state=i,this.created=i.created,null==this.created&&(this.created=this.diode.getPseudorandom(),this.saveToState({created:this.created})),this._project=null,null!=i.project_id&&null!=i.project_id&&"null"!=i.project_id&&(this._project=new g.T(this.diode,i.project_id)),this._event_listeners=[],this._event_listeners_closed=[],this._no_user_destroy=!1}return(0,i.Z)(e,[{key:"project",value:function(){return console.assert(null!=this._project,"Project invalid"),this._project}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.diode.goldenlayout.eventHub,i=[e,t];r.on.apply(r,i),this._event_listeners.push(i),n&&this.closed_on(e,(function(e){return t(e)}))}},{key:"closed_on",value:function(e,t){var n=[e,t];this._event_listeners_closed.push(n)}},{key:"removeClosedWindowEvents",value:function(){var e,t=this.diode.goldenlayout.eventHub,n=b(this._event_listeners_closed);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.unbind.apply(t,(0,s.Z)(r))}}catch(e){n.e(e)}finally{n.f()}this._event_listeners_closed=[]}},{key:"destroy",value:function(){console.log("destroying",this);var e,t=this.diode.goldenlayout.eventHub,n=b(this._event_listeners);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.unbind.apply(t,(0,s.Z)(r))}}catch(e){n.e(e)}finally{n.f()}this._event_listeners=[]}},{key:"close",value:function(){console.log("closing",this),this.project().addToClosedWindowsList(this.container._config.componentName,this.getState());var e,t=this.diode.goldenlayout.eventHub,n=b(this._event_listeners_closed);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.on.apply(t,(0,s.Z)(r))}}catch(e){n.e(e)}finally{n.f()}}},{key:"setupEvents",value:function(e){var t=this;null==this._project&&(this._project=e),this.container.extendState({project_id:this._project.eventString("")}),this.on("destroy-"+this.getState().created,(function(e){t._no_user_destroy||t.close(),t.destroy()})),this.on("enter-programmatic-destroy",(function(e){t._no_user_destroy=!0,console.log("Entering programmatic reordering",t)})),this.on("leave-programmatic-destroy",(function(e){t._no_user_destroy=!1,console.log("Leaving programmatic reordering",t)})),this.closed_on("window-reopened-"+this.getState().created,(function(e){t.removeClosedWindowEvents()}))}},{key:"getState",value:function(){return this.container.getState()}},{key:"saveToState",value:function(e){this.container.extendState(e)}},{key:"resetState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.container.setState(e)}},{key:"saveToPersistentState",value:function(e,t){localStorage.setItem(e,t)}},{key:"getPersistentState",value:function(e){return localStorage.getItem(e)}}]),e}();function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=globalThis.$,D=function(e){(0,c.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function l(e,t,n){return(0,r.Z)(this,l),a.call(this,e,t,n)}return(0,i.Z)(l,[{key:"settings_change_callback",value:function(e,t,n){console.assert(void 0!==n,"Undefined value"),console.log("Setting changed",t,n),this.diode.settings().change(t,n),this.set_settings()}},{key:"link_togglable_onclick",value:function(e,t){var n="collapsed_container";e.on("click",(function(){t.hasClass(n)?t.removeClass(n):t.addClass(n)}))}},{key:"parse_settings2",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!1;void 0===n&&(n=new m("Settings",null),i=!0);var a=[],l=[];Object.entries(e).forEach((function(e){var t=u(e,2),n=t[0],r=t[1],i=r.meta;r.value,"dict"==i.type?a.push([n,r]):l.push([n,r])}));var c={},_=new f.i,d=JSON.parse(JSON.stringify(l));d=d.map((function(e){var t=e[0],n=(e=e[1]).meta;return n.value=e.value,n.name=n.title,n.category="General",n.key=t,n}));var h,p=_,v=null,g={},b=C(d);try{for(b.s();!(h=b.n()).done;){var w=h.value,E=w.category;null==g[E]&&(g[E]=[]),g[E].push(w)}}catch(e){b.e(e)}finally{b.f()}o.C.debugDevMode()||delete g["(Debug)"];for(var k={propertyChanged:function(e,n,r){console.log("PropertyChanged",e,n,r),t.settings_change_callback(void 0,e,r)}},x=0,D=Object.entries(g);x<D.length;x++){var P=D[x],T=P[0],I=P[1].sort((function(e,t){return e.name.localeCompare(t.name)}));p=_;var A=document.createElement("span");A.innerText=T;var M=p.addRow(A);M.childNodes[0].colSpan="2",v=new f.F(p,M);var j,L=C(I);try{for(L.s();!(j=L.n()).done;){var R=j.value;c[r]=R.value;var Z=diode.getMatchingInput(k,R,[].concat((0,s.Z)(r),[R.key])),U=p.addRow(R.name,Z);null!=v&&v.addContentRow(U)}}catch(e){L.e(e)}finally{L.f()}}_.setCSSClass("diode_property_table"),n.setHandler("activate",(function(e,t){if(1==t){var n=e.representative();e.head().asPreOrderArray((function(e){return e.representative()})).forEach((function(e){return e.classList.remove("selected")})),n.classList.add("selected");var r=O("#diode_settings_props_container")[0];r.innerHTML="",_.createIn(r)}}));var B,N=C(a=a.sort((function(e,t){return e[1].meta.title.localeCompare(t[1].meta.title)})));try{var W=function(){var e=B.value,i=e[0];e=e[1];var o=r.concat(i),a=n.addNode(e.meta.title,null);setTimeout((function(){return a.representative().title=e.meta.description}),500),console.log("Setting path",o);var s=t.parse_settings2(e.value,a,o);c=S(S({},c),s)};for(N.s();!(B=N.n()).done;)W()}catch(e){N.e(e)}finally{N.f()}if(i){var q=new y(n);q.create_html_in(O("#diode_settings_container")[0])}return c}},{key:"get_settings",value:function(){var e=this;We("/dace/api/v1.0/preferences/get",{client_id:this.diode.getClientID()},(function(t){if(4===t.readyState&&200===t.status){var n=e.parse_settings2(JSON.parse(t.response));e.diode._settings=new h.y(n)}}))}},{key:"set_settings",value:function(){if(this.diode.settings().hasChanged()){var e=this.diode.settings().changedValues();this.saveToState({changed:e,confirmed:this.diode.settings().values()});var t=this,n=this.diode.getClientID(),r=e;r.client_id=n,this.diode.debounce("settings-changed",(function(){var e=this;We("/dace/api/v1.0/preferences/set",r,(function(n){4===n.readyState&&200===n.status&&(t.diode.settings().clearChanged(),e.diode.toast("Settings changed","The changed settings were applied at remote server","info",3e3))}))}),1e3)()}}}]),l}(E),P=n(816);var T=function(e){(0,c.Z)(s,e);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function s(e,t,n){var i;return(0,r.Z)(this,s),(i=a.call(this,e,t,n))._settings_container=null,i._editor_themes=i.getThemes(),i}return(0,i.Z)(s,[{key:"getThemes",value:function(){var e=this;We("/dace/api/v1.0/diode/themes",void 0,(function(t){4===t.readyState&&200===t.status&&(e._editor_themes=JSON.parse(t.response),console.log("Got editor themes",e._editor_themes),e.create())}),"GET")}},{key:"themeNames",value:function(){return this._editor_themes.map((function(e){return e.substr("theme-".length).slice(0,-3)}))}},{key:"setContainer",value:function(e){this._settings_container=e}},{key:"create",value:function(){var e=this,t=qe.createContainer(void 0),n=qe.createLabel(void 0,"editor theme","Sets the ace editor theme"),r=this.themeNames(),i=qe.createSelectInput(void 0,(function(t){var n=t.value;o.C.setTheme(n),o.C.loadTheme().then((function(t){e.diode._appearance.setFromAceEditorTheme(n)}))}),r,o.C.editorTheme());t.append(n),t.append(i),this._settings_container.append(t);var a=qe.createContainer(void 0),s=qe.createLabel(void 0,"Compile on property change","When false, the program is not recompiled after a property change"),l=qe.createToggleSwitch(void 0,(function(e){var t=e.checked;o.C.setRecompileOnPropertyChange(t)}),o.C.recompileOnPropertyChange());a.append(s),a.append(l),this._settings_container.append(a);var u=qe.createContainer(void 0),c=qe.createLabel(void 0,"DaCe Debug mode","When true, the program shows elements primarily useful for debugging and developing DaCe/DIODE."),_=qe.createToggleSwitch(void 0,(function(e){var t=e.checked;o.C.setDebugDevMode(t)}),o.C.debugDevMode());u.append(c),u.append(_),this._settings_container.append(u);var d=qe.createContainer(void 0),f=qe.createLabel(void 0,"UI Font","Select the font used in the UI (does not affect code panes and SDFG renderers)"),h=P.u.getClassProperties("diode_appearance").fontFamily,p=qe.createSelectInput(void 0,(function(t){var n=t.value;e.diode._appearance.setFont(n),e.diode._appearance.apply()}),P.u.fonts(),h);d.append(f),d.append(p),this._settings_container.append(d)}}]),s}(E),I=n(5533);function A(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;return(0,r.Z)(this,a),(i=o.call(this,e,t,n)).editor=null,i._terminal_identifer=null,i._markers=[],i}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=this,r=this.diode.goldenlayout.eventHub;this.on(this._project.eventString("-req-input_code"),(function(e){setTimeout((function(){return r.emit(n._project.eventString("input_code"),t.getState().code_content)}),1),n.editor.clearSelection()}),!0),this.on(this.project().eventString("-req-new_error"),(function(e){setTimeout((function(){return r.emit(n._project.eventString("new_error"),"ok")}),1),t.highlight_error(e)})),this.on(this.project().eventString("-req-highlight-code"),(function(e){setTimeout((function(){return r.emit(n._project.eventString("highlight-code"),"ok")}),1),t.highlight_code(e)})),this.on(this.project().eventString("-req-set-inputcode"),(function(e){setTimeout((function(){return r.emit(n._project.eventString("set-inputcode"),"ok")}),1),t.editor.setValue(e),t.editor.clearSelection()})),this.on(this.project().eventString("-req-clear-errors"),(function(e){setTimeout((function(){return r.emit(n._project.eventString("clear-errors"),"ok")}),1),t.clearErrors()}))}},{key:"highlight_code",value:function(e){var t=this,n=e.start_col,r=e.end_col;r<=n&&(r=2e3);var i=new ace.Range(e.start_line-1,n,e.end_line-1,r),o="chm_"+this.diode.getPseudorandom(),a=this.editor.session.addMarker(i,"code_highlight "+o);this.editor.resize(!0),this.editor.scrollToLine(e.start_line,!0,!0,(function(){})),this.editor.gotoLine(e.start_line,10,!0),setTimeout((function(){t.editor.getSession().removeMarker(a)}),5e3)}},{key:"clearErrors",value:function(){var e,t=A(this._markers);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.editor.getSession().removeMarker(n)}}catch(e){t.e(e)}finally{t.f()}this._markers=[]}},{key:"highlight_error",value:function(e){if("SyntaxError"==e.type){var t=parseInt(e.line),n=(parseInt(e.offset),e.text);t-=1;var r=this.editor.session.getLine(t).indexOf(n.substring(0,n.length-1)),i=new ace.Range(t,r,t,r+n.length-1),o="sem_"+this.diode.getPseudorandom(),a=this.editor.session.addMarker(i,"syntax_error_highlight "+o);this._markers.push(a)}else console.log("Untreated error type",e)}},{key:"terminal_identifier",value:function(){return this._terminal_identifer}},{key:"compile",value:function(e){var t,n=A(this._markers);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.editor.getSession().removeMarker(r)}}catch(e){n.e(e)}finally{n.f()}this._markers=[],this.diode.compile(this,e)}},{key:"setEditorReference",value:function(e){var t=this;this.editor=e,this.container.getElement()[0].addEventListener("resize",(function(e){t.editor.resize()}))}},{key:"compile_and_run",value:function(e){var t=this.diode.getPseudorandom(),n="terminal_"+t,r={title:"Terminal",type:"component",componentName:"TerminalComponent",componentState:{created:t}};this.diode.addContentItem(r),console.log("Server emitting to ",n),this._terminal_identifer=n,this.diode.gatherProjectElementsAndCompile(this,{},{run:!0,term_id:n})}}]),a}(E);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){return(0,r.Z)(this,a),o.call(this,e,t,n)}return(0,i.Z)(a,[{key:"setEditorReference",value:function(e){this.editor=e}},{key:"append",value:function(e){var t=this.editor.getSession();t.insert({row:t.getLength(),column:0},e);var n,r=t.getValue(),i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}((0,s.Z)(r.matchAll(/~#~#([^\n]+)/gm)));try{for(i.s();!(n=i.n()).done;){var o=n.value;console.log("Got match",o);var a=o[1];a=a.replace(/\'/g,""),(a=JSON.parse(a)).sort((function(e,t){return e-t}));var l=a[Math.floor(a.length/2)];console.log("Got median execution time",l),this.project().request(["new-time"],(function(){}),{params:{time:l}})}}catch(e){i.e(e)}finally{i.f()}this.container.extendState({current_value:r}),this.editor.clearSelection()}}]),a}(E);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;return(0,r.Z)(this,a),(i=o.call(this,e,t,n)).editor=null,i}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=this,r=this.diode.goldenlayout.eventHub;this.on(this._project.eventString("-req-new-codeout"),(function(e){if(e.sdfg_name==t.getState().sdfg_name){setTimeout((function(e){return r.emit(n.project().eventString("new-codeout"),"ok")}),1);var i=e;t.setCode(i)}}))}},{key:"cleanCode",value:function(e){return e.replace(/\s*\/\/\/\/\_\_DACE:[^\n]*/gm,"")}},{key:"setCode",value:function(e){var t=e;if("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof e.generated_code)this.editor.setValue(this.cleanCode(e.generated_code)),this.editor.clearSelection();else{this.editor.setValue(""),this.editor.clearSelection();var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.generated_code);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.generated_code.length>1&&(i="\n\n\n#########  NEXT CODE FILE ############\n\n\n"+i);var o=this.editor.getSession();o.insert({row:o.getLength(),column:0},this.cleanCode(i)),this.editor.clearSelection()}}catch(e){r.e(e)}finally{r.f()}}this.saveToState({code:t})}},{key:"setEditorReference",value:function(e){var t=this;this.editor=e,this.container.getElement()[0].addEventListener("resize",(function(e){t.editor.resize()}))}}]),a}(E),B=n(728);function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=n(9018);function q(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=globalThis.$,F=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.Z)(this,e),this._html_content=n,this._click_close_handlers=[],this._=setTimeout((function(){t._click_close_handlers=[["click",function(e){t.destroy()}],["contextmenu",function(e){t.destroy()}]];var e,n=q(t._click_close_handlers);try{for(n.s();!(e=n.n()).done;){var r,i=e.value;(r=window).addEventListener.apply(r,(0,s.Z)(i))}}catch(e){n.e(e)}finally{n.f()}}),30),this._options=[],this._cmenu_elem=null}return(0,i.Z)(e,[{key:"width",value:function(){return this._cmenu_elem.offsetWidth}},{key:"visible",value:function(){return null!=this._cmenu_elem}},{key:"addOption",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._options.push({name:e,func:t,onhover:n})}},{key:"addCheckableOption",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._options.push({name:e,checkbox:!0,checked:t,func:n,onhover:r})}},{key:"destroy",value:function(){if(this._cmenu_elem){document.body.removeChild(this._cmenu_elem);var e,t=q(this._click_close_handlers);try{for(t.s();!(e=t.n()).done;){var n,r=e.value;(n=window).removeEventListener.apply(n,(0,s.Z)(r))}}catch(e){t.e(e)}finally{t.f()}this._cmenu_elem=null}}},{key:"show",value:function(e,t){var n=document.createElement("div");if(n.id="contextmenu",K(n).css("left",e+"px"),K(n).css("top",t+"px"),n.classList.add("context_menu"),null==this._html_content){var r,i=q(this._options);try{var o=function(){var e=r.value,t=document.createElement("div");if(t.addEventListener("click",e.func),t.classList.add("context_menu_option"),e.checkbox){var i=document.createElement("span");i.classList=e.checked?"checkmark_checked":"checkmark",t.appendChild(i),t.innerHTML+=e.name,t.addEventListener("click",(function(t){e.checked=!e.checked,e.func(t,e.checked)}))}else t.innerText=e.name,t.addEventListener("click",e.func);n.appendChild(t)};for(i.s();!(r=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}}else n.innerHTML=this._html_content;this._cmenu_elem=n,document.body.appendChild(n)}}]),e}();function z(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;return(0,r.Z)(this,a),(i=o.call(this,e,t,n))._message_handler=function(e){return alert(e)},i.renderer_pane=null,i._analysis_values={},console.log("state",n),i}return(0,i.Z)(a,[{key:"saveToState",value:function(e){for(var t={},n=["sdfg_data","sdfg"],r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];t[o[0]]=n.includes(o[0])&&"string"!=typeof o[1]?JSON.stringify(o[1]):o[1]}(0,I.Z)((0,d.Z)(a.prototype),"saveToState",this).call(this,t),console.assert(null==this.getState().sdfg)}},{key:"resetState",value:function(e){for(var t={},n=["sdfg_data","sdfg"],r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];t[o[0]]=n.includes(o[0])&&"string"!=typeof o[1]?JSON.stringify(o[1]):o[1]}(0,I.Z)((0,d.Z)(a.prototype),"resetState",this).call(this,t),console.assert(null==this.getState().sdfg)}},{key:"getState",value:function(){for(var e=(0,I.Z)((0,d.Z)(a.prototype),"getState",this).call(this),t={},n=["sdfg_data","sdfg"],r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];t[o[0]]="string"==typeof o[1]&&n.includes(o[0])?JSON.parse(o[1]):o[1]}return t}},{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=this,r=this.diode.goldenlayout.eventHub;this.on(this._project.eventString("-req-new-sdfg"),(function(e){"string"==typeof e&&(e=(0,W.a)(e)),e.sdfg_name===t.getState().sdfg_name&&(setTimeout((function(){return r.emit(t.project().eventString("new-sdfg"),"ok")}),1),t.create_renderer_pane(e,!0))})),this.on(this._project.eventString("-req-sdfg-msg"),(function(e){var i=t.message_handler_filter(e);void 0===i&&(i="ok"),setTimeout((function(){return r.emit(n._project.eventString("sdfg-msg"),i)}),1)})),this.on(this._project.eventString("-req-sdfg_props"),(function(e){null!=e&&t.discardInvalidated(e);var i=t.getChangedSDFGPropertiesFromState(),o={};o[t.getState().sdfg_name]=i,setTimeout((function(){return r.emit(n._project.eventString("sdfg_props"),o)}),1)}),!0),this.on(this.project().eventString("-req-property-changed-"+this.getState().created),(function(e){setTimeout((function(){return r.emit(t.project().eventString("property-changed-"+t.getState().created),"ok")}),1),"symbol-properties"==e.type?t.symbolPropertyChanged(e.element,e.name,e.value):t.propertyChanged(e.element,e.name,e.value)}),!0),this.on(this.project().eventString("-req-delete-data-symbol-"+this.getState().created),(function(e){setTimeout((function(){return r.emit(t.project().eventString("delete-data-symbol-"+t.getState().created),"ok")}),1),t.removeDataSymbol(e)})),this.on(this.project().eventString("-req-add-data-symbol-"+this.getState().created),(function(e){setTimeout((function(){return r.emit(t.project().eventString("add-data-symbol-"+t.getState().created),"ok")}),1),t.addDataSymbol(e.type,e.name)})),this.on(this.project().eventString("-req-draw-perfinfo"),(function(e){setTimeout((function(){return r.emit(n._project.eventString("draw-perfinfo"),"ok")}),1),t._analysis_values=e.map((function(e){return{forProgram:e[0],AnalysisName:e[1],runopts:e[2],forUnifiedID:e[3],forSuperSection:e[4],forSection:e[5],data:JSON.parse(e[6])}})),t.renderer_pane.drawAllPerfInfo()})),this.on(this.project().eventString("-req-sdfg_object"),(function(e){var n=t.getSDFGDataFromState(),i="SDFG"==n.type?n:n.sdfg,o={};o[t.getState().sdfg_name]=i,setTimeout((function(){return r.emit(t.project().eventString("sdfg_object"),o)}),1)}),!0)}},{key:"removeDataSymbol",value:function(e){for(var t=this.getSDFGDataFromState().sdfg,n=!1,r=0,i=Object.keys(t.attributes._arrays);r<i.length;r++){var o=i[r];if(o==e){delete t.attributes._arrays[o],n=!0;break}}n||console.error("Did not find symbol "+name+" in SDFG, this is a fatal error");var a=this.getState();"SDFG"==a.type?console.error("Defensive programming no longer allowed; change input"):a.sdfg_data.sdfg=t,this.resetState(a),this.diode.refreshSDFG()}},{key:"addDataSymbol",value:function(e,t){if(""!=t){var n="";"Scalar"==e?n="Scalar":"Array"==e&&(n="Array");for(var r={type:n,attributes:{dtype:"int32"}},i=this.getSDFGDataFromState().sdfg,o=!1,a=0,s=Object.keys(i.attributes._arrays);a<s.length;a++)if(s[a]==t){o=!0;break}if(o)this.diode.toast("Cannot add symbol","A symbol with name "+t+" does already exist.","error",3e3);else{i.attributes._arrays[t]=r;var l=this.getState();"SDFG"==l.type?console.error("Defensive programming no longer allowed; change input"):l.sdfg_data.sdfg=i,this.resetState(l),this.diode.refreshSDFG()}}else alert("Invalid symbol name. Enter a symbol name in the input field")}},{key:"analysisProvider",value:function(e,t){var n=null;if(null!=t&&(n=parseInt(t.stateid)<<16|parseInt(t.nodeid)),console.log("analysisProvider",e,t),"getstates"==e)return this._analysis_values.map((function(e){return e.forUnifiedID>>16&65535}));if("getnodes"==e)return this._analysis_values.map((function(e){return 65535&e.forUnifiedID}));if("all_vec_analyses"==e)return this._analysis_values.filter((function(e){return"VectorizationAnalysis"==e.AnalysisName})).filter((function(e){return e.forUnifiedID==n}));if("CriticalPathAnalysis"==e)return this._analysis_values.filter((function(e){return"CriticalPathAnalysis"==e.AnalysisName})).filter((function(e){return e.forUnifiedID==n}));if("ParallelizationAnalysis"==e)return this._analysis_values.filter((function(e){return"ThreadAnalysis"==e.AnalysisName})).filter((function(e){return e.forUnifiedID==n}));if("MemoryAnalysis"==e)return this._analysis_values.filter((function(e){return"MemoryAnalysis"==e.AnalysisName})).filter((function(e){return e.forUnifiedID==n}));if("MemOpAnalysis"==e)return this._analysis_values.filter((function(e){return"MemoryOpAnalysis"==e.AnalysisName})).filter((function(e){return e.forUnifiedID==n}));if("CacheOpAnalysis"==e)return this._analysis_values.filter((function(e){return"CacheOpAnalysis"==e.AnalysisName})).filter((function(e){return e.forUnifiedID==n}));if("defaultRun"==e)return function(e){var t=e.map((function(e){var t=[];return e.runopts.replace(/OMP_NUM_THREADS=(\d+)/gm,(function(e,n){return t.push(n)})),t})),n=Math.max.apply(Math,(0,s.Z)(t.map((function(e){return parseInt(e)}))));return e.filter((function(e){return e.runopts=="# ;export OMP_NUM_THREADS="+n+"; Running in multirun config"}))};throw"#TODO"}},{key:"message_handler_filter",value:function(e){if((e=JSON.parse(e)).sdfg_name==this.getState().sdfg_name&&("clear-highlights"==e.type&&(this.highlighted_elements&&this.highlighted_elements.forEach((function(e){e&&(e.highlighted=!1)})),this.highlighted_elements=[],this.renderer_pane.draw_async()),"highlight-elements"==e.type)){this.highlighted_elements&&this.highlighted_elements.forEach((function(e){e&&(e.highlighted=!1)})),this.highlighted_elements=[];var t,n=z(e.elements);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r[0],o=r[1],a=r[2],s=null,l=null;if(void 0!==(l=i>=0?this.renderer_pane.sdfg_list[i]:this.renderer_pane.graph)){if(-1==o)s=l.node(a);else{var u=l.node(o);if(void 0===u)continue;s=u.data.graph.node(a)}void 0!==s&&this.highlighted_elements.push(s)}}}catch(e){n.e(e)}finally{n.f()}this.highlighted_elements.forEach((function(e){e&&(e.highlighted=!0)})),this.renderer_pane.draw_async()}}},{key:"has_component",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t||(t=this.diode.goldenlayout.root),"componentName"in t&&t.componentName===e)return t;if("contentItems"in t){var n,r=z(t.contentItems);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.has_component(e,i);if(o)return o}}catch(e){r.e(e)}finally{r.f()}}return null}},{key:"render_free_variables",value:function(e){var t=this,n=this.getSDFGDataFromState();"SDFG"!=n.type&&(n=n.sdfg),this.diode.replaceOrCreate(["render-free-vars"],"PropWinComponent",{data:n,calling_context:this.created},(function(){console.log("Calling recreation function"),t.diode.addContentItem({type:"component",componentName:"PropWinComponent",componentState:{}}),setTimeout((function(){return t.render_free_variables(e)}),1)}))}},{key:"merge_properties",value:function(e,t,n,r){var i,o=B.f4.getAttributeNames(e),a=B.f4.getAttributeNames(n),s={},l=z(o);try{for(l.s();!(i=l.n()).done;){var u=i.value,c=B.f4.getMetaFor(e,u);if(c.indirected)s["_meta_"+u]=c,s[u]=e.attributes[u];else{var _=JSON.parse(JSON.stringify(c));_.category=e.type+" - "+_.category,s["_meta_"+t+u]=_,s[t+u]=e.attributes[u]}}}catch(e){l.e(e)}finally{l.f()}var d,f=z(a);try{for(f.s();!(d=f.n()).done;){var h=d.value,p=B.f4.getMetaFor(n,h);if(!p.indirected){var v=JSON.parse(JSON.stringify(p));v.category=n.type+" - "+v.category,v._noderef=n.node_id,s["_meta_"+r+h]=v,s[r+h]=n.attributes[h]}}}catch(e){f.e(e)}finally{f.f()}var m=JSON.parse(JSON.stringify(e));return m.attributes=s,m}},{key:"getSDFGPropertiesFromState",value:function(){return this.getSDFGDataFromState().sdfg_props}},{key:"getSDFGDataFromState",value:function(){var e=this.getState(),t=null;for("string"==typeof(t=null!=e.sdfg?e:e.sdfg_data)&&(t=JSON.parse(t));"string"==typeof t.sdfg;)t.sdfg=(0,W.a)(t.sdfg);return t}},{key:"renderProperties",value:function(e){var t=e.data;this.diode.renderPropertiesInWindow(this,e,t)}},{key:"getSDFGElementReference",value:function(e,t){return null!=e&&e.constructor==Object?this.getEdgeReference(e,t):this.getNodeReference(e,t)}},{key:"getEdgeReference",value:function(e,t){var n=this.getSDFGDataFromState().sdfg;if(null==t){var r,i=z(n.edges);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.src==e.src&&o.dst==e.dst)return[o.attributes.data,n]}}catch(e){i.e(e)}finally{i.f()}}var a,s=z(n.nodes);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(l.id==t){var u,c=z(l.edges);try{for(c.s();!(u=c.n()).done;){var _=u.value;if(_.src==e.src&&_.dst==e.dst)return[_.attributes.data,n]}}catch(e){c.e(e)}finally{c.f()}break}}}catch(e){s.e(e)}finally{s.f()}}},{key:"getNodeReference",value:function(e,t){var n,r=this.getSDFGDataFromState().sdfg,i=z(r.nodes);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.id==t){if(null==e)return[o,r];var a,s=z(o.nodes);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(l.id==e)return[l,r]}}catch(e){s.e(e)}finally{s.f()}break}}}catch(e){i.e(e)}finally{i.f()}}},{key:"symbolPropertyChanged",value:function(e,t,n){console.log("symbolPropertyChanged",t,n);for(var r=this.getSDFGDataFromState().sdfg,i=!1,o=e.data(),a=0,s=Object.keys(r.attributes._arrays);a<s.length;a++){var l=s[a];if(l==o[0]){r.attributes._arrays[l].attributes[t]=n,i=!0;break}}i||console.error("Did not find symbol "+t+" in SDFG, this is a fatal error");var u=this.getState();"SDFG"==u.type?console.error("Defensive programming no longer allowed; change input"):u.sdfg_data.sdfg=r,this.resetState(u),this.diode.refreshSDFG()}},{key:"propertyChanged",value:function(e,t,n){e.element.attributes[t]=n;var r=this.renderer_pane.sdfg,i=this.getState();"SDFG"==i.type?i=r:i.sdfg_data.sdfg=r,this.resetState(i),this.diode.refreshSDFG()}},{key:"create_renderer_pane",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;null==t&&(t=this.getState().sdfg_data);var n=t;n="string"==typeof n?(0,W.a)(t):"sdfg"in t?t:{sdfg:t},console.assert(void 0===n.sdfg_props);var r=this.getState();if(console.assert(null!=r.sdfg_data),delete r.sdfg_data,this.resetState(r),this.saveToState({sdfg_data:n}),null!==this.renderer_pane)this.renderer_pane.set_sdfg(n.sdfg);else{var i=new SDFGRenderer(n.sdfg,this.container.getElement()[0],(function(t,n,r,i,o,a,s){return e.on_renderer_mouse_event(t,n,r,i,o,a,s)}),null,!1,"white");this.renderer_pane=i}this.render_free_variables(!0)}},{key:"on_renderer_mouse_event",value:function(e,t,n,r,i,o,a){var s=this,l=r.states,u=r.nodes,c=r.edges,_=r.isedges,d=r.connectors,f=l.length+u.length+c.length+_.length+d.length,h=null;if(o.length>0?h=o[0]:f=0,"click"!==e&&"doubleclick"!==e&&"mousedown"!==e&&"contextmenu"!==e&&"wheel"!==e||this.contextmenu&&(this.contextmenu.destroy(),this.contextmenu=null),0==f&&"click"===e)return this.highlighted_elements&&this.highlighted_elements.forEach((function(e){e&&(e.stroke_color=null)})),this.render_free_variables(!1),!0;if(0==f&&"contextmenu"===e){var p=new F;return p.addOption("SDFG Properties",(function(e){s.render_free_variables(!0)})),p.show(t.x,t.y),this.contextmenu=p,!1}u.length+c.length+_.length===0&&l.length;var v=null,m=null;if(l.length>0&&(v=l[0].id),_.length>0&&(m=_[0].id),u.length>0?m=u[0].id:c.length>0&&(m=c[0].id),"contextmenu"===e){var y={x:t.x,y:t.y},g=i.sdfg.attributes.name,b=new F,w=h?h.sdfg:null,E=null;return h instanceof State?E=h.data.state:h instanceof SDFGNode?(E=h.data.node).type.endsWith("Exit")&&(E=w.nodes[h.parent_id].nodes[E.scope_entry]):E=null,E&&"is_collapsed"in E.attributes&&b.addOption(E.attributes.is_collapsed?"Expand":"Collapse",(function(e){E.attributes.is_collapsed=!E.attributes.is_collapsed,s.renderer_pane.relayout(),s.renderer_pane.draw_async()})),b.addOption("Show transformations",(function(e){console.log("'Show transformations' was clicked"),s.project().request(["highlight-transformations-"+g],(function(e){}),{params:{state_id:v,node_id:m}})})),b.addOption("Apply transformation â–¶",(function(e){console.log("'Apply transformation' was clicked"),s.project().request(["get-transformations-"+g],(function(e){console.log("get-transformations response: ",e);var t,n=Object.values(e)[0],r=new F,i=z(n);try{var o=function(){var e=t.value;r.addOption(e.opt_name,(function(t){s.project().request(["apply-transformation-"+g],(function(e){}),{params:e.id_name})}))};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}r.show(y.x+b.width(),y.y)}),{params:{state_id:v,node_id:m}}),e.preventDefault(),e.stopPropagation()})),b.addOption("Show Source Code",(function(e){console.log("go to source code")})),b.addOption("Show Generated Code",(function(e){console.log("go to generated code")})),b.addOption("Properties",(function(e){console.log("Force-open property pane")})),b.show(y.x,y.y),this.contextmenu=b,!1}return"click"!==e||(this.highlighted_elements&&this.highlighted_elements.forEach((function(e){e&&(e.stroke_color=null)})),this.highlighted_elements=o,setTimeout((function(){console.log("sdfg",h.sdfg),h instanceof Edge&&null!==h.parent_id&&h.sdfg.nodes[v].edges[h.id].dst;var e=function(e){var t=[];e.forEach((function(e){var n,r=e.attributes,i=z(Object.keys(r).filter((function(e){return!e.startsWith("_meta_")})));try{for(i.s();!(n=i.n()).done;){var o=n.value,a=r[o],s=r["_meta_"+o];if(null!=s){var l=JSON.parse(JSON.stringify(s));l.value=a,l.name=o,t.push({property:l,element:e,sdfg:h.sdfg,category:e.type+" - "+l.category})}}}catch(e){i.e(e)}finally{i.f()}})),s.renderProperties({data:t})};if(h instanceof Edge)e([h.data]);else if(h instanceof SDFGNode){var t=h.data.node;t.parent_id=h.parent_id;var n=h.sdfg.nodes[h.parent_id];if(t.type.endsWith("Entry")){var r=function(e,t){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.type.endsWith("Exit")&&parseInt(i.scope_entry)==t.id)return i}}catch(e){r.e(e)}finally{r.f()}return console.warn("Did not find corresponding exit"),null}(n.nodes,t),o=i.sdfg_list[h.sdfg.sdfg_list_id].node(h.parent_id).data.graph.node(r.id);s.highlighted_elements.push(o),e([t,r])}else if(t.type.endsWith("Exit")){var a=parseInt(t.scope_entry),l=n.nodes[a],u=i.sdfg_list[h.sdfg.sdfg_list_id].node(h.parent_id).data.graph.node(l.id);s.highlighted_elements.push(u),e([l,t])}else"AccessNode"===t.type?e([t,h.sdfg.attributes._arrays[t.attributes.data]]):e([t])}else h instanceof State&&e([h.data.state]);s.highlighted_elements.forEach((function(e){e&&(e.stroke_color="red")})),i.draw_async()}),0)),!1}}]),a}(E);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=globalThis.$,Y=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;return(0,r.Z)(this,a),(i=o.call(this,e,t,n))._html_container=null,i.container.setTitle("Properties"),i}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=this.diode.goldenlayout.eventHub;this.on(this.project().eventString("-req-display-properties"),(function(e){setTimeout((function(){return n.emit(t.project().eventString("display-properties"),"ok")}),1),t.getHTMLContainer().innerHTML="";var r=e.params;"string"==typeof r&&(r=JSON.parse(r)),t.diode.renderProperties(e.transthis,e.node,r,t.getHTMLContainer(),e.options)})),this.on(this.project().eventString("-req-render-free-vars"),(function(e){setTimeout((function(){return n.emit(t.project().eventString("render-free-vars"),"ok")}),1),t.renderDataSymbols(e.calling_context,e.data)}))}},{key:"renderDataSymbolProperties",value:function(e,t){var n={data:function(){return t}};this.diode.renderPropertiesInWindow(e,n,t[1].attributes,{backaction:function(){},type:"symbol-properties"})}},{key:"removeDataSymbol",value:function(e,t){this.project().request(["delete-data-symbol-"+e],(function(e){}),{params:t})}},{key:"addDataSymbol",value:function(e,t,n){this.project().request(["add-data-symbol-"+e],(function(e){}),{params:{name:n,type:t}})}},{key:"renderDataSymbols",value:function(e,t){var n=this;if(null!=t){var r=new f.i;r.setHeaders("Symbol","Type","Dimensions","Controls");var i=[].concat((0,s.Z)(Object.keys(t.attributes.symbols)),["SwitchToArrays"],(0,s.Z)(Object.entries(t.attributes._arrays))),o=e;console.assert(null!=o&&"string"==typeof o);var a,l=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(i);try{var u=function(){var e=a.value;if("SwitchToArrays"==e)return r.addRow("Arrays").childNodes.forEach((function(e){e.colSpan=4,e.style="text-align:center;"})),"continue";if("null"==e[0]||null==e[1]||"string"==typeof e||e instanceof String)return"continue";var t=document.createElement("button");t.addEventListener("click",(function(t){n.renderDataSymbolProperties(o,e)})),t.innerText="Edit";var i=document.createElement("button");i.addEventListener("click",(function(t){n.removeDataSymbol(o,e[0])})),i.innerText="Delete";var s=document.createElement("div");s.appendChild(t),s.appendChild(i),r.addRow(e[0],e[1].type,e[1].attributes.dtype+"["+e[1].attributes.shape+"]",s)};for(l.s();!(a=l.n()).done;)u()}catch(e){l.e(e)}finally{l.f()}r.addRow("Add data symbols").childNodes.forEach((function(e){e.colSpan=4,e.style="text-align:center;"}));var c=document.createElement("input");c.type="text",c.placeholder="Symbol name";var _=document.createElement("button");_.innerText="Add Scalar",_.addEventListener("click",(function(){n.addDataSymbol(o,"Scalar",c.value)}));var d=document.createElement("button");d.addEventListener("click",(function(){n.addDataSymbol(o,"Array",c.value)})),d.innerText="Add Array";var h=document.createElement("div");h.appendChild(_),h.appendChild(d),r.addRow(c,h).childNodes.forEach((function(e){e.colSpan=2,e.style="text-align:center;"}));var p=document.createElement("div"),v=document.createElement("button");v.addEventListener("click",(function(){We("/dace/api/v1.0/expand/",{sdfg:t},(function(e){if(4===e.readyState&&200===e.status){var t=(0,W.a)(e.response);void 0!==t.error&&n.diode.handleErrors(n,t),n.project().request(["append-history"],(function(e){}),{params:{new_sdfg:t.sdfg,item_name:"Expand library nodes"}})}}))})),v.innerText="Expand all library nodes",p.appendChild(v),r.addRow(p),this.getHTMLContainer().innerHTML="",r.setCSSClass("free_symbol_table"),r.createIn(this.getHTMLContainer())}else console.warn("Data has not been set - creating empty window")}},{key:"getHTMLContainer",value:function(){return $(this.container.getElement()).children(".sdfgpropdiv")[0]}},{key:"createFromState",value:function(){this.getHTMLContainer().setAttribute("data-hint",'{"type": "DIODE", "name": "Property_Window"}');var e=this.getState();if(null!=e.params&&null!=e.params.params){var t=e.params;this.diode.renderProperties(t.transthis,t.node,JSON.parse(t.params),this.getHTMLContainer())}}}]),a}(E);function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=globalThis.$,ee=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){return(0,r.Z)(this,a),o.call(this,e,t,n)}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e),this.diode.goldenlayout.eventHub,this._autorefresher=null}},{key:"destroy",value:function(){clearInterval(this._autorefresher),(0,I.Z)((0,d.Z)(a.prototype),"destroy",this).call(this)}},{key:"refreshUI",value:function(e){var t=this;"string"==typeof e&&(e=JSON.parse(e)),null==e.elements&&(e.elements=[]);var n=Q(this.container.getElement())[0];n.innerHTML="";var r=document.createElement("div");Q(r).css("overflow","auto"),Q(r).width("100%"),Q(r).height("100%");var i=document.createElement("table"),o=document.createElement("thead"),a=document.createElement("tr");["position","clientID","state","options"].map((function(e){var t=document.createElement("th");return t.innerText=e,t})).forEach((function(e){return a.appendChild(e)})),o.appendChild(a),i.appendChild(o);var s,l=document.createElement("tbody"),u=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.elements);try{var c=function(){var e=s.value,n=e.options;"string"==typeof n||(null==n?null!=e.output&&"orphan"==e.type&&((n=document.createElement("button")).onclick=function(n){t.diode.addContentItem({type:"component",componentName:"TerminalComponent",componentState:{current_value:e.output},title:"Output"})},n.innerText="Output"):(null==n.type&&(n=n.perfopts),n=n.mode+", coresets "+n.core_counts));var r=[e.index,e.client_id,e.state,n],i=document.createElement("tr");r.map((function(e){var t=document.createElement("td");return"string"==typeof e||"number"==typeof e?t.innerText=e:t.appendChild(e),t})).forEach((function(e){return i.appendChild(e)})),l.appendChild(i)};for(u.s();!(s=u.n()).done;)c()}catch(e){u.e(e)}finally{u.f()}i.appendChild(l),r.appendChild(i),n.appendChild(r),Q(i).DataTable()}},{key:"create",value:function(){var e=this;this._autorefresher=setInterval((function(t){e.getCurrentQueue()}),2e3),Q(this.container.getElement()).css("overflow","auto"),this.refreshUI({})}},{key:"getCurrentQueue",value:function(){var e=this;We("/dace/api/v1.0/dispatcher/list/",{},(function(t){4===t.readyState&&200===t.status&&e.refreshUI(t.response)}))}}]),a}(E);function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=globalThis.$,re=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){return(0,r.Z)(this,a),o.call(this,e,t,n)}return(0,i.Z)(a,[{key:"create",value:function(){var e=this,t='<svg width="50" height="50" version="1.1" viewBox="0 0 13.2 13.2" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -284)"><g fill="none" stroke="#008000" stroke-width="2.65"><path d="m6.61 285v10.6"/><path d="m1.32 290h10.6"/></g></g></svg>';t="data:image/svg+xml;base64,"+btoa(t),this.container.setTitle("Start Page");var n=ne(this.container.getElement())[0],r=document.createElement("h1");r.id="startpage_header",r.innerText="DIODE",n.appendChild(r);var i=document.createElement("div");i.id="startpage_container",i.classList="flex_row",i.style="width: 100%;height:100%;";var o=document.createElement("div");o.id="startpage_recent";var a=document.createElement("div");a.innerText="New",a.classList="startpage_title",o.appendChild(a),o.appendChild(this.createStartpageListElement("Create a new Project",null,null,t,(function(t){e.container.close(),e.diode.openUploader("code-python")})));var s=document.createElement("div");s.innerText="Recent",s.classList="startpage_title",o.appendChild(s);var l=document.createElement("div");l.id="additional_resources";var u=document.createElement("div");u.innerText="Resources",u.classList="startpage_title",l.appendChild(u);var c,_=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(g.T.getSavedProjects());try{var d=function(){var t=c.value;console.log("p",t);var n=g.T.getProjectData(t);o.appendChild(e.createStartpageListElement(t,n.last_saved,n.description,void 0,(function(n){g.T.load(e.diode,t)})))};for(_.s();!(c=_.n()).done;)d()}catch(e){_.e(e)}finally{_.f()}var f='\n        <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" id="svg13" height="60.891094" width="57.565113" version="1.0" viewBox="0 0 143.91279 152.22773" inkscape:version="0.92.3 (2405546, 2018-03-11)">\n          \n          <metadata id="metadata17">\n            \n          </metadata>\n          <defs id="defs3">\n            <pattern y="0" x="0" height="6" width="6" patternUnits="userSpaceOnUse" id="EMFhbasepattern"/>\n          </defs>\n          <path id="path5" d="m 0,0 h 71.95639 c 39.75591,0 71.95639,34.079345 71.95639,76.11387 0,42.05451 -32.20048,76.11387 -71.95639,76.11387 H 0 Z" style="fill:#0070c0;fill-opacity:1;fill-rule:evenodd;stroke:none"/>\n          <path id="path7" d="M 76.913385,27.183525 115.29013,75.154451 76.913385,123.12538 Z" style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none"/>\n          <path id="path9" d="M 28.622652,27.183525 66.999394,50.049666 V 100.27923 L 28.622652,123.12538 Z" style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none"/>\n          <path id="path11" d="m 67.079345,75.234403 h 9.93398" style="fill:none;stroke:#ffffff;stroke-width:3.99757719px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1"/>\n        </svg>';f="data:image/svg+xml;base64,"+btoa(f),l.appendChild(this.createStartpageListElement("Visit DaCe on GitHub",null,null,"external_lib/GitHub-Mark.png",(function(e){window.open("https://github.com/spcl/dace","_blank")}))),l.appendChild(this.createStartpageListElement("Visit project page",null,null,f,(function(e){window.open("https://spcl.inf.ethz.ch/Research/DAPP/","_blank")}))),i.appendChild(o),i.appendChild(l),n.appendChild(i)}},{key:"createStartpageListElement",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e},o='<svg width="50" height="50" version="1.1" viewBox="0 0 13.229 13.229" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -283.77)" fill="none" stroke="#000" stroke-linecap="round" stroke-width=".68792"><path d="m3.3994 287.29v6.9099l6.5603-3.7876-6.5644-3.7899z" stroke-linejoin="round"/><g><path d="m3.3191 290.39h-2.6127"/><path d="m12.624 290.41h-2.6647v-3.3585"/><path d="m9.9597 290.41v2.9962"/></g></g></svg>';null==r&&(r="data:image/svg+xml;base64,"+btoa(o));var a=document.createElement("div");a.classList="startpage_list_element";var s=document.createElement("div");s.classList="flex_row";var l=document.createElement("img");l.src=r,l.width="50",l.height="50",s.appendChild(l);var u=document.createElement("div");u.classList="flex_column";var c=document.createElement("span");c.innerText=e;var _=document.createElement("span");_.innerText=n,u.appendChild(c),null!=n?u.appendChild(_):(c.style.fontSize="1.2rem",u.style.justifyContent="center"),s.appendChild(u);var d=document.createElement("div");d.classList="flex_column";var f=document.createElement("span");f.innerText=t;var h=document.createElement("span");return null!=f&&(d.appendChild(f),d.appendChild(h)),s.appendChild(d),a.appendChild(s),a.addEventListener("click",i),a}}]),a}(E);function ie(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=globalThis.$,se=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){return(0,r.Z)(this,a),o.call(this,e,t,n)}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=this.diode.goldenlayout.eventHub;this.on(this.project().eventString("-req-update-tfh"),(function(e){var r=t.project().getTransformationHistory();t.create(r),setTimeout((function(){return n.emit(t.project().eventString("update-tfh"),"ok")}),1)}))}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.container.getElement();ae(t).css("overflow","auto"),ae(t)[0].setAttribute("data-hint",'{"type": "DIODE_Element", "name": "TransformationHistory"}'),(t=ae(t)[0]).innerHTML="";var n=document.createElement("div");n.classList="transformation_history_base";var r=document.createElement("div");r.classList="transformation_history_list",this._history_scroll_div=r,n.appendChild(r),t.innerHTML="",t.appendChild(n);var i,o=0,a=ie(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;this.addElementToHistory(s,o),++o}}catch(e){a.e(e)}finally{a.f()}}},{key:"addElementToHistory",value:function(e,t){var n=this,r=this._history_scroll_div,i=document.createElement("div");i.classList="transformation_history_list_element";var o=document.createElement("div");o.classList="transformation_history_list_element_title",o.innerText=Object.values(e)[0][0].name;var a=document.createElement("div");a.classList="flex_row transformation_history_list_element_control";var s=document.createElement("div");s.classList="revert-button",s.title="revert",s.innerHTML="<i class='material-icons'>undo</i>",ae(s).hover((function(){i.classList.add("revert-hovered")}),(function(){i.classList.remove("revert-hovered")})),s.addEventListener("click",(function(e){var r=n.project().getTransformationSnapshots()[t];n.diode.multiple_SDFGs_available({compounds:r[1]}),n.project().discardTransformationsAfter(t),n.diode.gatherProjectElementsAndCompile(n,{},{sdfg_over_code:!0})})),a.appendChild(s),i.appendChild(o),i.appendChild(a),r.appendChild(i)}}]),a}(E);function le(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=globalThis.$,_e=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;(0,r.Z)(this,a),(i=o.call(this,e,t,n))._tree_view=null,i._current_root=null;var s=i.container.getElement();return ce(s).css("overflow","auto"),i.operation_running=!1,i}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=this,r=this.diode.goldenlayout.eventHub;this.on(this._project.eventString("-req-extend-optgraph"),(function(e){var i=e;"string"==typeof i&&JSON.parse(e);var o=i[t.getState().for_sdfg];void 0!==o&&(setTimeout((function(){return r.emit(n._project.eventString("extend-optgraph"),"ok")}),1),t.create(o))})),this.on(this._project.eventString("-req-optpath"),(function(e){var i={};i[t.getState().for_sdfg]=[],setTimeout((function(){return r.emit(n._project.eventString("optpath"),i)}),1)}));var i=this.getState().for_sdfg;this.on(this._project.eventString("-req-new-optgraph-"+i),(function(e){var o=JSON.parse(e);void 0!==o.matching_opts&&(setTimeout((function(){return r.emit(n._project.eventString("new-optgraph-"+i),"ok")}),1),t.create(o))})),this.on(this.project().eventString("-req-highlight-transformations-"+i),(function(e){t.getTransformations(e).forEach((function(e){return t.highlightTransformation(e)}))})),this.on(this.project().eventString("-req-get-transformations-"+i),(function(e){var o=t.getTransformations(e);setTimeout((function(){return r.emit(n._project.eventString("get-transformations-"+i),o)}),1)})),this.on(this.project().eventString("-req-apply-transformation-"+i),(function(e){for(var n=t.getState().optstruct,r=0,i=Object.values(n);r<i.length;r++){var o,a=le(i[r]);try{for(a.s();!(o=a.n()).done;){var s=o.value;void 0!==s&&s.id_name==e&&s.representative.dispatchEvent(new Event("click"))}}catch(e){a.e(e)}finally{a.f()}}})),this.on(this.project().eventString("-req-locate-transformation-"+i),(function(e){t.locateTransformation.apply(t,(0,s.Z)(JSON.parse(e)))})),this.on(this.project().eventString("-req-apply-adv-transformation-"+i),(function(e){var n=JSON.parse(e);t.applyTransformation.apply(t,(0,s.Z)(n))})),this.on(this.project().eventString("-req-append-history"),(function(e){t.appendHistoryItem(e.new_sdfg,e.item_name)})),this.on(this.project().eventString("-req-property-changed-"+this.getState().created),(function(e){t.propertyChanged(e.element,e.name,e.value),setTimeout((function(){return r.emit(t.project().eventString("property-changed-"+t.getState().created),"ok")}),1)}))}},{key:"getTransformations",value:function(e){for(var t=[],n="s"+e.state_id+"_"+e.node_id,r=this.getState().optstruct,i=0,o=Object.values(r);i<o.length;i++){var a,s=le(o[i]);try{for(s.s();!(a=s.n()).done;){var l=a.value;void 0!==l&&l.affects.includes(n)&&t.push(l)}}catch(e){s.e(e)}finally{s.f()}}return t}},{key:"highlightTransformation",value:function(e){for(var t=e.representative,n=t.parentNode;n;)n.classList.remove("at_collapse"),n=n.previousElementSibling;ce(t).css("color","red"),setTimeout((function(e){ce(t).css("color","")}),5e3)}},{key:"propertyChanged",value:function(e,t,n){return this.propertyChanged2(e,t,n)}},{key:"propertyChanged2",value:function(e,t,n){e.element[t]=n}},{key:"renderProperties",value:function(e,t,n){var r=e.opt_params,i={data:function(){return e.opt_params}};this.diode.renderPropertiesInWindow(this,i,r,{type:"transformation",sdfg_name:this.getState().for_sdfg,opt_name:e.opt_name,pos:t,apply_params:n})}},{key:"sendHighlightRequest",value:function(e){this._project.request(["sdfg-msg"],(function(e){}),{params:JSON.stringify({type:"highlight-elements",sdfg_name:this.getState().for_sdfg,elements:e}),timeout:1e3})}},{key:"sendClearHighlightRequest",value:function(){this._project.request(["sdfg-msg"],(function(e){}),{params:JSON.stringify({sdfg_name:this.getState().for_sdfg,type:"clear-highlights"}),timeout:1e3})}},{key:"addNodes",value:function(e){var t,n=this,r={},i=le(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;void 0===r[o.opt_name]&&(r[o.opt_name]=[]),r[o.opt_name].push(o)}}catch(e){i.e(e)}finally{i.f()}for(var a=[],s=0,l=Object.entries(r);s<l.length;s++){var u=l[s],c=u[0],_=u[1];a.push([c,_])}var d,f=le(a.sort((function(e,t){return e[0].localeCompare(t[0])})));try{for(f.s();!(d=f.n()).done;){var h=d.value,p=h[0],v=h[1],m=0,y=void 0;v.length>1&&function(){(y=document.createElement("div")).classList="flex_column";var e=document.createElement("div"),t=document.createElement("span");t.innerText=p,e.classList="at_group_header",e.appendChild(t),e.addEventListener("click",(function(t){e.classList.toggle("at_collapse")})),y.appendChild(e),n._transformation_list.appendChild(y)}();var g,b=le(v);try{for(b.s();!(g=b.n()).done;){var w=g.value;this.addNode(w,m,y),++m}}catch(e){b.e(e)}finally{b.f()}}}catch(e){f.e(e)}finally{f.f()}var E=this.getState();E.optstruct=r,this.saveToState(E)}},{key:"locateTransformation",value:function(e,t,n){var r=this;console.log("locateTransformation",arguments),this.sendHighlightRequest(n);var i=this.getState(),o=i.optstruct[e][t].representative;ce(o).css("background","green"),setTimeout((function(){r.sendClearHighlightRequest(),ce(o).css("background","")}),1e3)}},{key:"applyTransformation",value:function(e,t,n){var r=this;if(!this.operation_running){this.operation_running=!0;var i=this.getState().optstruct,o={},a=JSON.parse(JSON.stringify(i[e.opt_name][t]));o[this.getState().for_sdfg]=[{name:n,params:{props:a.opt_params}}];var s=function(e){r.diode.gatherProjectElementsAndCompile(r,{optpath:o},{sdfg_over_code:!0},(function(){r.project().saveSnapshot(e.sdfg_object,o),r.project().request(["update-tfh"],(function(e){r.operation_running=!1}),{on_timeout:function(){r.operation_running=!1}})}),(function(){r.operation_running=!1}))};this.project().request(["sdfg_object"],(function(e){console.log("Got snapshot",e),"string"==typeof e.sdfg_object&&(e.sdfg_object=JSON.parse(e.sdfg_object)),setTimeout(s,10,e)}),{})}}},{key:"appendHistoryItem",value:function(e,t){var n=this;if(!this.operation_running){this.operation_running=!0;var r={};r[this.getState().for_sdfg]=[{name:t,params:{}}];var i=function(){n.diode.gatherProjectElementsAndCompile(n,{code:(0,W.n)(e)},{})};this.project().request(["sdfg_object"],(function(e){console.log("Got snapshot",e),"string"==typeof e.sdfg_object&&(e.sdfg_object=JSON.parse(e.sdfg_object)),n.project().saveSnapshot(e.sdfg_object,r),n.project().request(["update-tfh"],(function(e){n.operation_running=!1}),{on_timeout:function(){n.operation_running=!1}}),setTimeout(i,10)}),{})}}},{key:"addNode",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=e.opt_name;0!=n&&(i+="$"+n),e.id_name=i;var o=void 0===r?this._transformation_list:r,a=document.createElement("div");a.classList="flex_row at_element";var s=document.createElement("div");s.innerText=i,s.addEventListener("mouseenter",(function(n){t.sendHighlightRequest(e.affects)})),s.addEventListener("mouseleave",(function(e){t.sendClearHighlightRequest()})),s.addEventListener("click",(function(r){t.applyTransformation(e,n,i)})),s.setAttribute("data-hint",'{"type": "transformation", "name": "'+e.opt_name+'"}'),e.representative=s;var l=document.createElement("div"),u=document.createElement("b");u.classList="",u.innerText="...",u.addEventListener("click",(function(r){t.renderProperties(e,n,[e,n,i])})),l.appendChild(u),a.appendChild(s),a.appendChild(l),o.appendChild(a)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(null!=e){var t=this.getState();Object.assign(t,e),this.resetState(t)}var n=this.getState();"string"==typeof n&&(n=JSON.parse(n));var r=void 0;if(null!=n.matching_opts)r=n.matching_opts;else if(null!=n.optgraph_data){var i=JSON.parse(n.optgraph_data);r=i.matching_opts}var o=this.container.getElement()[0];o.innerHTML="";var a=document.createElement("div");a.classList="at_container";var s=document.createElement("div");this._transformation_list=s,a.appendChild(s),o.appendChild(a),null!=r&&this.addNodes(r)}}]),a}(E);function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fe=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;return(0,r.Z)(this,a),(i=o.call(this,e,t,n)).editor=null,i}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=this,r=this.diode.goldenlayout.eventHub;this.on(this._project.eventString("-req-new-error"),(function(e){setTimeout((function(e){return r.emit(n.project().eventString("new-error"),"ok")}),1);var i=e;t.setError(i)}))}},{key:"setError",value:function(e){console.log("error",e);var t="";if("string"==typeof e)this.editor.setValue(e);else if(Array.isArray(e)){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=i.msg&&(t+=i.msg),console.log("Error element",i)}}catch(e){r.e(e)}finally{r.f()}this.editor.setValue(t)}this.saveToState({error:e})}},{key:"setEditorReference",value:function(e){var t=this;this.editor=e,this.container.getElement()[0].addEventListener("resize",(function(e){t.editor.resize()}))}}]),a}(E);var he=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;return(0,r.Z)(this,a),(i=o.call(this,e,t,n))._settings_container=null,i}return(0,i.Z)(a,[{key:"create",value:function(){var e=this,t=this.container.getElement()[0],n=document.createElement("div"),r=document.createElement("div"),i={"Configuration name":"",Host:"localhost","Use SSH":!0,"SSH Key":this.diode.pubSSH(),"SSH Key override":"",Instrumentation:"off","Number of threads":"[0]"},o=[],a=null;a={propertyChanged:function(t,n,s){if("Configuration name"==n&&e.diode.getRunConfigs().map((function(e){return e["Configuration name"]})).includes(s)){for(var l=e.diode.getRunConfigs(s),u=function(){var e=_[c],t=l[e];o.find((function(t){return t.name==e})).value=t},c=0,_=Object.keys(l);c<_.length;c++)u();return i=l,r.innerHTML="",void e.diode.renderProperties(a,t,o,r,{})}i[n]=s}},(o=[{name:"Configuration name",type:"combobox",value:i["Configuration name"],options:this.diode.getRunConfigs().map((function(e){return e["Configuration name"]})),desc:"Name of this configuration"},{name:"Host",type:"hosttype",value:i.Host,desc:"Host executing the programs"}]).forEach((function(e){return e.category="General"}));var l=[{name:"Use SSH",type:"bool",value:i["Use SSH"],desc:"Use SSH. Mandatory for remote hosts, optional for localhost."},{name:"SSH Key",type:"str",value:i["SSH Key"],desc:"Public SSH key (id_rsa.pub) to add to remote authorized_keys. This key must not be password-protected!"},{name:"SSH Key override",type:"str",value:i["SSH Key override"],desc:"Override the identity key file (ssh option -i) with this value if your password-free key is not id_rsa"}];l.forEach((function(e){return e.category="Remote"}));var u=[{name:"Instrumentation",type:"selectinput",value:i.Instrumentation,options:["off","minimal","full"],desc:"Set instrumentation mode (CPU only)"},{name:"Number of threads",type:"list",value:i["Number of threads"],desc:"Sets the number of OpenMP threads.If multiple numbers are specified, the program is executed once for every number of threads specified. Specify 0 to use system default"}];u.forEach((function(e){return e.category="Profiling"})),o=[].concat((0,s.Z)(o),l,u);var c={data:function(){return o}};this.diode.renderProperties(a,c,o,r,{}),n.appendChild(r),t.appendChild(n);var _=document.createElement("button");_.innerText="Save",_.addEventListener("click",(function(t){e.diode.addToRunConfigs(i)})),t.appendChild(_)}}]),a}(E);var pe=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;return(0,r.Z)(this,a),(i=o.call(this,e,t,n))._chart=null,i}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=this.diode.goldenlayout.eventHub,r=this;this.on(this.project().eventString("-req-new-time"),(function(e){setTimeout((function(e){return n.emit(r.project().eventString("new-time"),"ok")}),1),t.addTime(e.time)}))}},{key:"create",value:function(){var e=this.container.getElement()[0];e.innerHTML="";var t=document.createElement("canvas");e.appendChild(t);var n=this.getState();void 0===n.runtimes&&(n.runtimes=[]),console.log("Execution times loaded",n.runtimes);for(var r=[],i=0;i<n.runtimes.length;++i)r.push(i);this._chart=new Chart(t.getContext("2d"),{type:"bar",data:{labels:r,datasets:[{label:"Exec. times in s",backgroundColor:"blue",data:n.runtimes.map((function(e){return e}))}]},options:{responsive:!0,scales:{yAxes:[{display:!0,ticks:{beginAtZero:!0}}],xAxes:[{display:!0,ticks:{autoSkip:!0}}]},legend:{position:"top"},title:{display:!0,text:"Execution times"}}}),this._chart.update()}},{key:"addTime",value:function(e){var t=this.getState();void 0===t.runtimes&&(t.runtimes=[]),t.runtimes.push(e),this.resetState(t),this.create()}}]),a}(E);function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){return(0,r.Z)(this,a),o.call(this,e,t,n)}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){var t=this;(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e);var n=!1;this._update_timeout=setInterval((function(){We("/dace/api/v1.0/dispatcher/list/",{},(function(e){if(4===e.readyState&&200===e.status){var r,i=!0,o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(JSON.parse(e.response).elements);try{for(o.s();!(r=o.n()).done;){var a=r.value.options;"string"==typeof a&&(console.log("o is ",a),"endgroup"==a&&(i=!1,n=!0))}}catch(e){o.e(e)}finally{o.f()}n&&i&&(n=!1,t.diode.load_perfdata())}}))}),2e3)}},{key:"close",value:function(){clearInterval(this._update_timeout),this._update_timeout=null,(0,I.Z)((0,d.Z)(a.prototype),"close",this).call(this)}},{key:"destroy",value:function(){(0,I.Z)((0,d.Z)(a.prototype),"destroy",this).call(this)}},{key:"create",value:function(){var e=this,t=this.container.getElement()[0];t.innerHTML="<h2>Instrumentation control</h2><p>Do not close this window while instrumented programs are running</p>";var n=document.createElement("a");n.innerText="Download perfdata database",n.href=base_url+"/dace/api/v1.0/perfdata/download/"+this.diode.getClientID()+"/",n.download="perfdata.sqlite3";var r=document.createElement("a");r.innerText="Download CAN",r.href=base_url+"/dace/api/v1.0/can/download/"+this.diode.getClientID()+"/",r.download="current.sqlite3";var i=document.createElement("button");i.innerText="Delete remote database",i.addEventListener("click",(function(){We("/dace/api/v1.0/perfdata/reset/",{client_id:e.diode.getClientID()},(function(e){}))}));var o=document.createElement("button");o.innerText="Delete remote CAN",o.addEventListener("click",(function(){We("/dace/api/v1.0/can/reset/",{client_id:e.diode.getClientID()},(function(e){}))}));var a=document.createElement("button");a.innerText="Display instrumentation results",a.addEventListener("click",(function(){e.diode.load_perfdata()}));var s=document.createElement("button");s.innerText="Show roofline",s.addEventListener("click",(function(){e.diode.show_roofline()}));var l=document.createElement("div");l.classList="flex_column",l.appendChild(n),l.appendChild(r),l.appendChild(i),l.appendChild(o),l.appendChild(a),l.appendChild(s),t.appendChild(l)}}]),a}(E),ye=n(1318);function ge(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var we=0;function Ee(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hard",o=function(){return e.canvas.width},a=function(){return e.canvas.height};e.save(),"soft"===i?e.setLineDash([15,15]):e.setLineDash([]),e.beginPath(),e.strokeStyle="black",e.lineWidth=3;var s=a()-t.top-t.bottom,l=s/n.steps,u=n.inv_step_value_func(r),c=a()-t.bottom-l*u;e.moveTo(t.left,c),e.lineTo(o()-t.right,c),e.stroke(),e.beginPath(),e.font="25px Arial",e.fillStyle="black",e.textAlign="right",e.textBaseline="bottom",e.fillText(r.toString()+" FLOP/c",o()-t.right,c),e.restore()}function ke(e){return e.step_value_func((e.steps-0)*e.value_per_step)}function Se(e,t,n,r){var i=function(){return e.canvas.height},o=(i()-n.top-n.bottom)/t.steps,a=t.inv_step_value_func(r);return i()-n.bottom-o*a}function Ce(e,t,n,r){var i=(e.canvas.width-n.left-n.right)/t.steps,o=t.inv_step_value_func(r);return n.left+i*o}function xe(e,t,n,r,i){var o=function(){return e.canvas.height};e.save(),e.strokeStyle="black",e.lineWidth=3;var a,s=(o()-t.top-t.bottom)/r.steps,l=(e.canvas.width-t.left-t.right)/n.steps,u=ke(r),c=ke(n),_=i*c;_=Math.min(_,u),a=Math.min(_/i,c);var d=r.inv_step_value_func(n.step_value_func(0)*i),f=o()-t.bottom-s*d,h=r.inv_step_value_func(_),p=o()-t.bottom-s*h,v=n.inv_step_value_func(a),m=t.left+l*v;e.moveTo(t.left,f),e.lineTo(m,p),e.stroke(),e.translate(m,-p+t.top+t.bottom);var y=Math.atan2(p-f,m-t.left);e.rotate(y),e.font="25px Arial",e.fillStyle="black",e.textAlign="right",e.textBaseline="bottom",e.fillText(i.toString()+" B/c",0,0),e.restore()}var Oe=[],De=[],Pe=[];function Te(e,t){e.clearRect(0,0,e.canvas.width,e.canvas.height),t.drawAxes(),t.drawComputeBounds(),t.drawBandwidthBounds(),t.connectDots(),t.drawDots()}function Ie(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:5;e.save();var s=Ce(e,t,r,o),l=Se(e,n,r,i),u=a;e.fillStyle="red",e.fillRect(s-u,l-u,2*u,2*u),e.restore()}function Ae(e,t,n,r,i,o,a){var s=Ce(e,t,r,o),l=Se(e,n,r,i);Oe.push({x:s,y:l,floppercyc:i,flopperbyte:o,highlight:!1,id:a})}function Me(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=20,a=t-r,s=t+r,l=n-o,u=l-r;e.save(),e.fillStyle="cyan",e.moveTo(t,n),e.beginPath(),e.lineTo(t-o,l),e.lineTo(a,l),e.lineTo(a,u),e.lineTo(s,u),e.lineTo(s,l),e.lineTo(t+o,l),e.lineTo(t,n),e.closePath(),e.stroke(),e.fill(),e.fillStyle="black",e.font="40px Arial",e.textBaseline="top",void 0!==i&&e.fillText("id: "+i,a+o,u+o),e.restore()}var je=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.ctx=t,this.margin=n,this.xoptions=i,this.yoptions=o}return(0,i.Z)(e,[{key:"drawAxes",value:function(){var e=this.ctx,t=this.margin,n=function(){return e.canvas.height};e.strokeStyle="black",e.lineWidth=2,e.beginPath(),e.moveTo(t().left,n()-t().bottom),e.lineTo(t().left,t().top),e.stroke(),e.closePath(),e.beginPath(),e.moveTo(t().left,n()-t().bottom),e.lineTo(e.canvas.width-t().right,n()-t().bottom),e.stroke(),e.closePath(),function(e,t,n){var r=function(){return e.canvas.width},i=function(){return e.canvas.height},o=n.steps,a=n.step_value_func,s=(r()-t.left-t.right)/o,l=t.left,u=i()-t.bottom;e.save();for(var c=1;c<o;++c){var _=a(c),d=l+c*s;e.beginPath(),e.strokeStyle="black",e.lineWidth=2,e.setLineDash([]),e.moveTo(d,u-5),e.lineTo(d,u+5),e.stroke(),e.beginPath(),e.strokeStyle="gray",e.setLineDash([5,15]),e.lineWidth=1,e.moveTo(d,t.top),e.lineTo(d,i()-t.bottom),e.stroke(),e.beginPath(),e.strokeStyle="black",e.setLineDash([]),e.lineWidth=1,e.font="30px Arial",e.textAlign="center",e.textBaseline="top",_<1&&(_=ye.tV.valueToSensibleString(_,"fraction")),e.fillText(_.toString(),d,u+5)}e.beginPath(),e.strokeStyle="black",e.setLineDash([]),e.lineWidth=1,e.font="40px Arial",e.textAlign="center",e.textBaseline="top",e.fillText("Operational intensity [FLOP/byte]",t.left+(r()-t.left-t.right)/2,i()-t.bottom/2),e.restore()}(e,t(),this.xoptions),function(e,t,n){var r=function(){return e.canvas.height},i=n.steps,o=n.step_value_func,a=(r()-t.top-t.bottom)/i,s=t.left,l=r()-t.bottom;e.save();for(var u=1;u<i;++u){var c=o(u),_=l-u*a;e.beginPath(),e.strokeStyle="black",e.lineWidth=2,e.setLineDash([]),e.moveTo(s-5,_),e.lineTo(s+5,_),e.stroke(),e.beginPath(),e.strokeStyle="gray",e.setLineDash([5,15]),e.lineWidth=1,e.moveTo(t.left,_),e.lineTo(e.canvas.width-t.right,_),e.stroke(),e.beginPath(),e.strokeStyle="black",e.setLineDash([]),e.lineWidth=1,e.font="30px Arial",e.textAlign="right",e.textBaseline="middle",c<1&&(c=ye.tV.valueToSensibleString(c,"fraction")),e.fillText(c.toString(),s-5,_)}r(),t.bottom,t.top,t.top,e.beginPath(),e.strokeStyle="black",e.setLineDash([]),e.lineWidth=1,e.font="40px Arial",e.textAlign="center",e.textBaseline="middle",e.translate(t.left,0),e.rotate(Math.PI/-2),e.fillText("Performance [FLOP/c]",-r()/2,-t.left/2),e.translate(-t.left,0),e.restore()}(e,t(),this.yoptions)}},{key:"drawDots",value:function(){var e,t=[],n=ge(Oe);try{for(n.s();!(e=n.n()).done;){var r=e.value;Ie(this.ctx,this.xoptions,this.yoptions,this.margin(),r.floppercyc,r.flopperbyte,r.highlight?10:5),r.highlight&&t.push(r)}}catch(e){n.e(e)}finally{n.f()}for(var i=0,o=t;i<o.length;i++){var a=o[i];a.x=Ce(this.ctx,this.xoptions,this.margin(),a.flopperbyte),a.y=Se(this.ctx,this.yoptions,this.margin(),a.floppercyc),Me(this.ctx,a.x,a.y,200,a.id)}}},{key:"drawComputeBounds",value:function(){var e,t=0,n=ge(De);try{for(n.s();!(e=n.n()).done;){var r=e.value;Ee(this.ctx,this.margin(),this.yoptions,r,0==t?"hard":"soft"),++t}}catch(e){n.e(e)}finally{n.f()}}},{key:"drawBandwidthBounds",value:function(){var e,t=ge(Pe);try{for(t.s();!(e=t.n()).done;){var n=e.value;xe(this.ctx,this.margin(),this.xoptions,this.yoptions,n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"connectDots",value:function(){var e=void 0;this.ctx.beginPath();var t,n=ge(Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.x,o=r.y;void 0===e?this.ctx.moveTo(i,o):(this.ctx.lineTo(i,o),this.ctx.stroke()),e=i}}catch(e){n.e(e)}finally{n.f()}}}]),e}();var Le=function(e){(0,c.Z)(a,e);var t,n,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var i=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,_.Z)(this,e)});function a(e,t,n){var i;return(0,r.Z)(this,a),(i=o.call(this,e,t,n))._proc_func=null,i}return(0,i.Z)(a,[{key:"setupEvents",value:function(e){(0,I.Z)((0,d.Z)(a.prototype),"setupEvents",this).call(this,e),this.diode.goldenlayout.eventHub}},{key:"create",value:function(){var e=this,t=this.container.getElement()[0];t.style.width="100%",t.style.height="100%";var n=document.createElement("canvas");n.width=1920,n.height=1080;var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;null==e&&(e=document.getElementById("myCanvas"));var n=e.getContext("2d"),r=function(){return{top:100,bottom:100,left:200,right:100}},i={steps:20,value_per_step:1,step_value_func:function(e){return Math.pow(2,-6+e)},inv_step_value_func:function(e){return 6+Math.log2(e)}},o={steps:15,value_per_step:1,step_value_func:function(e){return Math.pow(2,-8+e)},inv_step_value_func:function(e){return 8+Math.log2(e)}},a=new je(n,r,i,o);e.addEventListener("mousemove",(function(t){var s,l=e.getBoundingClientRect(),u=(t.clientX-l.left)/(l.right-l.left)*e.width,c=(t.clientY-l.top)/(l.bottom-l.top)*e.height,_=function(e){return e*e},d=ge(Oe);try{for(d.s();!(s=d.n()).done;){var f=s.value;f.x=Ce(n,i,r(),f.flopperbyte),f.y=Se(n,o,r(),f.floppercyc),_(f.x-u)+_(f.y-c)<=_(15)?f.highlight=!0:f.highlight=!1}}catch(e){d.e(e)}finally{d.f()}Te(n,a)})),e.addEventListener("click",(function(t){var n,r=e.getBoundingClientRect(),i=(t.clientX-r.left)/(r.right-r.left)*e.width,o=(t.clientY-r.top)/(r.bottom-r.top)*e.height,a=function(e){return e*e},s=ge(Oe);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(a(l.x-i)+a(l.y-o)<=a(15))return void we.send(JSON.stringify({msg_type:"roofline",command:"select-program",programID:l.id}))}}catch(e){s.e(e)}finally{s.f()}})),Ee(n,r(),o,8),xe(n,r(),i,o,8),De.push(64,8),Pe.push(8),Ae(n,i,o,r(),1,1,1),Ae(n,i,o,r(),2,3,2),Ae(n,i,o,r(),4,6,3),Ae(n,i,o,r(),7,7,4),Ae(n,i,o,r(),8,8,5),Te(n,a);var s=function(e){if("roofline-data"==e.msg_type){Oe=[];var t,a=ge(e.data);try{for(a.s();!(t=a.n()).done;){var s=t.value,l=s.ProgramID,u=s.FLOP_C,c=(s.INPUT_B_C,s.PROC_B_C,u/s.MEM_B_C);Ae(n,i,o,r(),u,c,l)}}catch(e){a.e(e)}finally{a.f()}}},l=function(){(we=new WebSocket("ws://localhost:8024/")).onopen=function(e){we.send(JSON.stringify({msg_type:"roofline",command:"connected"}))},we.onmessage=function(e){msg=JSON.parse(e.data),s(msg)},we.onclose=function(e){console.log("ERROR: Connection closed!")},we.onerror=function(e){console.log("ERROR: There was an error with the connection.")}};return null==t?l():t(s),function(){return Te(n,a)}}(n,(function(t){e._proc_func=t})),i=function(){console.log("Resizing"),n.width=parseInt(t.style.width)-20,n.height=parseInt(t.style.height)-20,r()};t.addEventListener("resize",i),window.ResizeObserver?new ResizeObserver(i).observe(t):console.warn("ResizeObserver not available"),t.appendChild(n),We("/dace/api/v1.0/perfdata/roofline/",{client_id:this.diode.getClientID()},(function(t){4===t.readyState&&200===t.status&&e._proc_func(JSON.parse(t.response))}))}}]),a}(E);function Re(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ue="//"+window.location.host;globalThis.base_url=Ue;var Be=globalThis.$;function Ne(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{readMode:"text",condition:function(e){return!0}},i=function(t){r.condition(e)&&(t.stopPropagation(),t.preventDefault())},o=function(t){r.condition(e)&&(t.stopPropagation(),t.preventDefault())},a=function(n){if(r.condition(e)){var i=Array.from(n.dataTransfer.files);if(1!==i.length)throw i.length>1?(n.stopPropagation(),n.preventDefault(),alert("Cannot handle more than 1 input file at this point"),"Previous alert caused here"):(alert("Can only drop files at this point - everything else is user-agent-specific!"),"Previous alert caused here");n.stopPropagation(),n.preventDefault();var o=i[0],a=o.type,s=new FileReader;if(s.onload=function(e){t(a,e.target.result)},"text"==r.readMode)s.readAsText(o);else{if("binary"!=r.readMode)throw"Unimplemented read mode "+r.readMode;s.readAsArrayBuffer(o)}}};e.addEventListener("dragenter",i,!1),e.addEventListener("dragover",o,!1),e.addEventListener("drop",a,!1)}function We(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST",i=new XMLHttpRequest,o=Ue+e;if(i.open(r,o,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){n(i)},i.onerror=function(e){console.warn("Connection error",e),alert("Connection error")},null!=t){var a=JSON.stringify(t);i.send(a)}else i.send()}!function(){var e=new o.C;window.diode=e,e.initEnums(),e.pubSSH(!0),Be("#toolbar").w2toolbar({name:"toolbar",items:[{type:"menu",id:"file-menu",caption:"File",icon:"material-icons-outlined gmat-folder",items:[{text:"Start",icon:"material-icons-outlined gmat-new_folder",id:"start"},{text:"Open",icon:"material-icons-outlined gmat-open",id:"open-file"},{text:"Save",icon:"material-icons-outlined gmat-save",id:"save"}]},{type:"break",id:"break0"},{type:"menu",id:"settings-menu",caption:"Settings",icon:"material-icons-outlined gmat-settings",items:[{text:"DACE settings",icon:"material-icons-outlined gmat-settings-cloud",id:"diode-settings"},{text:"DIODE settings",icon:"material-icons-outlined gmat-settings-application",id:"diode-settings"},{text:"Run Configurations",icon:"material-icons-outlined gmat-playlist_play",id:"runoptions"},{text:"Runqueue",icon:"material-icons-outlined gmat-view_list",id:"runqueue"},{text:"Perfdata",id:"perfdata"},{text:"Perftimes",id:"perftimes"}]},{type:"menu",icon:"material-icons-outlined gmat-build",id:"compile-menu",caption:"Compile",items:[{text:"Compile",id:"compile",icon:"material-icons-outlined gmat-gavel"},{text:"Run",id:"run",icon:"material-icons-outlined gmat-play"},{text:"Discard changes and compile source",id:"compile-clean",icon:"material-icons-outlined gmat-clear"}]},{type:"menu-radio",id:"runconfig",text:function(t){var n="string"==typeof t.selected?t.selected:t.selected(),r=this.get("runconfig:"+n);return"Config: "+(null==r?e.getCurrentRunConfigName():r.text)},selected:function(t){return e.getCurrentRunConfigName()},items:[{id:"default",text:"default"}]},{type:"menu",id:"transformation-menu",caption:"Transformations",items:[{text:"History",id:"history"},{text:"Available Transformations",id:"available"}]},{type:"menu",id:"group-menu",caption:"Group",icon:"material-icons-outlined gmat-apps",items:[{text:"Group default",id:"group-diode1"}]},{type:"menu",id:"closed-windows",caption:"Closed windows",icon:"material-icons-outlined gmat-reopen",items:[]}],onClick:function(t){if("file-menu:open-file"===t.target&&e.openUploader("code-python"),"file-menu:start"===t.target&&(e.closeAll(),e.addContentItem({type:"component",componentName:"StartPageComponent",componentState:{}})),"file-menu:save"===t.target&&e.project().save(),"settings-menu:diode-settings"==t.target&&e.open_diode_settings(),"settings-menu:runqueue"==t.target&&e.open_runqueue(),"settings-menu:perfdata"==t.target&&e.show_inst_options(),"settings-menu:perftimes"==t.target&&e.show_exec_times(),"group-menu:group-sdfgs"==t.target&&(e.groupOptGraph(),e.groupSDFGsAndCodeOutsTogether()),"group-menu:group-diode1"==t.target&&e.groupLikeDIODE1(),"runconfig"==t.target){var n=this.get(t.target),r=e.getRunConfigs();n.items=[];var i,o=Re(r);try{for(o.s();!(i=o.n()).done;){var a=i.value["Configuration name"];n.items.push({id:a,text:a})}}catch(e){o.e(e)}finally{o.f()}}if(t.target.startsWith("runconfig:")){var s=t.target.substr("runconfig:".length);e.setCurrentRunConfig(s)}if("transformation-menu:history"==t.target&&e.addContentItem({type:"component",componentName:"TransformationHistoryComponent",title:"Transformation History",componentState:{}}),"transformation-menu:available"==t.target&&e.addContentItem({type:"component",componentName:"AvailableTransformationsComponent",componentState:{}}),"compile-menu:compile"==t.target&&e.gatherProjectElementsAndCompile(e,{},{sdfg_over_code:!0}),"compile-menu:compile-clean"==t.target&&(e.project().request(["clear-errors"],(function(){})),e.project().discardTransformationsAfter(0),e.project().request(["input_code"],(function(t){e.compile(e,t.input_code)}),{timeout:300,on_timeout:function(){return alert("No input code found, open a new file")}})),"settings-menu:runoptions"==t.target&&e.show_run_options(e),"compile-menu:run"==t.target&&e.ui_compile_and_run(e),"closed-windows"==t.target){var l=this.get(t.target);l.items=[],l.items.push({text:"Clear all",id:"clear-closed-windows",icon:"material-icons-outlined gmat-clear"});var u,c=Re(e.project().getClosedWindowsList());try{for(c.s();!(u=c.n()).done;){var _=u.value,d=_[0];l.items.push({text:d,id:"open-closed-"+_[1].created})}}catch(e){c.e(e)}finally{c.f()}this.refresh()}if("closed-windows:clear-closed-windows"==t.target&&e.project().clearClosedWindowsList(),t.target.startsWith("closed-windows:open-closed-")){var f=t.target;f=f.substr("closed-windows:open-closed-".length),e.project().reopenClosedWindow(f)}}});var t=sessionStorage.getItem("savedState"),n=null;(n=null!==t?new GoldenLayout(JSON.parse(t),Be("#diode_gl_container")):new GoldenLayout({content:[{type:"row",content:[{type:"component",componentName:"StartPageComponent",componentState:{}}]}]},Be("#diode_gl_container"))).on("stateChanged",e.debounce("stateChanged",(function(){if(n.isInitialised&&n.openPopouts.every((function(e){return e.isInitialised}))&&!n.isSubWindow){var e=n.toConfig(),t=JSON.stringify(e);sessionStorage.setItem("savedState",t)}}),500)),n.isSubWindow||n.eventHub.on("create-window-in-main",(function(t){var n=JSON.parse(t);e.addContentItem(n)})),n.registerComponent("testComponent",(function(e,t){e.getElement().html("<h2>"+t.label+"</h2>")})),n.registerComponent("SettingsComponent",(function(t,n){var r=new D(e,t,n);Be(t.getElement()).load("settings_view.html",(function(){r.get_settings()}))})),n.registerComponent("PerfTimesComponent",(function(t,n){var r=new pe(e,t,n);r.setupEvents(e.getCurrentProject()),r.create()})),n.registerComponent("InstControlComponent",(function(t,n){var r=new me(e,t,n);r.setupEvents(e.getCurrentProject()),r.create()})),n.registerComponent("RooflineComponent",(function(t,n){var r=new Le(e,t,n);r.setupEvents(e.getCurrentProject()),r.create()})),n.registerComponent("SDFGComponent",(function(t,n){var r=new J(e,t,n);r.create_renderer_pane(n.sdfg_data),r.setupEvents(e.getCurrentProject())})),n.registerComponent("TransformationHistoryComponent",(function(t,n){var r=new se(e,t,n);r.setupEvents(e.getCurrentProject());var i=r.project().getTransformationHistory();r.create(i)})),n.registerComponent("AvailableTransformationsComponent",(function(t,n){var r=new _e(e,t,n);r.setupEvents(e.getCurrentProject()),r.create()})),n.registerComponent("CodeInComponent",(function(t,n){var r=new j(e,t,n),i="code_in_"+r.created,a=Be(t.getElement()),s=Be("<div id='"+i+"' style='height: 100%; width: 100%; overflow-y:auto'></div>");a.append(s),a.hide().show(0),function(){var a=s;a.attr("id",i),a.text(n.code_content),a.hide().show(0);var l=ace.edit(s[0]);l.setTheme(o.C.themeString()),l.session.setMode("ace/mode/python"),l.getSession().on("change",(function(){t.extendState({code_content:l.getValue()})})),Ne(s[0],(function(e,t){console.log("File dropped",e,t),l.setValue(t),l.clearSelection()})),l.resize(),l.commands.addCommand({name:"Compile",bindKey:{win:"Ctrl-P",mac:"Command-P"},exec:function(e){alert("Compile pressed"),r.compile(e.getValue())},readOnly:!0}),l.commands.addCommand({name:"Compile and Run",bindKey:{win:"Alt-R",mac:"Alt-R"},exec:function(e){alert("Compile & Run pressed"),r.compile_and_run(e.getValue())},readOnly:!0}),r.setEditorReference(l),r.setupEvents(e.getCurrentProject())}()})),n.registerComponent("CodeOutComponent",(function(t,n){var r=new U(e,t,n),i="code_out_"+r.created,a=Be(t.getElement()),s=Be("<div id='"+i+"' style='height: 100%; width: 100%; overflow:auto'></div>");a.append(s),a.hide().show(0),function(){var t=s;t.attr("id",i),t.hide().show(0);var n=ace.edit(s[0]);n.setTheme(o.C.themeString()),n.session.setMode("ace/mode/c_cpp"),n.setReadOnly(!0),r.setEditorReference(n),r.setupEvents(e.getCurrentProject());var a=r.getState().code;r.setCode(a),n.resize()}()})),n.registerComponent("ErrorComponent",(function(t,n){var r=new fe(e,t,n),i="error_"+r.created,a=Be(t.getElement()),s=Be("<div id='"+i+"' style='height: 100%; width: 100%; overflow:auto'></div>");a.append(s),a.hide().show(0),function(){var t=s;t.attr("id",i),t.hide().show(0);var n=ace.edit(s[0]);n.setTheme(o.C.themeString()),n.session.setMode("ace/mode/python"),r.setEditorReference(n),r.setupEvents(e.getCurrentProject());var a=r.getState().error;r.setError(a),n.resize()}()})),n.registerComponent("TerminalComponent",(function(t,r){var i=new R(e,t,r),a="terminal_"+i.created,s=Be(t.getElement()),l=Be("<div id='"+a+"' style='height: 100%; width: 100%; overflow:auto'></div>");s.append(l),s.hide().show(0),l.hide().show(0);var u=ace.edit(l[0]);u.setTheme(o.C.themeString()),u.session.setMode("ace/mode/sh"),u.setReadOnly(!0);var c=i.getState().current_value;void 0!==c&&u.setValue(c),u.clearSelection(),i.setEditorReference(u),console.log("Client listening to",a),n.eventHub.on(a,(function(e){i.append(e)})),i.setupEvents(e.getCurrentProject())})),n.registerComponent("DIODESettingsComponent",(function(t,n){var r=new T(e,t,n),i="diode_settings"+r.created,o=Be(t.getElement()),a=Be("<div id='"+i+"' style='height: 100%; width: 100%; overflow:auto'></div>");a.append("<h1>DIODE settings</h1>"),r.setContainer(a),o.append(a)})),n.registerComponent("RunConfigComponent",(function(t,n){var r=new he(e,t,n);r.setupEvents(e.getCurrentProject()),r.create()})),n.registerComponent("PropWinComponent",(function(t,n){var r=new Y(e,t,n),i=document.createElement("div");i.classList.add("sdfgpropdiv"),i.style="width: 100%; height: 100%",Be(t.getElement()).append(i),r.setupEvents(e.getCurrentProject()),r.createFromState()})),n.registerComponent("StartPageComponent",(function(t,n){var r=new re(e,t,n);r.setupEvents(e.getCurrentProject()),r.create()})),n.registerComponent("RunqueueComponent",(function(t,n){var r=new ee(e,t,n);r.setupEvents(e.getCurrentProject()),r.create()})),n.on("itemDestroyed",(function(e){if(void 0!==e.config.componentState){var t=e.config.componentState.created;n.eventHub.emit("destroy-"+t),console.log("itemDestroyed",e)}})),e.setLayout(n),e.getProject(),n.init(),window.addEventListener("resize",(function(e){n.updateSize()})),document.body.addEventListener("keydown",(function(t){e.onKeyDown(t)})),document.body.addEventListener("keyup",(function(t){e.onKeyUp(t)})),e.addKeyShortcut("gg",(function(){e.groupOptGraph(),e.groupSDFGsAndCodeOutsTogether()})),e.addKeyShortcut("gd",(function(){e.groupLikeDIODE1()})),e.addKeyShortcut("0",(function(){e.open_diode_settings()})),e.addKeyShortcut("r",(function(){e.gatherProjectElementsAndCompile(e,{},{sdfg_over_code:!0})})),e.addKeyShortcut("s",(function(){e.project().save()}),!1,!0),e.setupEvents(),Ne(Be("#diode_gl_container")[0].firstChild,(function(t,n){console.log("File dropped",t,n);var r={type:"component",componentName:"CodeInComponent",componentState:{code_content:n}};e.addContentItem(r)}),void 0,{readMode:"text",condition:function(e){return 0==e.childNodes.length}})}();var qe=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,null,[{key:"createContainer",value:function(e){var t=document.createElement("div");return t.id=e,t.classList="settings_key_value",Be(t)}},{key:"createHostInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["localhost"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"localhost",i=document.createElement("input");i.type="list",i.id=e;var o=document.getElementById("hosttype-dlist");o||((o=document.createElement("datalist")).id="hosttype-dlist",document.body.appendChild(o)),Be(i).attr("list","hosttype-dlist"),o.innerHTML="";var a,s=Re(n);try{for(s.s();!(a=s.n()).done;){var l=a.value;o.innerHTML+='<option value="'+l+'">'}}catch(e){s.e(e)}finally{s.f()}return i.value=r,i.onchange=function(){t(i)},Be(i)}},{key:"createComboboxInput",value:function(e,t,n,r){var i=document.createElement("div"),o=document.createElement("input");o.type="list",o.id=e,o.onfocus=function(){var e=o.value;o.onblur=function(){o.value=e},o.value=""};var a=document.createElement("datalist");a.id=e+"-dlist",i.appendChild(a),Be(o).attr("list",e+"-dlist"),a.innerHTML="";var s,l=Re(n);try{for(l.s();!(s=l.n()).done;){var u=s.value;a.innerHTML+='<option value="'+u+'">'}}catch(e){l.e(e)}finally{l.f()}return o.value=r,o.onchange=function(){o.onblur=null,t(o)},i.appendChild(o),Be(i)}},{key:"createCodeReference",value:function(e,t,n){var r=document.createElement("span");if(r.id=e,r.addEventListener("click",(function(e){t(e)})),r.classList.add("code_ref"),null==n||null==n.filename)r.innerText="N/A",r.title="The DebugInfo for this element is not defined";else{var i=n.filename.split("/"),o=i[i.length-1];r.innerText=o+":"+n.start_line,r.title=n.filename}return Be(r)}},{key:"createLabel",value:function(e,t,n){var r=document.createElement("span");return r.id=e,r.innerHTML=t,r.title=n,r.classList="title",Be(r)}},{key:"createToggleSwitch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1,i=document.createElement("input");if(i.onchange=function(){t(i)},i.type="checkbox",i.id=e,i.checked=n,!r){var o=document.createElement("label");return o.classList="switch",Be(o).append(i),Be(o).append(Be('<span class="slider round"></span>')),Be(o)}return Be(i)}},{key:"createTextInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.createElement("input");return r.onchange=function(){t(r)},r.type="text",r.id=e,r.value=n,Be(r)}},{key:"createLongTextInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.createElement("textarea");return r.onchange=function(){t(r.innerHTML)},r.id=e,r.innerHTML=n,Be(r)}},{key:"createSelectInput",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement("select"),a=Re(n);try{for(a.s();!(r=a.n()).done;){var s=r.value,l=document.createElement("option");l.innerText=s,o.append(l)}}catch(e){a.e(e)}finally{a.f()}return o.oninput=function(){t(o)},o.id=e,o.value=i,Be(o)}},{key:"createIntInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=document.createElement("input");return r.oninput=function(){t(r)},r.type="number",r.step=1,r.id=e,r.value=n,Be(r)}},{key:"createFloatInput",value:function(e,t){var n=document.createElement("input");return n.oninput=function(){t(n)},n.type="number",n.id=e,Be(n)}},{key:"createButton",value:function(e,t,n){var r=document.createElement("button");return r.onclick=function(){t(r)},r.innerHTML=n,Be(r)}}]),e}()},9018:(e,t,n)=>{"use strict";n.d(t,{a:()=>i,n:()=>o});var r=n(484);function i(e){return JSON.parse(e,a)}function o(e){return JSON.stringify(e,(function(t,n){return s(0,n,e)}))}function a(e,t){return"sdfg"==e&&t&&"string"==typeof t&&"{"===t[0]?JSON.parse(t,a):t}function s(e,t,n){return!t||(i=t,"object"!==(0,r.Z)(i)||null===i||i instanceof Array||i instanceof Date)||t===n||!("type"in t)||"SDFG"!==t.type?t:JSON.stringify(t,(function(e,n){return s(0,n,t)}));var i}},728:(e,t,n)=>{"use strict";n.d(t,{E8:()=>l,f4:()=>_});var r=n(8927),i=n(6610),o=n(5991);function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(){function e(t){(0,i.Z)(this,e),this._sdfg=t}return(0,o.Z)(e,[{key:"getStates",value:function(){return this._sdfg.nodes.map((function(e){return new u(e)}))}}],[{key:"lookup_symbols",value:function(t,n,i,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=t.nodes[n],u=[];if(i.constructor==Object){var c,_=l.edges.filter((function(e){return e.dst==i.dst&&e.src==i.src})),d=a(_);try{for(d.s();!(c=d.n()).done;){var f=c.value,h=f.attributes.data.attributes.subset;if("subsets.Indices"==h.type){var p,v=h.indices.map((function(e){return e})).reverse(),m=a(v);try{for(m.s();!(p=m.n()).done;){var y=p.value;s+=1,u.push({var:y,val:null,depth:s})}}catch(e){m.e(e)}finally{m.f()}}else h.type;t.nodes[n].nodes[f.src];var g=e.lookup_symbols(t,n,f.src,o,s+1);u=[].concat((0,r.Z)(u),(0,r.Z)(g))}}catch(e){d.e(e)}finally{d.f()}}else{var b=l.nodes[i];try{!function(){var e=b.attributes.range.ranges.map((function(e){return e})),t=b.attributes.params.map((function(e){return e}));console.assert(e.length==t.length,"Ranges and params should have the same count of elements"),e.reverse(),t.reverse();for(var n=function(n){var r=u.filter((function(e){return e.var==t[n]}));0==r.length?(s+=1,u.push({var:t[n],val:e[n],depth:s})):JSON.stringify(r[0].val)!=JSON.stringify(e[n])&&console.warn("Colliding definitions for var "+t[n],r[0].val,e[n])},r=0;r<e.length;++r)n(r)}()}catch(S){}var w,E=l.edges.filter((function(e){return e.dst==i})),k=a(E);try{for(k.s();!(w=k.n()).done;){var S=w.value,C=e.lookup_symbols(t,n,S,o,s+1);u=[].concat((0,r.Z)(u),(0,r.Z)(C))}}catch(e){k.e(e)}finally{k.f()}}return u}}]),e}(),u=function(){function e(t){(0,i.Z)(this,e),this._sdfg_state=t}return(0,o.Z)(e,[{key:"getNodes",value:function(){return this._sdfg_state.nodes.map((function(e){return new c(e)}))}}]),e}(),c=function(){function e(t){(0,i.Z)(this,e),this._node=t}return(0,o.Z)(e,[{key:"isNodeType",value:function(e){return this._node.attributes.type===e}}]),e}(),_=function(){function e(){(0,i.Z)(this,e)}return(0,o.Z)(e,null,[{key:"getMetaFor",value:function(e,t){return e.attributes["_meta_"+t]}},{key:"getAttributeNames",value:function(e){var t=Object.keys(e.attributes);return t.filter((function(e){return t.includes("_meta_"+e)}))}}]),e}()},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new D(r||[]);return o._invoke=function(e,t,n){var r=_;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===_)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=c(e,t,n);if("normal"===l.type){if(r=n.done?h:d,l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=h,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var _="suspendedStart",d="suspendedYield",f="executing",h="completed",p={};function v(){}function m(){}function y(){}var g={};g[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(P([])));w&&w!==n&&r.call(w,o)&&(g=w);var E=y.prototype=v.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var l=c(e[i],e,o);if("throw"!==l.type){var u=l.arg,_=u.value;return _&&"object"==typeof _&&r.call(_,"__await")?t.resolve(_.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(_).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=E.constructor=y,y.constructor=m,m.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},k(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(E),l(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>e+".js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="diode-webclient:",__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var i,o;if(void 0!==n)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var l=a[s];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==dataWebpackPrefix+n){i=l;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+n),i.src=e),inProgress[e]=[t];var u=(t,n)=>{i.onerror=i.onload=null,clearTimeout(c);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={179:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,a,s]=n,l=0;for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);for(s&&s(__webpack_require__),t&&t(n);l<o.length;l++)i=o[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[o[l]]=0},n=self.webpackChunkdiode_webclient=self.webpackChunkdiode_webclient||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__=__webpack_require__(8821)})();
//# sourceMappingURL=main.js.map